"use strict";var Hs=Object.create;var Qe=Object.defineProperty;var Vs=Object.getOwnPropertyDescriptor;var qs=Object.getOwnPropertyNames;var Zs=Object.getPrototypeOf,$s=Object.prototype.hasOwnProperty;var l=(n,e)=>Qe(n,"name",{value:e,configurable:!0});var I=(n,e)=>()=>(n&&(e=n(n=0)),e);var N=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Gs=(n,e)=>{for(var t in e)Qe(n,t,{get:e[t],enumerable:!0})},Eo=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qs(e))!$s.call(n,s)&&s!==t&&Qe(n,s,{get:()=>e[s],enumerable:!(r=Vs(e,s))||r.enumerable});return n};var et=(n,e,t)=>(t=n!=null?Hs(Zs(n)):{},Eo(e||!n||!n.__esModule?Qe(t,"default",{value:n,enumerable:!0}):t,n)),Ks=n=>Eo(Qe({},"__esModule",{value:!0}),n);var To=N(An=>{var So="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");An.encode=function(n){if(0<=n&&n<So.length)return So[n];throw new TypeError("Must be between 0 and 63: "+n)};An.decode=function(n){var e=65,t=90,r=97,s=122,a=48,o=57,i=43,u=47,c=26,d=52;return e<=n&&n<=t?n-e:r<=n&&n<=s?n-r+c:a<=n&&n<=o?n-a+d:n==i?62:n==u?63:-1}});var Rn=N(On=>{var xo=To(),Fn=5,Mo=1<<Fn,Io=Mo-1,ko=Mo;function Js(n){return n<0?(-n<<1)+1:(n<<1)+0}l(Js,"toVLQSigned");function Xs(n){var e=(n&1)===1,t=n>>1;return e?-t:t}l(Xs,"fromVLQSigned");On.encode=l(function(e){var t="",r,s=Js(e);do r=s&Io,s>>>=Fn,s>0&&(r|=ko),t+=xo.encode(r);while(s>0);return t},"base64VLQ_encode");On.decode=l(function(e,t,r){var s=e.length,a=0,o=0,i,u;do{if(t>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=xo.decode(e.charCodeAt(t++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(u&ko),u&=Io,a=a+(u<<o),o+=Fn}while(i);r.value=Xs(a),r.rest=t},"base64VLQ_decode")});var Be=N(U=>{function Ys(n,e,t){if(e in n)return n[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}l(Ys,"getArg");U.getArg=Ys;var Lo=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Qs=/^data:.+\,.+$/;function tt(n){var e=n.match(Lo);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}l(tt,"urlParse");U.urlParse=tt;function Re(n){var e="";return n.scheme&&(e+=n.scheme+":"),e+="//",n.auth&&(e+=n.auth+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port),n.path&&(e+=n.path),e}l(Re,"urlGenerate");U.urlGenerate=Re;function Dn(n){var e=n,t=tt(n);if(t){if(!t.path)return n;e=t.path}for(var r=U.isAbsolute(e),s=e.split(/\/+/),a,o=0,i=s.length-1;i>=0;i--)a=s[i],a==="."?s.splice(i,1):a===".."?o++:o>0&&(a===""?(s.splice(i+1,o),o=0):(s.splice(i,2),o--));return e=s.join("/"),e===""&&(e=r?"/":"."),t?(t.path=e,Re(t)):e}l(Dn,"normalize");U.normalize=Dn;function Po(n,e){n===""&&(n="."),e===""&&(e=".");var t=tt(e),r=tt(n);if(r&&(n=r.path||"/"),t&&!t.scheme)return r&&(t.scheme=r.scheme),Re(t);if(t||e.match(Qs))return e;if(r&&!r.host&&!r.path)return r.host=e,Re(r);var s=e.charAt(0)==="/"?e:Dn(n.replace(/\/+$/,"")+"/"+e);return r?(r.path=s,Re(r)):s}l(Po,"join");U.join=Po;U.isAbsolute=function(n){return n.charAt(0)==="/"||Lo.test(n)};function ea(n,e){n===""&&(n="."),n=n.replace(/\/$/,"");for(var t=0;e.indexOf(n+"/")!==0;){var r=n.lastIndexOf("/");if(r<0||(n=n.slice(0,r),n.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(n.length+1)}l(ea,"relative");U.relative=ea;var No=function(){var n=Object.create(null);return!("__proto__"in n)}();function Co(n){return n}l(Co,"identity");function ta(n){return Ao(n)?"$"+n:n}l(ta,"toSetString");U.toSetString=No?Co:ta;function na(n){return Ao(n)?n.slice(1):n}l(na,"fromSetString");U.fromSetString=No?Co:na;function Ao(n){if(!n)return!1;var e=n.length;if(e<9||n.charCodeAt(e-1)!==95||n.charCodeAt(e-2)!==95||n.charCodeAt(e-3)!==111||n.charCodeAt(e-4)!==116||n.charCodeAt(e-5)!==111||n.charCodeAt(e-6)!==114||n.charCodeAt(e-7)!==112||n.charCodeAt(e-8)!==95||n.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(n.charCodeAt(t)!==36)return!1;return!0}l(Ao,"isProtoString");function ra(n,e,t){var r=De(n.source,e.source);return r!==0||(r=n.originalLine-e.originalLine,r!==0)||(r=n.originalColumn-e.originalColumn,r!==0||t)||(r=n.generatedColumn-e.generatedColumn,r!==0)||(r=n.generatedLine-e.generatedLine,r!==0)?r:De(n.name,e.name)}l(ra,"compareByOriginalPositions");U.compareByOriginalPositions=ra;function oa(n,e,t){var r=n.generatedLine-e.generatedLine;return r!==0||(r=n.generatedColumn-e.generatedColumn,r!==0||t)||(r=De(n.source,e.source),r!==0)||(r=n.originalLine-e.originalLine,r!==0)||(r=n.originalColumn-e.originalColumn,r!==0)?r:De(n.name,e.name)}l(oa,"compareByGeneratedPositionsDeflated");U.compareByGeneratedPositionsDeflated=oa;function De(n,e){return n===e?0:n===null?1:e===null?-1:n>e?1:-1}l(De,"strcmp");function ia(n,e){var t=n.generatedLine-e.generatedLine;return t!==0||(t=n.generatedColumn-e.generatedColumn,t!==0)||(t=De(n.source,e.source),t!==0)||(t=n.originalLine-e.originalLine,t!==0)||(t=n.originalColumn-e.originalColumn,t!==0)?t:De(n.name,e.name)}l(ia,"compareByGeneratedPositionsInflated");U.compareByGeneratedPositionsInflated=ia;function sa(n){return JSON.parse(n.replace(/^\)]}'[^\n]*\n/,""))}l(sa,"parseSourceMapInput");U.parseSourceMapInput=sa;function aa(n,e,t){if(e=e||"",n&&(n[n.length-1]!=="/"&&e[0]!=="/"&&(n+="/"),e=n+e),t){var r=tt(t);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var s=r.path.lastIndexOf("/");s>=0&&(r.path=r.path.substring(0,s+1))}e=Po(Re(r),e)}return Dn(e)}l(aa,"computeSourceURL");U.computeSourceURL=aa});var Wn=N(Fo=>{var Bn=Be(),Un=Object.prototype.hasOwnProperty,Ie=typeof Map<"u";function le(){this._array=[],this._set=Ie?new Map:Object.create(null)}l(le,"ArraySet");le.fromArray=l(function(e,t){for(var r=new le,s=0,a=e.length;s<a;s++)r.add(e[s],t);return r},"ArraySet_fromArray");le.prototype.size=l(function(){return Ie?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");le.prototype.add=l(function(e,t){var r=Ie?e:Bn.toSetString(e),s=Ie?this.has(e):Un.call(this._set,r),a=this._array.length;(!s||t)&&this._array.push(e),s||(Ie?this._set.set(e,a):this._set[r]=a)},"ArraySet_add");le.prototype.has=l(function(e){if(Ie)return this._set.has(e);var t=Bn.toSetString(e);return Un.call(this._set,t)},"ArraySet_has");le.prototype.indexOf=l(function(e){if(Ie){var t=this._set.get(e);if(t>=0)return t}else{var r=Bn.toSetString(e);if(Un.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");le.prototype.at=l(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");le.prototype.toArray=l(function(){return this._array.slice()},"ArraySet_toArray");Fo.ArraySet=le});var Do=N(Ro=>{var Oo=Be();function la(n,e){var t=n.generatedLine,r=e.generatedLine,s=n.generatedColumn,a=e.generatedColumn;return r>t||r==t&&a>=s||Oo.compareByGeneratedPositionsInflated(n,e)<=0}l(la,"generatedPositionAfter");function xt(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}l(xt,"MappingList");xt.prototype.unsortedForEach=l(function(e,t){this._array.forEach(e,t)},"MappingList_forEach");xt.prototype.add=l(function(e){la(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");xt.prototype.toArray=l(function(){return this._sorted||(this._array.sort(Oo.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");Ro.MappingList=xt});var zn=N(Bo=>{var nt=Rn(),F=Be(),Mt=Wn().ArraySet,ua=Do().MappingList;function q(n){n||(n={}),this._file=F.getArg(n,"file",null),this._sourceRoot=F.getArg(n,"sourceRoot",null),this._skipValidation=F.getArg(n,"skipValidation",!1),this._sources=new Mt,this._names=new Mt,this._mappings=new ua,this._sourcesContents=null}l(q,"SourceMapGenerator");q.prototype._version=3;q.fromSourceMap=l(function(e){var t=e.sourceRoot,r=new q({file:e.file,sourceRoot:t});return e.eachMapping(function(s){var a={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(a.source=s.source,t!=null&&(a.source=F.relative(t,a.source)),a.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(a.name=s.name)),r.addMapping(a)}),e.sources.forEach(function(s){var a=s;t!==null&&(a=F.relative(t,s)),r._sources.has(a)||r._sources.add(a);var o=e.sourceContentFor(s);o!=null&&r.setSourceContent(s,o)}),r},"SourceMapGenerator_fromSourceMap");q.prototype.addMapping=l(function(e){var t=F.getArg(e,"generated"),r=F.getArg(e,"original",null),s=F.getArg(e,"source",null),a=F.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,s,a),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:s,name:a})},"SourceMapGenerator_addMapping");q.prototype.setSourceContent=l(function(e,t){var r=e;this._sourceRoot!=null&&(r=F.relative(this._sourceRoot,r)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[F.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[F.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");q.prototype.applySourceMap=l(function(e,t,r){var s=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var a=this._sourceRoot;a!=null&&(s=F.relative(a,s));var o=new Mt,i=new Mt;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,r!=null&&(u.source=F.join(r,u.source)),a!=null&&(u.source=F.relative(a,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var d=u.source;d!=null&&!o.has(d)&&o.add(d);var _=u.name;_!=null&&!i.has(_)&&i.add(_)},this),this._sources=o,this._names=i,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(r!=null&&(u=F.join(r,u)),a!=null&&(u=F.relative(a,u)),this.setSourceContent(u,c))},this)},"SourceMapGenerator_applySourceMap");q.prototype._validateMapping=l(function(e,t,r,s){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!s)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:s}))}},"SourceMapGenerator_validateMapping");q.prototype._serializeMappings=l(function(){for(var e=0,t=1,r=0,s=0,a=0,o=0,i="",u,c,d,_,m=this._mappings.toArray(),f=0,p=m.length;f<p;f++){if(c=m[f],u="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)u+=";",t++;else if(f>0){if(!F.compareByGeneratedPositionsInflated(c,m[f-1]))continue;u+=","}u+=nt.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(_=this._sources.indexOf(c.source),u+=nt.encode(_-o),o=_,u+=nt.encode(c.originalLine-1-s),s=c.originalLine-1,u+=nt.encode(c.originalColumn-r),r=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),u+=nt.encode(d-a),a=d)),i+=u}return i},"SourceMapGenerator_serializeMappings");q.prototype._generateSourcesContent=l(function(e,t){return e.map(function(r){if(!this._sourcesContents)return null;t!=null&&(r=F.relative(t,r));var s=F.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)},"SourceMapGenerator_generateSourcesContent");q.prototype.toJSON=l(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");q.prototype.toString=l(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");Bo.SourceMapGenerator=q});var Uo=N(ke=>{ke.GREATEST_LOWER_BOUND=1;ke.LEAST_UPPER_BOUND=2;function jn(n,e,t,r,s,a){var o=Math.floor((e-n)/2)+n,i=s(t,r[o],!0);return i===0?o:i>0?e-o>1?jn(o,e,t,r,s,a):a==ke.LEAST_UPPER_BOUND?e<r.length?e:-1:o:o-n>1?jn(n,o,t,r,s,a):a==ke.LEAST_UPPER_BOUND?o:n<0?-1:n}l(jn,"recursiveSearch");ke.search=l(function(e,t,r,s){if(t.length===0)return-1;var a=jn(-1,t.length,e,t,r,s||ke.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&r(t[a],t[a-1],!0)===0;)--a;return a},"search")});var zo=N(Wo=>{function Hn(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}l(Hn,"swap");function ca(n,e){return Math.round(n+Math.random()*(e-n))}l(ca,"randomIntInRange");function Vn(n,e,t,r){if(t<r){var s=ca(t,r),a=t-1;Hn(n,s,r);for(var o=n[r],i=t;i<r;i++)e(n[i],o)<=0&&(a+=1,Hn(n,a,i));Hn(n,a+1,i);var u=a+1;Vn(n,e,t,u-1),Vn(n,e,u+1,r)}}l(Vn,"doQuickSort");Wo.quickSort=function(n,e){Vn(n,e,0,n.length-1)}});var Ho=N(It=>{var v=Be(),qn=Uo(),Ue=Wn().ArraySet,da=Rn(),rt=zo().quickSort;function L(n,e){var t=n;return typeof n=="string"&&(t=v.parseSourceMapInput(n)),t.sections!=null?new G(t,e):new B(t,e)}l(L,"SourceMapConsumer");L.fromSourceMap=function(n,e){return B.fromSourceMap(n,e)};L.prototype._version=3;L.prototype.__generatedMappings=null;Object.defineProperty(L.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:l(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});L.prototype.__originalMappings=null;Object.defineProperty(L.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:l(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});L.prototype._charIsMappingSeparator=l(function(e,t){var r=e.charAt(t);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");L.prototype._parseMappings=l(function(e,t){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");L.GENERATED_ORDER=1;L.ORIGINAL_ORDER=2;L.GREATEST_LOWER_BOUND=1;L.LEAST_UPPER_BOUND=2;L.prototype.eachMapping=l(function(e,t,r){var s=t||null,a=r||L.GENERATED_ORDER,o;switch(a){case L.GENERATED_ORDER:o=this._generatedMappings;break;case L.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=v.computeSourceURL(i,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)},"SourceMapConsumer_eachMapping");L.prototype.allGeneratedPositionsFor=l(function(e){var t=v.getArg(e,"line"),r={source:v.getArg(e,"source"),originalLine:t,originalColumn:v.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var s=[],a=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,qn.LEAST_UPPER_BOUND);if(a>=0){var o=this._originalMappings[a];if(e.column===void 0)for(var i=o.originalLine;o&&o.originalLine===i;)s.push({line:v.getArg(o,"generatedLine",null),column:v.getArg(o,"generatedColumn",null),lastColumn:v.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a];else for(var u=o.originalColumn;o&&o.originalLine===t&&o.originalColumn==u;)s.push({line:v.getArg(o,"generatedLine",null),column:v.getArg(o,"generatedColumn",null),lastColumn:v.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a]}return s},"SourceMapConsumer_allGeneratedPositionsFor");It.SourceMapConsumer=L;function B(n,e){var t=n;typeof n=="string"&&(t=v.parseSourceMapInput(n));var r=v.getArg(t,"version"),s=v.getArg(t,"sources"),a=v.getArg(t,"names",[]),o=v.getArg(t,"sourceRoot",null),i=v.getArg(t,"sourcesContent",null),u=v.getArg(t,"mappings"),c=v.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);o&&(o=v.normalize(o)),s=s.map(String).map(v.normalize).map(function(d){return o&&v.isAbsolute(o)&&v.isAbsolute(d)?v.relative(o,d):d}),this._names=Ue.fromArray(a.map(String),!0),this._sources=Ue.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(d){return v.computeSourceURL(o,d,e)}),this.sourceRoot=o,this.sourcesContent=i,this._mappings=u,this._sourceMapURL=e,this.file=c}l(B,"BasicSourceMapConsumer");B.prototype=Object.create(L.prototype);B.prototype.consumer=L;B.prototype._findSourceIndex=function(n){var e=n;if(this.sourceRoot!=null&&(e=v.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==n)return t;return-1};B.fromSourceMap=l(function(e,t){var r=Object.create(B.prototype),s=r._names=Ue.fromArray(e._names.toArray(),!0),a=r._sources=Ue.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map(function(f){return v.computeSourceURL(r.sourceRoot,f,t)});for(var o=e._mappings.toArray().slice(),i=r.__generatedMappings=[],u=r.__originalMappings=[],c=0,d=o.length;c<d;c++){var _=o[c],m=new jo;m.generatedLine=_.generatedLine,m.generatedColumn=_.generatedColumn,_.source&&(m.source=a.indexOf(_.source),m.originalLine=_.originalLine,m.originalColumn=_.originalColumn,_.name&&(m.name=s.indexOf(_.name)),u.push(m)),i.push(m)}return rt(r.__originalMappings,v.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");B.prototype._version=3;Object.defineProperty(B.prototype,"sources",{get:l(function(){return this._absoluteSources.slice()},"get")});function jo(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}l(jo,"Mapping");B.prototype._parseMappings=l(function(e,t){for(var r=1,s=0,a=0,o=0,i=0,u=0,c=e.length,d=0,_={},m={},f=[],p=[],h,g,b,T,E;d<c;)if(e.charAt(d)===";")r++,d++,s=0;else if(e.charAt(d)===",")d++;else{for(h=new jo,h.generatedLine=r,T=d;T<c&&!this._charIsMappingSeparator(e,T);T++);if(g=e.slice(d,T),b=_[g],b)d+=g.length;else{for(b=[];d<T;)da.decode(e,d,m),E=m.value,d=m.rest,b.push(E);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");_[g]=b}h.generatedColumn=s+b[0],s=h.generatedColumn,b.length>1&&(h.source=i+b[1],i+=b[1],h.originalLine=a+b[2],a=h.originalLine,h.originalLine+=1,h.originalColumn=o+b[3],o=h.originalColumn,b.length>4&&(h.name=u+b[4],u+=b[4])),p.push(h),typeof h.originalLine=="number"&&f.push(h)}rt(p,v.compareByGeneratedPositionsDeflated),this.__generatedMappings=p,rt(f,v.compareByOriginalPositions),this.__originalMappings=f},"SourceMapConsumer_parseMappings");B.prototype._findMapping=l(function(e,t,r,s,a,o){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return qn.search(e,t,a,o)},"SourceMapConsumer_findMapping");B.prototype.computeColumnSpans=l(function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");B.prototype.originalPositionFor=l(function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",v.compareByGeneratedPositionsDeflated,v.getArg(e,"bias",L.GREATEST_LOWER_BOUND));if(r>=0){var s=this._generatedMappings[r];if(s.generatedLine===t.generatedLine){var a=v.getArg(s,"source",null);a!==null&&(a=this._sources.at(a),a=v.computeSourceURL(this.sourceRoot,a,this._sourceMapURL));var o=v.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:a,line:v.getArg(s,"originalLine",null),column:v.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");B.prototype.hasContentsOfAllSources=l(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");B.prototype.sourceContentFor=l(function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var s=e;this.sourceRoot!=null&&(s=v.relative(this.sourceRoot,s));var a;if(this.sourceRoot!=null&&(a=v.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(a.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!a.path||a.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(t)return null;throw new Error('"'+s+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");B.prototype.generatedPositionFor=l(function(e){var t=v.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var r={source:t,originalLine:v.getArg(e,"line"),originalColumn:v.getArg(e,"column")},s=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",v.compareByOriginalPositions,v.getArg(e,"bias",L.GREATEST_LOWER_BOUND));if(s>=0){var a=this._originalMappings[s];if(a.source===r.source)return{line:v.getArg(a,"generatedLine",null),column:v.getArg(a,"generatedColumn",null),lastColumn:v.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");It.BasicSourceMapConsumer=B;function G(n,e){var t=n;typeof n=="string"&&(t=v.parseSourceMapInput(n));var r=v.getArg(t,"version"),s=v.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new Ue,this._names=new Ue;var a={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var i=v.getArg(o,"offset"),u=v.getArg(i,"line"),c=v.getArg(i,"column");if(u<a.line||u===a.line&&c<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=i,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new L(v.getArg(o,"map"),e)}})}l(G,"IndexedSourceMapConsumer");G.prototype=Object.create(L.prototype);G.prototype.constructor=L;G.prototype._version=3;Object.defineProperty(G.prototype,"sources",{get:l(function(){for(var n=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)n.push(this._sections[e].consumer.sources[t]);return n},"get")});G.prototype.originalPositionFor=l(function(e){var t={generatedLine:v.getArg(e,"line"),generatedColumn:v.getArg(e,"column")},r=qn.search(t,this._sections,function(a,o){var i=a.generatedLine-o.generatedOffset.generatedLine;return i||a.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[r];return s?s.consumer.originalPositionFor({line:t.generatedLine-(s.generatedOffset.generatedLine-1),column:t.generatedColumn-(s.generatedOffset.generatedLine===t.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");G.prototype.hasContentsOfAllSources=l(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");G.prototype.sourceContentFor=l(function(e,t){for(var r=0;r<this._sections.length;r++){var s=this._sections[r],a=s.consumer.sourceContentFor(e,!0);if(a)return a}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");G.prototype.generatedPositionFor=l(function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(r.consumer._findSourceIndex(v.getArg(e,"source"))!==-1){var s=r.consumer.generatedPositionFor(e);if(s){var a={line:s.line+(r.generatedOffset.generatedLine-1),column:s.column+(r.generatedOffset.generatedLine===s.line?r.generatedOffset.generatedColumn-1:0)};return a}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");G.prototype._parseMappings=l(function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var s=this._sections[r],a=s.consumer._generatedMappings,o=0;o<a.length;o++){var i=a[o],u=s.consumer._sources.at(i.source);u=v.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;i.name&&(c=s.consumer._names.at(i.name),this._names.add(c),c=this._names.indexOf(c));var d={source:u,generatedLine:i.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:i.generatedColumn+(s.generatedOffset.generatedLine===i.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:i.originalLine,originalColumn:i.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}rt(this.__generatedMappings,v.compareByGeneratedPositionsDeflated),rt(this.__originalMappings,v.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");It.IndexedSourceMapConsumer=G});var qo=N(Vo=>{var _a=zn().SourceMapGenerator,kt=Be(),ma=/(\r?\n)/,fa=10,We="$$$isSourceNode$$$";function H(n,e,t,r,s){this.children=[],this.sourceContents={},this.line=n==null?null:n,this.column=e==null?null:e,this.source=t==null?null:t,this.name=s==null?null:s,this[We]=!0,r!=null&&this.add(r)}l(H,"SourceNode");H.fromStringWithSourceMap=l(function(e,t,r){var s=new H,a=e.split(ma),o=0,i=l(function(){var m=p(),f=p()||"";return m+f;function p(){return o<a.length?a[o++]:void 0}},"shiftNextLine"),u=1,c=0,d=null;return t.eachMapping(function(m){if(d!==null)if(u<m.generatedLine)_(d,i()),u++,c=0;else{var f=a[o]||"",p=f.substr(0,m.generatedColumn-c);a[o]=f.substr(m.generatedColumn-c),c=m.generatedColumn,_(d,p),d=m;return}for(;u<m.generatedLine;)s.add(i()),u++;if(c<m.generatedColumn){var f=a[o]||"";s.add(f.substr(0,m.generatedColumn)),a[o]=f.substr(m.generatedColumn),c=m.generatedColumn}d=m},this),o<a.length&&(d&&_(d,i()),s.add(a.splice(o).join(""))),t.sources.forEach(function(m){var f=t.sourceContentFor(m);f!=null&&(r!=null&&(m=kt.join(r,m)),s.setSourceContent(m,f))}),s;function _(m,f){if(m===null||m.source===void 0)s.add(f);else{var p=r?kt.join(r,m.source):m.source;s.add(new H(m.originalLine,m.originalColumn,p,f,m.name))}}l(_,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");H.prototype.add=l(function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[We]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");H.prototype.prepend=l(function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[We]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");H.prototype.walk=l(function(e){for(var t,r=0,s=this.children.length;r<s;r++)t=this.children[r],t[We]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");H.prototype.join=l(function(e){var t,r,s=this.children.length;if(s>0){for(t=[],r=0;r<s-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},"SourceNode_join");H.prototype.replaceRight=l(function(e,t){var r=this.children[this.children.length-1];return r[We]?r.replaceRight(e,t):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},"SourceNode_replaceRight");H.prototype.setSourceContent=l(function(e,t){this.sourceContents[kt.toSetString(e)]=t},"SourceNode_setSourceContent");H.prototype.walkSourceContents=l(function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][We]&&this.children[t].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),t=0,r=s.length;t<r;t++)e(kt.fromSetString(s[t]),this.sourceContents[s[t]])},"SourceNode_walkSourceContents");H.prototype.toString=l(function(){var e="";return this.walk(function(t){e+=t}),e},"SourceNode_toString");H.prototype.toStringWithSourceMap=l(function(e){var t={code:"",line:1,column:0},r=new _a(e),s=!1,a=null,o=null,i=null,u=null;return this.walk(function(c,d){t.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((a!==d.source||o!==d.line||i!==d.column||u!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name}),a=d.source,o=d.line,i=d.column,u=d.name,s=!0):s&&(r.addMapping({generated:{line:t.line,column:t.column}}),a=null,s=!1);for(var _=0,m=c.length;_<m;_++)c.charCodeAt(_)===fa?(t.line++,t.column=0,_+1===m?(a=null,s=!1):s&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name})):t.column++}),this.walkSourceContents(function(c,d){r.setSourceContent(c,d)}),{code:t.code,map:r}},"SourceNode_toStringWithSourceMap");Vo.SourceNode=H});var Zo=N(Lt=>{Lt.SourceMapGenerator=zn().SourceMapGenerator;Lt.SourceMapConsumer=Ho().SourceMapConsumer;Lt.SourceNode=qo().SourceNode});var Go=N((Bu,$o)=>{var pa=Object.prototype.toString,Zn=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function ha(n){return pa.call(n).slice(8,-1)==="ArrayBuffer"}l(ha,"isArrayBuffer");function ga(n,e,t){e>>>=0;var r=n.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=r;else if(t>>>=0,t>r)throw new RangeError("'length' is out of bounds");return Zn?Buffer.from(n.slice(e,e+t)):new Buffer(new Uint8Array(n.slice(e,e+t)))}l(ga,"fromArrayBuffer");function ba(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Zn?Buffer.from(n,e):new Buffer(n,e)}l(ba,"fromString");function ya(n,e,t){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return ha(n)?ga(n,e,t):typeof n=="string"?ba(n,e):Zn?Buffer.from(n):new Buffer(n)}l(ya,"bufferFrom");$o.exports=ya});var ni=N((Pe,Jn)=>{var wa=Zo().SourceMapConsumer,$n=require("path"),ee;try{ee=require("fs"),(!ee.existsSync||!ee.readFileSync)&&(ee=null)}catch{}var va=Go();function Ko(n,e){return n.require(e)}l(Ko,"dynamicRequire");var Jo=!1,Xo=!1,Gn=!1,ot="auto",Le={},it={},Ea=/^data:application\/json[^,]+base64,/,pe=[],he=[];function Xn(){return ot==="browser"?!0:ot==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}l(Xn,"isInBrowser");function Sa(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}l(Sa,"hasGlobalProcessEventEmitter");function Ta(){return typeof process=="object"&&process!==null?process.version:""}l(Ta,"globalProcessVersion");function xa(){if(typeof process=="object"&&process!==null)return process.stderr}l(xa,"globalProcessStderr");function Ma(n){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(n)}l(Ma,"globalProcessExit");function Pt(n){return function(e){for(var t=0;t<n.length;t++){var r=n[t](e);if(r)return r}return null}}l(Pt,"handlerExec");var Yn=Pt(pe);pe.push(function(n){if(n=n.trim(),/^file:/.test(n)&&(n=n.replace(/file:\/\/\/(\w:)?/,function(r,s){return s?"":"/"})),n in Le)return Le[n];var e="";try{if(ee)ee.existsSync(n)&&(e=ee.readFileSync(n,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",n,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return Le[n]=e});function Kn(n,e){if(!n)return e;var t=$n.dirname(n),r=/^\w+:\/\/[^\/]*/.exec(t),s=r?r[0]:"",a=t.slice(s.length);return s&&/^\/\w\:/.test(a)?(s+="/",s+$n.resolve(t.slice(s.length),e).replace(/\\/g,"/")):s+$n.resolve(t.slice(s.length),e)}l(Kn,"supportRelativeURL");function Ia(n){var e;if(Xn())try{var t=new XMLHttpRequest;t.open("GET",n,!1),t.send(null),e=t.readyState===4?t.responseText:null;var r=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=Yn(n);for(var s=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,a,o;o=s.exec(e);)a=o;return a?a[1]:null}l(Ia,"retrieveSourceMapURL");var Qn=Pt(he);he.push(function(n){var e=Ia(n);if(!e)return null;var t;if(Ea.test(e)){var r=e.slice(e.indexOf(",")+1);t=va(r,"base64").toString(),e=n}else e=Kn(n,e),t=Yn(e);return t?{url:e,map:t}:null});function er(n){var e=it[n.source];if(!e){var t=Qn(n.source);t?(e=it[n.source]={url:t.url,map:new wa(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(s,a){var o=e.map.sourcesContent[a];if(o){var i=Kn(e.url,s);Le[i]=o}})):e=it[n.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(n);if(r.source!==null)return r.source=Kn(e.url,r.source),r}return n}l(er,"mapSourcePosition");function Qo(n){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(n);if(e){var t=er({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(n),e?"eval at "+e[1]+" ("+Qo(e[2])+")":n}l(Qo,"mapEvalOrigin");function ka(){var n,e="";if(this.isNative())e="native";else{n=this.getScriptNameOrSourceURL(),!n&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),n?e+=n:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var r=this.getColumnNumber();r&&(e+=":"+r)}}var s="",a=this.getFunctionName(),o=!0,i=this.isConstructor(),u=!(this.isToplevel()||i);if(u){var c=this.getTypeName();c==="[object Object]"&&(c="null");var d=this.getMethodName();a?(c&&a.indexOf(c)!=0&&(s+=c+"."),s+=a,d&&a.indexOf("."+d)!=a.length-d.length-1&&(s+=" [as "+d+"]")):s+=c+"."+(d||"<anonymous>")}else i?s+="new "+(a||"<anonymous>"):a?s+=a:(s+=e,o=!1);return o&&(s+=" ("+e+")"),s}l(ka,"CallSiteToString");function Yo(n){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return n[t].call(n)}:n[t]}),e.toString=ka,e}l(Yo,"cloneCallSite");function ei(n,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),n.isNative())return e.curPosition=null,n;var t=n.getFileName()||n.getScriptNameOrSourceURL();if(t){var r=n.getLineNumber(),s=n.getColumnNumber()-1,a=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,o=a.test(Ta())?0:62;r===1&&s>o&&!Xn()&&!n.isEval()&&(s-=o);var i=er({source:t,line:r,column:s});e.curPosition=i,n=Yo(n);var u=n.getFunctionName;return n.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},n.getFileName=function(){return i.source},n.getLineNumber=function(){return i.line},n.getColumnNumber=function(){return i.column+1},n.getScriptNameOrSourceURL=function(){return i.source},n}var c=n.isEval()&&n.getEvalOrigin();return c&&(c=Qo(c),n=Yo(n),n.getEvalOrigin=function(){return c}),n}l(ei,"wrapCallSite");function La(n,e){Gn&&(Le={},it={});for(var t=n.name||"Error",r=n.message||"",s=t+": "+r,a={nextPosition:null,curPosition:null},o=[],i=e.length-1;i>=0;i--)o.push(`
    at `+ei(e[i],a)),a.nextPosition=a.curPosition;return a.curPosition=a.nextPosition=null,s+o.reverse().join("")}l(La,"prepareStackTrace");function ti(n){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(n.stack);if(e){var t=e[1],r=+e[2],s=+e[3],a=Le[t];if(!a&&ee&&ee.existsSync(t))try{a=ee.readFileSync(t,"utf8")}catch{a=""}if(a){var o=a.split(/(?:\r\n|\r|\n)/)[r-1];if(o)return t+":"+r+`
`+o+`
`+new Array(s).join(" ")+"^"}}return null}l(ti,"getErrorSource");function Pa(n){var e=ti(n),t=xa();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(n.stack),Ma(1)}l(Pa,"printErrorAndExit");function Na(){var n=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(t&&!r)return Pa(arguments[1])}return n.apply(this,arguments)}}l(Na,"shimEmitUncaughtException");var Ca=pe.slice(0),Aa=he.slice(0);Pe.wrapCallSite=ei;Pe.getErrorSource=ti;Pe.mapSourcePosition=er;Pe.retrieveSourceMap=Qn;Pe.install=function(n){if(n=n||{},n.environment&&(ot=n.environment,["node","browser","auto"].indexOf(ot)===-1))throw new Error("environment "+ot+" was unknown. Available options are {auto, browser, node}");if(n.retrieveFile&&(n.overrideRetrieveFile&&(pe.length=0),pe.unshift(n.retrieveFile)),n.retrieveSourceMap&&(n.overrideRetrieveSourceMap&&(he.length=0),he.unshift(n.retrieveSourceMap)),n.hookRequire&&!Xn()){var e=Ko(Jn,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(a,o){return Le[o]=a,it[o]=void 0,t.call(this,a,o)},e.prototype._compile.__sourceMapSupport=!0)}if(Gn||(Gn="emptyCacheBetweenOperations"in n?n.emptyCacheBetweenOperations:!1),Jo||(Jo=!0,Error.prepareStackTrace=La),!Xo){var r="handleUncaughtExceptions"in n?n.handleUncaughtExceptions:!0;try{var s=Ko(Jn,"worker_threads");s.isMainThread===!1&&(r=!1)}catch{}r&&Sa()&&(Xo=!0,Na())}};Pe.resetRetrieveHandlers=function(){pe.length=0,he.length=0,pe=Ca.slice(0),he=Aa.slice(0),Qn=Pt(he),Yn=Pt(pe)}});var tr=N(()=>{ni().install()});function Nt(n,e,t){return{type:"virtual",indentation:n,subs:e,label:t}}function nr(n,e,t,r,s){if(t==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:n,lineNumber:e,sourceLine:t,subs:r,label:s}}function Ct(n){return{type:"blank",lineNumber:n,subs:[]}}function st(n){return{type:"top",indentation:-1,subs:n!=null?n:[]}}function P(n){return n.type==="blank"}function K(n){return n.type==="line"}function V(n){return n.type==="virtual"}function ge(n){return n.type==="top"}function Fa(n,e){function t(r){if(!V(r)&&!ge(r)&&r.lineNumber===e)return r.subs=[],!0;for(let s=0;s<r.subs.length;s++)if(t(r.subs[s]))return r.subs=r.subs.slice(0,s+1),!0;return!1}l(t,"cut"),t(n)}function Oa(n){return JSON.parse(JSON.stringify(n))}var Ne=I(()=>{"use strict";l(Nt,"virtualNode");l(nr,"lineNode");l(Ct,"blankNode");l(st,"topNode");l(P,"isBlank");l(K,"isLine");l(V,"isVirtual");l(ge,"isTop");l(Fa,"cutTreeAfterLine");l(Oa,"duplicateTree")});function ri(n){return A(n,e=>{e.label=void 0},"bottomUp"),n}function rr(n,e){return A(n,t=>{t.label=t.label?e(t.label)?void 0:t.label:void 0},"bottomUp"),n}function te(n,e){switch(n.type){case"line":case"virtual":{let t=n.subs.map(r=>te(r,e));return{...n,subs:t,label:n.label?e(n.label):void 0}}case"blank":return{...n,label:n.label?e(n.label):void 0};case"top":return{...n,subs:n.subs.map(t=>te(t,e)),label:n.label?e(n.label):void 0}}}function Ra(n){let e=0;function t(r){!V(r)&&!ge(r)&&(r.lineNumber=e,e++)}l(t,"visitor"),A(n,t,"topDown")}function A(n,e,t){function r(s){t==="topDown"&&e(s),s.subs.forEach(a=>{r(a)}),t==="bottomUp"&&e(s)}l(r,"_visit"),r(n)}function Da(n,e,t){function r(s){if(t==="topDown"&&!e(s))return!1;let a=!0;return s.subs.forEach(o=>{a=a&&r(o)}),t==="bottomUp"&&(a=a&&e(s)),a}l(r,"_visit"),r(n)}function at(n,e,t,r){let s=e;function a(o){s=t(o,s)}return l(a,"visitor"),A(n,a,r),s}function lt(n,e,t){let r=l(a=>{if(t!==void 0&&t(a))return a;{let o=a.subs.map(r).filter(i=>i!==void 0);return a.subs=o,e(a)}},"rebuild"),s=r(n);return s!==void 0?s:st()}var ze=I(()=>{"use strict";Ne();l(ri,"clearLabels");l(rr,"clearLabelsIf");l(te,"mapLabels");l(Ra,"resetLineNumbers");l(A,"visitTree");l(Da,"visitTreeConditionally");l(at,"foldTree");l(lt,"rebuildTree")});function oi(n){let e=n.split(`
`),t=e.map(c=>c.match(/^\s*/)[0].length),r=e.map(c=>c.trimLeft());function s(c){let[d,_]=a(c+1,t[c]);return[nr(t[c],c,r[c],d),_]}l(s,"parseNode");function a(c,d){let _,m=[],f=c,p;for(;f<r.length&&(r[f]===""||t[f]>d);)if(r[f]==="")p===void 0&&(p=f),f+=1;else{if(p!==void 0){for(let h=p;h<f;h++)m.push(Ct(h));p=void 0}[_,f]=s(f),m.push(_)}return p!==void 0&&(f=p),[m,f]}l(a,"parseSubs");let[o,i]=a(0,-1),u=i;for(;u<r.length&&r[u]==="";)o.push(Ct(u)),u+=1;if(u<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${u} out of ${r.length}`);return st(o)}function je(n,e){function t(r){if(K(r)){let s=e.find(a=>a.matches(r.sourceLine));s&&(r.label=s.label)}}l(t,"visitor"),A(n,t,"bottomUp")}function ut(n){function e(t){if(V(t)&&t.label===void 0){let r=t.subs.filter(s=>!P(s));r.length===1&&(t.label=r[0].label)}}l(e,"visitor"),A(n,e,"bottomUp")}function He(n){return Object.keys(n).map(e=>{let t;return n[e].test?t=l(r=>n[e].test(r),"matches"):t=n[e],{matches:t,label:e}})}function At(n){let t=lt(n,l(function(r){if(r.subs.length===0||r.subs.findIndex(o=>o.label==="closer"||o.label==="opener")===-1)return r;let s=[],a;for(let o=0;o<r.subs.length;o++){let i=r.subs[o],u=r.subs[o-1];if(i.label==="opener"&&u!==void 0&&K(u))u.subs.push(i),i.subs.forEach(c=>u.subs.push(c)),i.subs=[];else if(i.label==="closer"&&a!==void 0&&(K(i)||V(i))&&i.indentation>=a.indentation){let c=s.length-1;for(;c>0&&P(s[c]);)c-=1;if(a.subs.push(...s.splice(c+1)),i.subs.length>0){let d=a.subs.findIndex(p=>p.label!=="newVirtual"),_=a.subs.slice(0,d),m=a.subs.slice(d),f=m.length>0?[Nt(i.indentation,m,"newVirtual")]:[];a.subs=[..._,...f,i]}else a.subs.push(i)}else s.push(i),P(i)||(a=i)}return r.subs=s,r},"rebuilder"));return rr(n,r=>r==="newVirtual"),t}function or(n,e=P,t){return lt(n,l(function(s){if(s.subs.length<=1)return s;let a=[],o=[],i,u=!1;function c(d=!1){if(i!==void 0&&(a.length>0||!d)){let _=Nt(i,o,t);a.push(_)}else o.forEach(_=>a.push(_))}l(c,"flushBlockIntoNewSubs");for(let d=0;d<s.subs.length;d++){let _=s.subs[d],m=e(_);!m&&u&&(c(),o=[]),u=m,o.push(_),P(_)||(i=i!=null?i:_.indentation)}return c(!0),s.subs=a,s},"rebuilder"))}function ne(n){return lt(n,l(function(t){return V(t)&&t.label===void 0&&t.subs.length<=1?t.subs.length===0?void 0:t.subs[0]:(t.subs.length===1&&V(t.subs[0])&&t.subs[0].label===void 0&&(t.subs=t.subs[0].subs),t)},"rebuilder"))}function Ft(n,e){ii[n]=e}function be(n,e){let t=oi(n),r=ii[e!=null?e:""];return r?r(t):(je(t,Ua),At(t))}var Ba,Ua,ii,Ve=I(()=>{"use strict";Ne();ze();l(oi,"parseRaw");l(je,"labelLines");l(ut,"labelVirtualInherited");l(He,"buildLabelRules");l(At,"combineClosersAndOpeners");l(or,"groupBlocks");l(ne,"flattenVirtual");Ba={opener:/^[[({]/,closer:/^[\])}]/},Ua=He(Ba),ii={};l(Ft,"registerLanguageSpecificParser");l(be,"parseTree")});function si(n){let e=n;return je(e,za),e=At(e),e=ne(e),ut(e),A(e,t=>{if(t.label==="class"||t.label==="interface")for(let r of t.subs)!P(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}var Wa,za,ai=I(()=>{"use strict";Ne();ze();Ve();Wa={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},za=He(Wa);l(si,"processJava")});function li(n){let e=n;if(je(e,Ha),P(e))return e;function t(a){if(a.label==="heading")return 1;if(a.label==="subheading")return 2;if(a.label==="subsubheading")return 3}l(t,"headingLevel");let r=[e],s=[...e.subs];e.subs=[];for(let a of s){let o=t(a);if(o===void 0||P(a))r[r.length-1].subs.push(a);else{for(;r.length<o;)r.push(r[r.length-1]);for(r[o-1].subs.push(a),r[o]=a;r.length>o+1;)r.pop()}}return e=or(e),e=ne(e),ut(e),e}var ja,Ha,ui=I(()=>{"use strict";Ne();Ve();ja={heading:/^# /,subheading:/^## /,subsubheading:/### /},Ha=He(ja);l(li,"processMarkdown")});function ct(n){return" ".repeat(n.indentation)+n.sourceLine+`
`}function ci(n){function e(t,r){let s="";return K(t)?s=ct(t):P(t)&&(s=`
`),r+s}return l(e,"accumulator"),at(n,"",e,"topDown")}function Va(n,e){let t=new Set(e),r=[],s="";function a(o){o.label!==void 0&&t.has(o.label)?(s!==""&&r.push({label:void 0,source:s}),r.push({label:o.label,source:ci(o)}),s=""):(K(o)&&(s+=ct(o)),o.subs.forEach(a))}return l(a,"visit"),a(n),s!==""&&r.push({label:void 0,source:s}),r}function di(n,e=0){let t=" ".repeat(e);if(n===void 0)return"UNDEFINED NODE";let r;n.subs===void 0?r="UNDEFINED SUBS":r=n.subs.map(o=>di(o,e+2)).join(`,
`),r===""?r="[]":r=`[
${r}
      ${t}]`;let s=(V(n)||ge(n)?"   ":String(n.lineNumber).padStart(3," "))+`:  ${t}`,a=n.label===void 0?"":JSON.stringify(n.label);return V(n)||ge(n)?`${s}vnode(${n.indentation}, ${a}, ${r})`:P(n)?`${s}blank(${a!=null?a:""})`:`${s}lnode(${n.indentation}, ${a}, ${JSON.stringify(n.sourceLine)}, ${r})`}function _i(n,e=""){let t=n.label===void 0?"":`, ${JSON.stringify(n.label)}`,r=!P(n)&&n.subs.length>0?`[
${n.subs.map(s=>_i(s,e+"  ")).join(`, 
`)}
${e}]`:"[]";switch(n.type){case"blank":return`${e}blankNode(${n.lineNumber}${t})`;case"top":return`topNode(${r}${t})`;case"virtual":return`${e}virtualNode(${n.indentation}, ${r}${t})`;case"line":return`${e}lineNode(${n.indentation}, ${n.lineNumber}, "${n.sourceLine}", ${r}${t})`}}function mi(n){if(K(n)||P(n))return n.lineNumber;for(let e of n.subs){let t=mi(e);if(t!==void 0)return t}}function fi(n){let e,t=n.subs.length-1;for(;t>=0&&e===void 0;)e=fi(n.subs[t]),t--;return e===void 0&&!V(n)&&!ge(n)?n.lineNumber:e}var pi=I(()=>{"use strict";Ne();ze();l(ct,"deparseLine");l(ci,"deparseTree");l(Va,"deparseAndCutTree");l(di,"describeTree");l(_i,"encodeTree");l(mi,"firstLineOf");l(fi,"lastLineOf")});var dt=I(()=>{"use strict";ai();ui();Ve();Ne();pi();ze();Ve();Ft("markdown",li);Ft("java",si)});function qe(n,e=hi){let t=te(n,r=>r?1:void 0);return A(t,r=>{var a;if(P(r))return;let s=r.subs.reduce((o,i)=>{var u;return Math.max(o,(u=i.label)!=null?u:0)},0);r.label=Math.max((a=r.label)!=null?a:0,s*e.worthUp)},"bottomUp"),A(t,r=>{if(P(r))return;let s=r.subs.map(i=>{var u;return(u=i.label)!=null?u:0}),a=[...s];for(let i=0;i<s.length;i++)s[i]!==0&&(a=a.map((u,c)=>Math.max(u,Math.pow(e.worthSibling,Math.abs(i-c))*s[i])));let o=r.label;o!==void 0&&(a=a.map(i=>Math.max(i,e.worthDown*o))),r.subs.forEach((i,u)=>i.label=a[u])},"topDown"),gi(t)}function gi(n){let e=at(n,[],(t,r)=>{var s,a;return(t.type==="line"||t.type==="blank")&&r.push(t.type==="line"?[ct(t).trimEnd(),(s=t.label)!=null?s:0]:["",(a=t.label)!=null?a:0]),r},"topDown");return new _t(e)}var hi,Ot=I(()=>{"use strict";ir();dt();hi={worthUp:.9,worthSibling:.88,worthDown:.8};l(qe,"fromTreeWithFocussedLines");l(gi,"fromTreeWithValuedLines")});function sr(n,e=!0,t=!0){let r=typeof n=="string"?be(n):be(n.source,n.languageId);ne(r);let s=te(r,a=>e&&a!=="closer");return A(s,a=>{a.label===void 0&&(a.label=e&&a.label!==!1)},"topDown"),e&&A(s,a=>{if(a.label){let o=!1;for(let i of[...a.subs].reverse())i.label&&!o?o=!0:i.label=!1}else for(let o of a.subs)o.label=!1;a.subs.length>0&&(a.label=!1)},"topDown"),t&&A(s,a=>{a.label||(a.label=(K(a)||P(a))&&a.lineNumber==0)},"topDown"),qe(s)}var ar=I(()=>{"use strict";Ot();dt();l(sr,"elidableTextForSourceCode")});var lr,ye,Rt=I(()=>{"use strict";lr=class lr extends Error{constructor(t,r){super(t);this.cause=r;this.code="CopilotPromptLoadFailure"}};l(lr,"CopilotPromptLoadFailure");ye=lr});var bi=N(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.bytePairEncode=oe.BinaryMap=oe.binaryMapKey=void 0;var qa=l((n,e,t)=>{let r=t-e,s=16777215>>>Math.max(0,(3-r)*8),a=(n[e+0]|n[e+1]<<8|n[e+2]<<16)&s,o=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),i=(n[e+3]|n[e+4]<<8|n[e+5]<<16)&o;return a+16777216*i},"binaryMapKey");oe.binaryMapKey=qa;var mt=class mt{constructor(){this.nested=new Map,this.final=new Map}get(e,t=0,r=e.length){var o;let s=r<6+t,a=(0,oe.binaryMapKey)(e,t,r);return s?this.final.get(a):(o=this.nested.get(a))==null?void 0:o.get(e,6+t,r)}set(e,t){let r=(0,oe.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,t);return}let a=this.nested.get(r);if(a instanceof mt)a.set(e.subarray(6),t);else{let o=new mt;o.set(e.subarray(6),t),this.nested.set(r,o)}}};l(mt,"BinaryMap");var ur=mt;oe.BinaryMap=ur;var re=new Int32Array(128),W=new Int32Array(128);function Za(n,e,t){var u;if(t===1)return[e.get(n)];let r=2147483647,s=-1;for(;re.length<t*2;)W=new Int32Array(W.length*2),re=new Int32Array(re.length*2);for(let c=0;c<t-1;c++){let d=(u=e.get(n,c,c+2))!=null?u:2147483647;d<r&&(r=d,s=c),W[c]=c,re[c]=d}W[t-1]=t-1,re[t-1]=2147483647,W[t]=t,re[t]=2147483647;let a=t+1;function o(c,d=0){if(c+d+2<a){let _=e.get(n,W[c],W[c+d+2]);if(_!==void 0)return _}return 2147483647}for(l(o,"getRank");r!==2147483647;){re[W[s]]=o(s,1),s>0&&(re[W[s-1]]=o(s-1,1));for(let c=s+1;c<a-1;c++)W[c]=W[c+1];a--,s=-1,r=2147483647;for(let c=0;c<a-1;c++){let d=re[W[c]];re[W[c]]<r&&(r=d,s=c)}}let i=[];for(let c=0;c<a-1;c++)i.push(e.get(n,W[c],W[c+1]));return i}l(Za,"bytePairEncode");oe.bytePairEncode=Za});var yi=N(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.makeTextEncoder=void 0;var _r=class _r{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let t=this.encoder.encode(e);return this.length=t.length,t}};l(_r,"UniversalTextEncoder");var cr=_r,mr=class mr{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}};l(mr,"NodeTextEncoder");var dr=mr,$a=l(()=>typeof Buffer<"u"?new dr:new cr,"makeTextEncoder");Dt.makeTextEncoder=$a});var wi=N(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.LRUCache=void 0;var hr=class hr{constructor(e){this.size=e,this.nodes=new Map}get(e){let t=this.nodes.get(e);if(t)return this.moveToHead(t),t.value}set(e,t){let r=this.nodes.get(e);if(r)r.value=t,this.moveToHead(r);else{let s=new pr(e,t);this.nodes.set(e,s),this.addNode(s),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};l(hr,"LRUCache");var fr=hr;Bt.LRUCache=fr;var gr=class gr{constructor(e,t){this.key=e,this.value=t}};l(gr,"Node");var pr=gr});var wr=N(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.TikTokenizer=void 0;var Ga=require("fs"),Ka=require("util"),Ut=bi(),Ja=yi(),Xa=wi();function Ya(n){let e=new Map;try{let r=Ga.readFileSync(n,"utf-8");return t(r),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function t(r){for(let s of r.split(/[\r\n]+/)){if(s.trim()==="")continue;let a=s.split(" ");if(a.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let o=new Uint8Array(Buffer.from(a[0],"base64")),i=parseInt(a[1]);if(!isNaN(i))e.set(o,i);else throw new Error(`Can't parse ${a[1]} to integer`)}}l(t,"processBpeRanks")}l(Ya,"loadTikTokenBpe");function Qa(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}l(Qa,"escapeRegExp");var yr=class yr{constructor(e,t,r,s=8192){this.textEncoder=(0,Ja.makeTextEncoder)(),this.textDecoder=new Ka.TextDecoder("utf-8"),this.cache=new Xa.LRUCache(s);let a=typeof e=="string"?Ya(e):e;this.init(a,t,r)}init(e,t,r){this.encoder=new Ut.BinaryMap;for(let[s,a]of e)this.encoder.set(s,a);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(t.keys()).map(s=>Qa(s)).join("|")),this.specialTokensEncoder=t,this.decoder=new Map;for(let[s,a]of e)this.decoder.set(a,s);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[s,a]of t)this.specialTokensDecoder.set(a,s)}findNextSpecialToken(e,t,r){let s=t,a=null;if(r&&this.specialTokensRegex)for(;a=e.slice(s).match(this.specialTokensRegex),!(!a||r&&r.includes(a[0]));)s+=a.index+1;let o=a?s+a.index:e.length;return[a,o]}encode(e,t){let r=[],s=0;for(;;){let a,o;if([a,o]=this.findNextSpecialToken(e,s,t),o>s&&this.encodeByIndex(e,r,s,o),a){if(s=s+this.encodeSpecialToken(r,a),s>=e.length)break}else break}return r}encodeSpecialToken(e,t){var s;let r=(s=this.specialTokensEncoder)==null?void 0:s.get(t[0]);return e.push(r),t.index+t[0].length}encodeByIndex(e,t,r,s){let a,o=e.substring(r,s);for(this.regex.lastIndex=0;a=this.regex.exec(o);){let i=this.cache.get(a[0]);if(i)for(let u of i)t.push(u);else{let u=this.textEncoder.encode(a[0]),c=this.encoder.get(u,0,this.textEncoder.length);if(c!==void 0)t.push(c),this.cache.set(a[0],[c]);else{let d=(0,Ut.bytePairEncode)(u,this.encoder,this.textEncoder.length);for(let _ of d)t.push(_);this.cache.set(a[0],d)}}}}encodeTrimSuffixByIndex(e,t,r,s,a,o,i){let u,c=e.substring(r,s);for(this.regex.lastIndex=0;u=this.regex.exec(c);){let d=u[0],_=this.cache.get(d);if(_)if(o+_.length<=a)o+=_.length,i+=d.length,t.push(..._);else{let m=a-o;o+=m,i+=d.length,t.push(..._.slice(0,m));break}else{let m=this.textEncoder.encode(d),f=this.encoder.get(m,0,m.length);if(f!==void 0)if(this.cache.set(d,[f]),o+1<=a)o++,i+=d.length,t.push(f);else break;else{let p=(0,Ut.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,p),o+p.length<=a){o+=p.length,i+=d.length;for(let h of p)t.push(h)}else{let h=a-o;o+=h,i+=d.length;for(let g=0;g<h;g++)t.push(p[g]);break}}}if(o>=a)break}return{tokenCount:o,encodeLength:i}}encodeTrimSuffix(e,t,r){let s=[],a=0,o=0,i=0;for(;;){let c,d;if([c,d]=this.findNextSpecialToken(e,a,r),d>a){let{tokenCount:_,encodeLength:m}=this.encodeTrimSuffixByIndex(e,s,a,d,t,o,i);if(o=_,i=m,o>=t)break}if(c!==null){if(o++,o<=t&&(a=a+this.encodeSpecialToken(s,c),i+=c[0].length,a>=e.length)||o>=t)break}else break}let u=i===e.length?e:e.slice(0,i);return{tokenIds:s,text:u}}encodeTrimPrefix(e,t,r){let s=[],a=0,o=0,i=0,u=new Map;for(u.set(o,i);;){let m,f;if([m,f]=this.findNextSpecialToken(e,a,r),f>a){let p,h=e.substring(a,f);for(this.regex.lastIndex=0;p=this.regex.exec(h);){let g=p[0],b=this.cache.get(g);if(b)o+=b.length,i+=g.length,s.push(...b),u.set(o,i);else{let T=this.textEncoder.encode(g),E=this.encoder.get(T);if(E!==void 0)this.cache.set(g,[E]),o++,i+=g.length,s.push(E),u.set(o,i);else{let w=(0,Ut.bytePairEncode)(T,this.encoder,this.textEncoder.length);this.cache.set(g,w),o+=w.length,i+=g.length;for(let S of w)s.push(S);u.set(o,i)}}}}if(m!==null){if(a=a+this.encodeSpecialToken(s,m),o++,i+=m[0].length,u.set(o,i),a>=e.length)break}else break}if(o<=t)return{tokenIds:s,text:e};let c=o-t,d=0,_=0;for(let[m,f]of u)if(m>=c){d=m,_=f;break}if(d>t){let m=this.encode(e,r),f=m.slice(m.length-t);return{tokenIds:f,text:this.decode(f)}}return{tokenIds:s.slice(d),text:e.slice(_)}}decode(e){var r,s;let t=[];for(let a of e){let o=[],i=(r=this.decoder)==null?void 0:r.get(a);if(i!==void 0)o=Array.from(i);else{let u=(s=this.specialTokensDecoder)==null?void 0:s.get(a);if(u!==void 0){let c=this.textEncoder.encode(u);o=Array.from(c.subarray(0,this.textEncoder.length))}}t.push(...o)}return this.textDecoder.decode(new Uint8Array(t))}};l(yr,"TikTokenizer");var br=yr;Wt.TikTokenizer=br});var Pi=N(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.createTokenizer=O.createByEncoderName=O.createByModelName=O.getRegexByModel=O.getRegexByEncoder=O.getSpecialTokensByModel=O.getSpecialTokensByEncoder=O.MODEL_TO_ENCODING=void 0;var jt=require("fs"),vr=require("path"),el=wr(),tl=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);O.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var zt="<|endoftext|>",vi="<|fim_prefix|>",Ei="<|fim_middle|>",Si="<|fim_suffix|>",Ti="<|endofprompt|>",ft="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",xi="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",nl=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Mi=nl.join("|");function Er(n){let e="";if(O.MODEL_TO_ENCODING.has(n))e=O.MODEL_TO_ENCODING.get(n);else for(let[t,r]of tl)if(n.startsWith(t)){e=r;break}return e}l(Er,"getEncoderFromModelName");async function rl(n,e){let t=await fetch(n);if(!t.ok)throw new Error(`Failed to fetch file from ${n}. Status code: ${t.status}`);let r=await t.text();jt.writeFileSync(e,r)}l(rl,"fetchAndSaveFile");function Sr(n){let e=new Map([[zt,50256]]);switch(n){case"o200k_base":e=new Map([[zt,199999],[Ti,200018]]);break;case"cl100k_base":e=new Map([[zt,100257],[vi,100258],[Ei,100259],[Si,100260],[Ti,100276]]);break;case"p50k_edit":e=new Map([[zt,50256],[vi,50281],[Ei,50282],[Si,50283]]);break;default:break}return e}l(Sr,"getSpecialTokensByEncoder");O.getSpecialTokensByEncoder=Sr;function ol(n){let e=Er(n);return Sr(e)}l(ol,"getSpecialTokensByModel");O.getSpecialTokensByModel=ol;function Ii(n){switch(n){case"o200k_base":return Mi;case"cl100k_base":return xi;default:break}return ft}l(Ii,"getRegexByEncoder");O.getRegexByEncoder=Ii;function il(n){let e=Er(n);return Ii(e)}l(il,"getRegexByModel");O.getRegexByModel=il;async function sl(n,e=null){return ki(Er(n),e)}l(sl,"createByModelName");O.createByModelName=sl;async function ki(n,e=null){let t,r,s=Sr(n);switch(n){case"o200k_base":t=Mi,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":t=xi,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":t=ft,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":t=ft,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":t=ft,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":t=ft,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${n}]`)}e!==null&&(s=new Map([...s,...e]));let a=vr.basename(r),o=vr.resolve(__dirname,"..","model");jt.existsSync(o)||jt.mkdirSync(o,{recursive:!0});let i=vr.resolve(o,a);return jt.existsSync(i)||(console.log(`Downloading file from ${r}`),await rl(r,i),console.log(`Saved file to ${i}`)),Li(i,s,t)}l(ki,"createByEncoderName");O.createByEncoderName=ki;function Li(n,e,t,r=8192){return new el.TikTokenizer(n,e,t,r)}l(Li,"createTokenizer");O.createTokenizer=Li});var Ni=N(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.createTokenizer=R.createByEncoderName=R.createByModelName=R.getSpecialTokensByModel=R.getSpecialTokensByEncoder=R.getRegexByModel=R.getRegexByEncoder=R.MODEL_TO_ENCODING=R.TikTokenizer=void 0;var al=wr();Object.defineProperty(R,"TikTokenizer",{enumerable:!0,get:l(function(){return al.TikTokenizer},"get")});var we=Pi();Object.defineProperty(R,"MODEL_TO_ENCODING",{enumerable:!0,get:l(function(){return we.MODEL_TO_ENCODING},"get")});Object.defineProperty(R,"getRegexByEncoder",{enumerable:!0,get:l(function(){return we.getRegexByEncoder},"get")});Object.defineProperty(R,"getRegexByModel",{enumerable:!0,get:l(function(){return we.getRegexByModel},"get")});Object.defineProperty(R,"getSpecialTokensByEncoder",{enumerable:!0,get:l(function(){return we.getSpecialTokensByEncoder},"get")});Object.defineProperty(R,"getSpecialTokensByModel",{enumerable:!0,get:l(function(){return we.getSpecialTokensByModel},"get")});Object.defineProperty(R,"createByModelName",{enumerable:!0,get:l(function(){return we.createByModelName},"get")});Object.defineProperty(R,"createByEncoderName",{enumerable:!0,get:l(function(){return we.createByEncoderName},"get")});Object.defineProperty(R,"createTokenizer",{enumerable:!0,get:l(function(){return we.createTokenizer},"get")})});function J(n="cl100k_base"){let e=Ci.get(n);return e!==void 0||(n==="mock"?e=new Tr:e=new Ht(n),Ci.set(n,e)),e}function ll(n){if(!n.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=(0,Ai.readFileSync)(n,"utf-8"),t=new Map;for(let r of e.split(`
`)){if(!r)continue;let s=Buffer.from(r,"base64");t.set(s,t.size)}return t}var Ze,Ai,Fi,Vt,Ci,xr,Ht,Mr,Tr,Oi=I(()=>{"use strict";Rt();Ze=et(Ni()),Ai=require("fs"),Fi=require("path"),Vt=(r=>(r.cl100k="cl100k_base",r.o200k="o200k_base",r.mock="mock",r))(Vt||{}),Ci=new Map;l(J,"getTokenizer");l(ll,"parseTikTokenNoIndex");xr=class xr{constructor(e){try{this._tokenizer=(0,Ze.createTokenizer)(ll((0,Fi.join)(__dirname,`./resources/${e}.tiktoken.noindex`)),(0,Ze.getSpecialTokensByEncoder)(e),(0,Ze.getRegexByEncoder)(e),32768)}catch(t){throw t instanceof Error?new ye("Could not load tokenizer",t):t}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,t){if(t<=0)return{text:"",tokens:[]};let r=4,s=1,a=Math.min(e.length,t*r),o=e.slice(-a),i=this.tokenize(o);for(;i.length<t+2&&a<e.length;)a=Math.min(e.length,a+t*s),o=e.slice(-a),i=this.tokenize(o);return i.length<t?{text:e,tokens:i}:(i=i.slice(-t),{text:this.detokenize(i),tokens:i})}takeFirstTokens(e,t){if(t<=0)return{text:"",tokens:[]};let r=4,s=1,a=Math.min(e.length,t*r),o=e.slice(0,a),i=this.tokenize(o);for(;i.length<t+2&&a<e.length;)a=Math.min(e.length,a+t*s),o=e.slice(0,a),i=this.tokenize(o);return i.length<t?{text:e,tokens:i}:(i=i.slice(0,t),{text:this.detokenize(i),tokens:i})}takeLastLinesTokens(e,t){let{text:r}=this.takeLastTokens(e,t);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let s=r.indexOf(`
`);return r.substring(s+1)}};l(xr,"TTokenizer");Ht=xr,Mr=class Mr{constructor(){this.hash=l(e=>{let t=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);t=(t<<5)-t+s,t&=t&65535}return t},"hash")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(t=>t.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,t){let r=this.tokenizeStrings(e).slice(-t);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,t){let r=this.tokenizeStrings(e).slice(0,t);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,t){let{text:r}=this.takeLastTokens(e,t);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let s=r.indexOf(`
`);return r.substring(s+1)}};l(Mr,"MockTokenizer");Tr=Mr});var $e=I(()=>{"use strict";Oi()});var qt,Ge,Ir=I(()=>{"use strict";$e();qt=class qt{constructor(e,t,r=J().tokenLength(e+`
`),s="strict"){this.text=e;this._value=t;this._cost=r;if(e.includes(`
`)&&s!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(t<0&&s!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&s!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(s=="strict"&&t>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}recost(e=t=>J().tokenLength(t+`
`)){return this._cost=e(this.text),this}copy(){return new qt(this.text,this.value,this.cost,"none")}};l(qt,"LineWithValueAndCost");Ge=qt});function ul(n,e,t,r,s,a){var _,m,f,p,h,g,b,T,E,w,S,M,k;if(a.tokenLength(t+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");s==="removeLeastBangForBuck"&&n.forEach(y=>y.adjustValue(1/y.cost));let o=n.reduce((y,x)=>Math.max(y,x.value),0)+1,i=n.reduce((y,x)=>Math.max(y,x.text.length),0)+1,u=t.trim(),c=n.reduce((y,x)=>y+x.cost,0),d=n.length+1;for(;c>e&&d-->=-1;){let y=n.reduce((z,fe)=>fe.value<z.value?fe:z),x=n.indexOf(y),D=(_=n.slice(0,x+1).reverse().find(z=>z.text.trim()!==""))!=null?_:{text:""},Me=r?Math.min((f=(m=D.text.match(/^\s*/))==null?void 0:m[0].length)!=null?f:0,((p=n[x-1])==null?void 0:p.text.trim())===u?(b=(g=(h=n[x-1])==null?void 0:h.text.match(/^\s*/))==null?void 0:g[0].length)!=null?b:0:i,((T=n[x+1])==null?void 0:T.text.trim())===u?(S=(w=(E=n[x+1])==null?void 0:E.text.match(/^\s*/))==null?void 0:w[0].length)!=null?S:0:i):0,me=" ".repeat(Me)+t,Q=new Ge(me,o,a.tokenLength(me+`
`),"loose");n.splice(x,1,Q),((M=n[x+1])==null?void 0:M.text.trim())===u&&n.splice(x+1,1),((k=n[x-1])==null?void 0:k.text.trim())===u&&n.splice(x-1,1);let $=n.reduce((z,fe)=>z+fe.cost,0);$>=c&&n.every(z=>z.value===o)&&(r=!1),c=$}if(d<0)throw new Error("Infinite loop in ElidableText.makePrompt: Defensive counter < 0 in ElidableText.makePrompt with end text");return n.map(y=>y.text).join(`
`)}var Zt,_t,ir=I(()=>{"use strict";ar();Ir();$e();Zt=class Zt{constructor(e){this.lines=[];let t=[];for(let r of e){let s=Array.isArray(r)?r[1]:1,a=Array.isArray(r)?r[0]:r;typeof a=="string"?a.split(`
`).forEach(o=>t.push(new Ge(o,s))):a instanceof Zt?a.lines.forEach(o=>t.push(o.copy().adjustValue(s))):"source"in a&&"languageId"in a&&sr(a).lines.forEach(o=>t.push(o.copy().adjustValue(s)))}this.lines=t}adjust(e){this.lines.forEach(t=>t.adjustValue(e))}recost(e=t=>J().tokenLength(t+`
`)){this.lines.forEach(t=>t.recost(e))}makePrompt(e,t="[...]",r=!0,s="removeLeastDesirable",a=J()){let o=this.lines.map(i=>i.copy());return ul(o,e,t,r,s,a)}};l(Zt,"ElidableText");_t=Zt;l(ul,"makePrompt")});function X(){}function Ri(n,e,t,r,s){for(var a=[],o;e;)a.push(e),o=e.previousComponent,delete e.previousComponent,e=o;a.reverse();for(var i=0,u=a.length,c=0,d=0;i<u;i++){var _=a[i];if(_.removed)_.value=n.join(r.slice(d,d+_.count)),d+=_.count;else{if(!_.added&&s){var m=t.slice(c,c+_.count);m=m.map(function(f,p){var h=r[d+p];return h.length>f.length?h:f}),_.value=n.join(m)}else _.value=n.join(t.slice(c,c+_.count));c+=_.count,_.added||(d+=_.count)}}return a}function Di(n,e){var t;for(t=0;t<n.length&&t<e.length;t++)if(n[t]!=e[t])return n.slice(0,t);return n.slice(0,t)}function Bi(n,e){var t;if(!n||!e||n[n.length-1]!=e[e.length-1])return"";for(t=0;t<n.length&&t<e.length;t++)if(n[n.length-(t+1)]!=e[e.length-(t+1)])return n.slice(-t);return n.slice(-t)}function Lr(n,e,t){if(n.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+n.slice(e.length)}function Pr(n,e,t){if(!e)return n+t;if(n.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return n.slice(0,-e.length)+t}function pt(n,e){return Lr(n,e,"")}function $t(n,e){return Pr(n,e,"")}function Ui(n,e){return e.slice(0,cl(n,e))}function cl(n,e){var t=0;n.length>e.length&&(t=n.length-e.length);var r=e.length;n.length<e.length&&(r=n.length);var s=Array(r),a=0;s[0]=0;for(var o=1;o<r;o++){for(e[o]==e[a]?s[o]=s[a]:s[o]=a;a>0&&e[o]!=e[a];)a=s[a];e[o]==e[a]&&a++}a=0;for(var i=t;i<n.length;i++){for(;a>0&&n[i]!=e[a];)a=s[a];n[i]==e[a]&&a++}return a}function Wi(n,e,t,r){if(e&&t){var s=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],o=t.value.match(/^\s*/)[0],i=t.value.match(/\s*$/)[0];if(n){var u=Di(s,o);n.value=Pr(n.value,o,u),e.value=pt(e.value,u),t.value=pt(t.value,u)}if(r){var c=Bi(a,i);r.value=Lr(r.value,i,c),e.value=$t(e.value,c),t.value=$t(t.value,c)}}else if(t)n&&(t.value=t.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(n&&r){var d=r.value.match(/^\s*/)[0],_=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],f=Di(d,_);e.value=pt(e.value,f);var p=Bi(pt(d,f),m);e.value=$t(e.value,p),r.value=Lr(r.value,d,p),n.value=Pr(n.value,d,d.slice(0,d.length-p.length))}else if(r){var h=r.value.match(/^\s*/)[0],g=e.value.match(/\s*$/)[0],b=Ui(g,h);e.value=$t(e.value,b)}else if(n){var T=n.value.match(/\s*$/)[0],E=e.value.match(/^\s*/)[0],w=Ui(T,E);e.value=pt(e.value,w)}}function zi(n,e,t){return Jt.diff(n,e,t)}function ji(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Hi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ji(Object(t),!0).forEach(function(r){gl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pl(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hl(n){var e=pl(n,"string");return typeof e=="symbol"?e:e+""}function Nr(n){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(n)}function gl(n,e,t){return e=hl(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kr(n){return bl(n)||yl(n)||wl(n)||vl()}function bl(n){if(Array.isArray(n))return Cr(n)}function yl(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function wl(n,e){if(n){if(typeof n=="string")return Cr(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cr(n,e)}}function Cr(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function vl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(n,e,t,r,s){e=e||[],t=t||[],r&&(n=r(s,n));var a;for(a=0;a<e.length;a+=1)if(e[a]===n)return t[a];var o;if(Object.prototype.toString.call(n)==="[object Array]"){for(e.push(n),o=new Array(n.length),t.push(o),a=0;a<n.length;a+=1)o[a]=Ar(n[a],e,t,r,s);return e.pop(),t.pop(),o}if(n&&n.toJSON&&(n=n.toJSON()),Nr(n)==="object"&&n!==null){e.push(n),o={},t.push(o);var i=[],u;for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&i.push(u);for(i.sort(),a=0;a<i.length;a+=1)u=i[a],o[u]=Ar(n[u],e,t,r,u);e.pop(),t.pop()}else o=n;return o}function Vi(n,e,t,r,s,a,o){if(o||(o={}),typeof o=="function"&&(o={callback:o}),typeof o.context>"u"&&(o.context=4),o.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(o.callback){var i=o,u=i.callback;zi(t,r,Hi(Hi({},o),{},{callback:l(function(_){var m=c(_);u(m)},"callback")}))}else return c(zi(t,r,o));function c(d){if(!d)return;d.push({value:"",lines:[]});function _(y){return y.map(function(x){return" "+x})}l(_,"contextLines");for(var m=[],f=0,p=0,h=[],g=1,b=1,T=l(function(){var x=d[E],D=x.lines||El(x.value);if(x.lines=D,x.added||x.removed){var Me;if(!f){var me=d[E-1];f=g,p=b,me&&(h=o.context>0?_(me.lines.slice(-o.context)):[],f-=h.length,p-=h.length)}(Me=h).push.apply(Me,kr(D.map(function(Ye){return(x.added?"+":"-")+Ye}))),x.added?b+=D.length:g+=D.length}else{if(f)if(D.length<=o.context*2&&E<d.length-2){var Q;(Q=h).push.apply(Q,kr(_(D)))}else{var $,z=Math.min(D.length,o.context);($=h).push.apply($,kr(_(D.slice(0,z))));var fe={oldStart:f,oldLines:g-f+z,newStart:p,newLines:b-p+z,lines:h};m.push(fe),f=0,p=0,h=[]}g+=D.length,b+=D.length}},"_loop"),E=0;E<d.length;E++)T();for(var w=0,S=m;w<S.length;w++)for(var M=S[w],k=0;k<M.lines.length;k++)M.lines[k].endsWith(`
`)?M.lines[k]=M.lines[k].slice(0,-1):(M.lines.splice(k+1,0,"\\ No newline at end of file"),k++);return{oldFileName:n,newFileName:e,oldHeader:s,newHeader:a,hunks:m}}l(c,"diffLinesResultToPatch")}function El(n){var e=n.endsWith(`
`),t=n.split(`
`).map(function(r){return r+`
`});return e?t.pop():t.push(t.pop().slice(0,-1)),t}var vd,Gt,dl,Kt,_l,Jt,ml,fl,ht,Fr,qi=I(()=>{l(X,"Diff");X.prototype={diff:l(function(e,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.callback;typeof s=="function"&&(a=s,s={});var o=this;function i(w){return w=o.postProcess(w,s),a?(setTimeout(function(){a(w)},0),!0):w}l(i,"done"),e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s)),t=this.removeEmpty(this.tokenize(t,s));var u=t.length,c=e.length,d=1,_=u+c;s.maxEditLength!=null&&(_=Math.min(_,s.maxEditLength));var m=(r=s.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+m,p=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(p[0],t,e,0,s);if(p[0].oldPos+1>=c&&h+1>=u)return i(Ri(o,p[0].lastComponent,t,e,o.useLongestToken));var g=-1/0,b=1/0;function T(){for(var w=Math.max(g,-d);w<=Math.min(b,d);w+=2){var S=void 0,M=p[w-1],k=p[w+1];M&&(p[w-1]=void 0);var y=!1;if(k){var x=k.oldPos-w;y=k&&0<=x&&x<u}var D=M&&M.oldPos+1<c;if(!y&&!D){p[w]=void 0;continue}if(!D||y&&M.oldPos<k.oldPos?S=o.addToPath(k,!0,!1,0,s):S=o.addToPath(M,!1,!0,1,s),h=o.extractCommon(S,t,e,w,s),S.oldPos+1>=c&&h+1>=u)return i(Ri(o,S.lastComponent,t,e,o.useLongestToken));p[w]=S,S.oldPos+1>=c&&(b=Math.min(b,w-1)),h+1>=u&&(g=Math.max(g,w+1))}d++}if(l(T,"execEditLength"),a)l(function w(){setTimeout(function(){if(d>_||Date.now()>f)return a();T()||w()},0)},"exec")();else for(;d<=_&&Date.now()<=f;){var E=T();if(E)return E}},"diff"),addToPath:l(function(e,t,r,s,a){var o=e.lastComponent;return o&&!a.oneChangePerToken&&o.added===t&&o.removed===r?{oldPos:e.oldPos+s,lastComponent:{count:o.count+1,added:t,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:r,previousComponent:o}}},"addToPath"),extractCommon:l(function(e,t,r,s,a){for(var o=t.length,i=r.length,u=e.oldPos,c=u-s,d=0;c+1<o&&u+1<i&&this.equals(r[u+1],t[c+1],a);)c++,u++,d++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!a.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,c},"extractCommon"),equals:l(function(e,t,r){return r.comparator?r.comparator(e,t):e===t||r.ignoreCase&&e.toLowerCase()===t.toLowerCase()},"equals"),removeEmpty:l(function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},"removeEmpty"),castInput:l(function(e){return e},"castInput"),tokenize:l(function(e){return Array.from(e)},"tokenize"),join:l(function(e){return e.join("")},"join"),postProcess:l(function(e){return e},"postProcess")};l(Ri,"buildValues");vd=new X;l(Di,"longestCommonPrefix");l(Bi,"longestCommonSuffix");l(Lr,"replacePrefix");l(Pr,"replaceSuffix");l(pt,"removePrefix");l($t,"removeSuffix");l(Ui,"maximumOverlap");l(cl,"overlapCount");Gt="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",dl=new RegExp("[".concat(Gt,"]+|\\s+|[^").concat(Gt,"]"),"ug"),Kt=new X;Kt.equals=function(n,e,t){return t.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n.trim()===e.trim()};Kt.tokenize=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(n),function(a){return a.segment})}else t=n.match(dl)||[];var r=[],s=null;return t.forEach(function(a){/\s/.test(a)?s==null?r.push(a):r.push(r.pop()+a):/\s/.test(s)?r[r.length-1]==s?r.push(r.pop()+a):r.push(s+a):r.push(a),s=a}),r};Kt.join=function(n){return n.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};Kt.postProcess=function(n,e){if(!n||e.oneChangePerToken)return n;var t=null,r=null,s=null;return n.forEach(function(a){a.added?r=a:a.removed?s=a:((r||s)&&Wi(t,s,r,a),t=a,r=null,s=null)}),(r||s)&&Wi(t,s,r,null),n};l(Wi,"dedupeWhitespaceInChangeObjects");_l=new X;_l.tokenize=function(n){var e=new RegExp("(\\r?\\n)|[".concat(Gt,"]+|[^\\S\\n\\r]+|[^").concat(Gt,"]"),"ug");return n.match(e)||[]};Jt=new X;Jt.tokenize=function(n,e){e.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var t=[],r=n.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var s=0;s<r.length;s++){var a=r[s];s%2&&!e.newlineIsToken?t[t.length-1]+=a:t.push(a)}return t};Jt.equals=function(n,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),X.prototype.equals.call(this,n,e,t)};l(zi,"diffLines");ml=new X;ml.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};fl=new X;fl.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};l(ji,"ownKeys");l(Hi,"_objectSpread2");l(pl,"_toPrimitive");l(hl,"_toPropertyKey");l(Nr,"_typeof");l(gl,"_defineProperty");l(kr,"_toConsumableArray");l(bl,"_arrayWithoutHoles");l(yl,"_iterableToArray");l(wl,"_unsupportedIterableToArray");l(Cr,"_arrayLikeToArray");l(vl,"_nonIterableSpread");ht=new X;ht.useLongestToken=!0;ht.tokenize=Jt.tokenize;ht.castInput=function(n,e){var t=e.undefinedReplacement,r=e.stringifyReplacer,s=r===void 0?function(a,o){return typeof o>"u"?t:o}:r;return typeof n=="string"?n:JSON.stringify(Ar(n,null,null,s),s,"  ")};ht.equals=function(n,e,t){return X.prototype.equals.call(ht,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};l(Ar,"canonicalize");Fr=new X;Fr.tokenize=function(n){return n.slice()};Fr.join=Fr.removeEmpty=function(n){return n};l(Vi,"structuredPatch");l(El,"splitLines")});function Tl(n,e){let t=typeof n=="string"?typeof e=="string"?void 0:e.languageId:typeof e=="string"||n.languageId===e.languageId?n.languageId:void 0;n=typeof n=="string"?n:n.source,e=typeof e=="string"?e:e.source;let r=Vi("","",n,e),s=new Set,a=new Set;for(let u of r.hunks){for(let c=u.oldStart;c<u.oldStart+u.oldLines;c++)s.add(c);for(let c=u.newStart;c<u.newStart+u.newLines;c++)a.add(c)}let o=te(ne(be(n,t)),()=>!1),i=te(ne(be(e,t)),()=>!1);return A(o,u=>{(u.type==="line"||u.type==="blank")&&s.has(u.lineNumber)&&(u.label=!0)},"topDown"),A(i,u=>{(u.type==="line"||u.type==="blank")&&a.has(u.lineNumber)&&(u.label=!0)},"topDown"),[qe(o),qe(i)]}var Zi=I(()=>{"use strict";Ot();dt();qi();l(Tl,"elidableTextForDiff")});var $i=I(()=>{"use strict";ir();Zi();Ot();ar();Ir()});function Il({source:n}){return n.startsWith("#!")||n.startsWith("<!DOCTYPE")}function bt(n,e){let t=gt[e]?gt[e].lineComment:xl;if(t){let r=t.end==""?"":" "+t.end;return`${t.start} ${n}${r}`}return""}function ve(n,e){if(n==="")return"";let t=n.endsWith(`
`),s=(t?n.slice(0,-1):n).split(`
`).map(a=>bt(a,e)).join(`
`);return t?s+`
`:s}function Ji(n){let{languageId:e}=n;return Ml.indexOf(e)===-1&&!Il(n)?e in Ki?Ki[e]:bt(`Language: ${e}`,e):""}function Xi(n){return n.relativePath?bt(`Path: ${n.relativePath}`,n.languageId):""}function Y(n){return n===""||n.endsWith(`
`)?n:n+`
`}var gt,Gi,xl,Ml,Ki,ue=I(()=>{"use strict";gt={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Gi={};for(let[n,e]of Object.entries(gt))if(e.markdownLanguageIds)for(let t of e.markdownLanguageIds)Gi[t]=n;else Gi[n]=n;xl={start:"//",end:""},Ml=["php","plaintext"],Ki={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};l(Il,"hasLanguageMarker");l(bt,"comment");l(ve,"commentBlockAsSingles");l(Ji,"getLanguageMarker");l(Xi,"getPathMarker");l(Y,"newLineEnded")});function Ll(n){return{...kl,...n}}function Ce(n,e={}){let t=Ll(e),r=J(t.tokenizerName);if(t.maxLineCount!==void 0&&t.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(t.maxTokenLength!==void 0&&t.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(t.maxLineCount===0||t.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:t.tokenizerName};let s=n.source.slice(0,n.offset);return t.maxLineCount!==void 0&&(s=s.split(`
`).slice(-t.maxLineCount).join(`
`)),t.maxTokenLength!==void 0&&(s=r.takeLastLinesTokens(s,t.maxTokenLength)),{context:s,lineCount:s.split(`
`).length,tokenLength:r.tokenLength(s),tokenizerName:t.tokenizerName}}var kl,Xt=I(()=>{"use strict";$e();kl={tokenizerName:"cl100k_base"};l(Ll,"cursorContextOptions");l(Ce,"getCursorContext")});function Pl(n){return n.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}var Dr,Or,Br,Rr,Yi,Ur,Ke,Nl,Cl,Al,Yt=I(()=>{"use strict";de();Dr=class Dr{constructor(e){this.keys=[];this.cache={};this.size=e}put(e,t){var r;if(this.cache[e]=t,this.keys.length>this.size){this.keys.push(e);let s=(r=this.keys.shift())!=null?r:"";delete this.cache[s]}}get(e){return this.cache[e]}};l(Dr,"FifoCache");Or=Dr,Br=class Br{constructor(e){var t;this.stopsForLanguage=(t=Al.get(e.languageId))!=null?t:Cl}tokenize(e){return new Set(Pl(e).filter(t=>!this.stopsForLanguage.has(t)))}};l(Br,"Tokenizer");Rr=Br,Yi=new Or(20),Ur=class Ur{constructor(e){this.referenceDoc=e,this.tokenizer=new Rr(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){var e;return(e=this.referenceTokensCache)!=null?e:this.referenceTokensCache=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,t="descending"){return t=="ascending"?e.sort((r,s)=>r.score>s.score?1:-1):t=="descending"?e.sort((r,s)=>r.score>s.score?-1:1):e}async retrieveAllSnippets(e,t="descending"){var c;let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let s=e.source.split(`
`),a=this.id()+":"+e.source,o=(c=Yi.get(a))!=null?c:[],i=o.length==0,u=i?s.map(d=>this.tokenizer.tokenize(d),this.tokenizer):[];for(let[d,[_,m]]of this.getWindowsDelineations(s).entries()){if(i){let h=new Set;u.slice(_,m).forEach(g=>g.forEach(b=>h.add(b),h)),o.push(h)}let f=o[d],p=this.similarityScore(f,await this.referenceTokens);if(r.length&&_>0&&r[r.length-1].endLine>_){r[r.length-1].score<p&&(r[r.length-1].score=p,r[r.length-1].startLine=_,r[r.length-1].endLine=m);continue}r.push({score:p,startLine:_,endLine:m})}return i&&Yi.put(a,o),this.sortScoredSnippets(r,t)}findMatches(e,t){return this.findBestMatch(e,t)}async findBestMatch(e,t){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),s=await this.retrieveAllSnippets(e,"descending");if(s.length===0)return[];let a=[];for(let o=0;o<s.length&&o<t;o++)if(s[o].score!==0){let i=r.slice(s[o].startLine,s[o].endLine).join(`
`);a.push({snippet:i,semantics:"snippet",provider:"similar-files",...s[o]})}return a}};l(Ur,"WindowedMatcher");Ke=Ur;l(Pl,"splitIntoWords");Nl=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Cl=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Nl]),Al=new Map([])});function Qt(n,e){let t=[],r=e.length;if(r==0)return[];if(r<n)return[[0,r]];for(let s=0;s<r-n+1;s++)t.push([s,s+n]);return t}var Wr=I(()=>{"use strict";ze();Ve();l(Qt,"getBasicWindowDelineations")});function Fl(n,e){let t=new Set;return n.forEach(r=>{e.has(r)&&t.add(r)}),t.size/(n.size+e.size-t.size)}var yt,en,Qi=I(()=>{"use strict";Xt();Yt();Wr();yt=class yt extends Ke{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Qt(this.windowLength,e)}_getCursorContextInfo(e){return Ce(e,{maxLineCount:this.windowLength})}similarityScore(e,t){return Fl(e,t)}};l(yt,"FixedWindowSizeJaccardMatcher"),yt.FACTORY=l(e=>({to:l(t=>new yt(t,e),"to")}),"FACTORY");en=yt;l(Fl,"computeScore")});var es=N((exports,module)=>{var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;let _Parser=class _Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=l((o,i)=>{throw i},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(o){return Module.locateFile?Module.locateFile(o,scriptDirectory):scriptDirectory+o}l(locateFile,"locateFile");function logExceptionOnExit(o){o instanceof ExitStatus||err("exiting due to exception: "+o)}if(l(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=l((o,i)=>(o=isFileURI(o)?new URL(o):nodePath.normalize(o),fs.readFileSync(o,i?void 0:"utf8")),"read_"),readBinary=l(o=>{var i=read_(o,!0);return i.buffer||(i=new Uint8Array(i)),i},"readBinary"),readAsync=l((o,i,u)=>{o=isFileURI(o)?new URL(o):nodePath.normalize(o),fs.readFile(o,function(c,d){c?u(c):i(d.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=l((o,i)=>{if(keepRuntimeAlive())throw process.exitCode=o,i;logExceptionOnExit(i),process.exit(o)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=l(o=>{var i=new XMLHttpRequest;return i.open("GET",o,!1),i.send(null),i.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=l(o=>{var i=new XMLHttpRequest;return i.open("GET",o,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)},"readBinary")),readAsync=l((o,i,u)=>{var c=new XMLHttpRequest;c.open("GET",o,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?i(c.response):u()},c.onerror=u,c.send(null)},"readAsync"),setWindowTitle=l(o=>document.title=o,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(o,i,u){for(var c=i+u,d=i;o[d]&&!(d>=c);)++d;if(d-i>16&&o.buffer&&UTF8Decoder)return UTF8Decoder.decode(o.subarray(i,d));for(var _="";i<d;){var m=o[i++];if(128&m){var f=63&o[i++];if((224&m)!=192){var p=63&o[i++];if((m=(240&m)==224?(15&m)<<12|f<<6|p:(7&m)<<18|f<<12|p<<6|63&o[i++])<65536)_+=String.fromCharCode(m);else{var h=m-65536;_+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else _+=String.fromCharCode((31&m)<<6|f)}else _+=String.fromCharCode(m)}return _}l(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(o,i){return o?UTF8ArrayToString(HEAPU8,o,i):""}l(UTF8ToString,"UTF8ToString");function stringToUTF8Array(o,i,u,c){if(!(c>0))return 0;for(var d=u,_=u+c-1,m=0;m<o.length;++m){var f=o.charCodeAt(m);if(f>=55296&&f<=57343&&(f=65536+((1023&f)<<10)|1023&o.charCodeAt(++m)),f<=127){if(u>=_)break;i[u++]=f}else if(f<=2047){if(u+1>=_)break;i[u++]=192|f>>6,i[u++]=128|63&f}else if(f<=65535){if(u+2>=_)break;i[u++]=224|f>>12,i[u++]=128|f>>6&63,i[u++]=128|63&f}else{if(u+3>=_)break;i[u++]=240|f>>18,i[u++]=128|f>>12&63,i[u++]=128|f>>6&63,i[u++]=128|63&f}}return i[u]=0,u-d}l(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(o,i,u){return stringToUTF8Array(o,HEAPU8,i,u)}l(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(o){for(var i=0,u=0;u<o.length;++u){var c=o.charCodeAt(u);c<=127?i++:c<=2047?i+=2:c>=55296&&c<=57343?(i+=4,++u):i+=3}return i}l(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(o){buffer=o,Module.HEAP8=HEAP8=new Int8Array(o),Module.HEAP16=HEAP16=new Int16Array(o),Module.HEAP32=HEAP32=new Int32Array(o),Module.HEAPU8=HEAPU8=new Uint8Array(o),Module.HEAPU16=HEAPU16=new Uint16Array(o),Module.HEAPU32=HEAPU32=new Uint32Array(o),Module.HEAPF32=HEAPF32=new Float32Array(o),Module.HEAPF64=HEAPF64=new Float64Array(o)}l(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}l(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}l(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}l(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}l(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}l(postRun,"postRun");function addOnPreRun(o){__ATPRERUN__.unshift(o)}l(addOnPreRun,"addOnPreRun");function addOnInit(o){__ATINIT__.unshift(o)}l(addOnInit,"addOnInit");function addOnPostRun(o){__ATPOSTRUN__.unshift(o)}l(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(o){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}l(addRunDependency,"addRunDependency");function removeRunDependency(o){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var i=dependenciesFulfilled;dependenciesFulfilled=null,i()}}l(removeRunDependency,"removeRunDependency");function abort(o){throw Module.onAbort&&Module.onAbort(o),err(o="Aborted("+o+")"),ABORT=!0,EXITSTATUS=1,o+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(o)}l(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(o){return o.startsWith(dataURIPrefix)}l(isDataURI,"isDataURI");function isFileURI(o){return o.startsWith("file://")}l(isFileURI,"isFileURI");function getBinary(o){try{if(o==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(o);throw"both async and sync fetching of the wasm failed"}catch(i){abort(i)}}l(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(o){if(!o.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return o.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(o,i){readAsync(wasmBinaryFile,function(u){o(new Uint8Array(u))},i)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}l(getBinaryPromise,"getBinaryPromise");function createWasm(){var o={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function i(d,_){var m=d.exports;m=relocateExports(m,1024);var f=getDylinkMetadata(_);f.neededDynlibs&&(dynamicLibraries=f.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(m,"main"),Module.asm=m,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}l(i,"t");function u(d){i(d.instance,d.module)}l(u,"r");function c(d){return getBinaryPromise().then(function(_){return WebAssembly.instantiate(_,o)}).then(function(_){return _}).then(d,function(_){err("failed to asynchronously prepare wasm: "+_),abort(_)})}if(l(c,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(o,i)}catch(d){return err("Module.instantiateWasm callback failed with error: "+d),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?c(u):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(d){return WebAssembly.instantiateStreaming(d,o).then(u,function(_){return err("wasm streaming compile failed: "+_),err("falling back to ArrayBuffer instantiation"),c(u)})}),{}}l(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(o){this.name="ExitStatus",this.message="Program terminated with exit("+o+")",this.status=o}l(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:l(function(o,i){var u=GOT[i];return u||(u=GOT[i]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(i)||(u.required=!0),u},"get")};function callRuntimeCallbacks(o){for(;o.length>0;)o.shift()(Module)}l(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(o){var i=0,u=0;function c(){for(var k=0,y=1;;){var x=o[i++];if(k+=(127&x)*y,y*=128,!(128&x))break}return k}l(c,"_");function d(){var k=c();return UTF8ArrayToString(o,(i+=k)-k,k)}l(d,"n");function _(k,y){if(k)throw new Error(y)}l(_,"s");var m="dylink.0";if(o instanceof WebAssembly.Module){var f=WebAssembly.Module.customSections(o,m);f.length===0&&(m="dylink",f=WebAssembly.Module.customSections(o,m)),_(f.length===0,"need dylink section"),u=(o=new Uint8Array(f[0])).length}else{_(new Uint32Array(new Uint8Array(o.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),_(o[8]!==0,"need the dylink section to be first"),i=9;var p=c();u=i+p,m=d()}var h={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(m=="dylink"){h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();for(var g=c(),b=0;b<g;++b){var T=d();h.neededDynlibs.push(T)}}else for(_(m!=="dylink.0");i<u;){var E=o[i++],w=c();if(E===1)h.memorySize=c(),h.memoryAlign=c(),h.tableSize=c(),h.tableAlign=c();else if(E===2)for(g=c(),b=0;b<g;++b)T=d(),h.neededDynlibs.push(T);else if(E===3)for(var S=c();S--;){var M=d();256&c()&&h.tlsExports.add(M)}else if(E===4)for(S=c();S--;)d(),M=d(),(3&c())==1&&h.weakImports.add(M);else i+=w}return h}l(getDylinkMetadata,"getDylinkMetadata");function getValue(o,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":case"i8":return HEAP8[o>>0];case"i16":return HEAP16[o>>1];case"i32":case"i64":return HEAP32[o>>2];case"float":return HEAPF32[o>>2];case"double":return HEAPF64[o>>3];case"*":return HEAPU32[o>>2];default:abort("invalid type for getValue: "+i)}return null}l(getValue,"getValue");function asmjsMangle(o){return o.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(o)?o:"_"+o}l(asmjsMangle,"asmjsMangle");function mergeLibSymbols(o,i){for(var u in o)if(o.hasOwnProperty(u)){asmLibraryArg.hasOwnProperty(u)||(asmLibraryArg[u]=o[u]);var c=asmjsMangle(u);Module.hasOwnProperty(c)||(Module[c]=o[u]),u=="__main_argc_argv"&&(Module._main=o[u])}}l(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(o,i,u){var c=Module["dynCall_"+o];return u&&u.length?c.apply(null,[i].concat(u)):c.call(null,i)}l(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(o){var i=wasmTableMirror[o];return i||(o>=wasmTableMirror.length&&(wasmTableMirror.length=o+1),wasmTableMirror[o]=i=wasmTable.get(o)),i}l(getWasmTableEntry,"getWasmTableEntry");function dynCall(o,i,u){return o.includes("j")?dynCallLegacy(o,i,u):getWasmTableEntry(i).apply(null,u)}l(dynCall,"dynCall");function createInvokeFunction(o){return function(){var i=stackSave();try{return dynCall(o,arguments[0],Array.prototype.slice.call(arguments,1))}catch(u){if(stackRestore(i),u!==u+0)throw u;_setThrew(1,0)}}}l(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(o,i){return HEAPU8.fill(0,o,o+i),o}l(zeroMemory,"zeroMemory");function getMemory(o){if(runtimeInitialized)return zeroMemory(_malloc(o),o);var i=___heap_base,u=i+o+15&-16;return ___heap_base=u,GOT.__heap_base.value=u,i}l(getMemory,"getMemory");function isInternalSym(o){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(o)}l(isInternalSym,"isInternalSym");function uleb128Encode(o,i){o<128?i.push(o):i.push(o%128|128,o>>7)}l(uleb128Encode,"uleb128Encode");function sigToWasmTypes(o){for(var i={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},u={parameters:[],results:o[0]=="v"?[]:[i[o[0]]]},c=1;c<o.length;++c)u.parameters.push(i[o[c]]),o[c]==="j"&&u.parameters.push("i32");return u}l(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(o,i){var u=o.slice(0,1),c=o.slice(1),d={i:127,p:127,j:126,f:125,d:124};i.push(96),uleb128Encode(c.length,i);for(var _=0;_<c.length;++_)i.push(d[c[_]]);u=="v"?i.push(0):i.push(1,d[u])}l(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(o,i){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(i),o);var u=[1];generateFuncType(i,u);var c=[0,97,115,109,1,0,0,0,1];uleb128Encode(u.length,c),c.push.apply(c,u),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var d=new WebAssembly.Module(new Uint8Array(c));return new WebAssembly.Instance(d,{e:{f:o}}).exports.f}l(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(o,i){if(functionsInTableMap)for(var u=o;u<o+i;u++){var c=getWasmTableEntry(u);c&&functionsInTableMap.set(c,u)}}l(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(o){throw o instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":o}return wasmTable.length-1}l(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(o,i){wasmTable.set(o,i),wasmTableMirror[o]=wasmTable.get(o)}l(setWasmTableEntry,"setWasmTableEntry");function addFunction(o,i){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(o))return functionsInTableMap.get(o);var u=getEmptyTableSlot();try{setWasmTableEntry(u,o)}catch(c){if(!(c instanceof TypeError))throw c;setWasmTableEntry(u,convertJsFunctionToWasm(o,i))}return functionsInTableMap.set(o,u),u}l(addFunction,"addFunction");function updateGOT(o,i){for(var u in o)if(!isInternalSym(u)){var c=o[u];u.startsWith("orig$")&&(u=u.split("$")[1],i=!0),GOT[u]||(GOT[u]=new WebAssembly.Global({value:"i32",mutable:!0})),(i||GOT[u].value==0)&&(typeof c=="function"?GOT[u].value=addFunction(c):typeof c=="number"?GOT[u].value=c:err("unhandled export type for `"+u+"`: "+typeof c))}}l(updateGOT,"updateGOT");function relocateExports(o,i,u){var c={};for(var d in o){var _=o[d];typeof _=="object"&&(_=_.value),typeof _=="number"&&(_+=i),c[d]=_}return updateGOT(c,u),c}l(relocateExports,"relocateExports");function resolveGlobalSymbol(o,i){var u;return i&&(u=asmLibraryArg["orig$"+o]),u||(u=asmLibraryArg[o])&&u.stub&&(u=void 0),u||(u=Module[asmjsMangle(o)]),!u&&o.startsWith("invoke_")&&(u=createInvokeFunction(o.split("_")[1])),u}l(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(o,i){return Math.ceil(o/i)*i}l(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(o){var i=resolveGlobalSymbol(o,!1);return i||(i=moduleExports[o]),i}l(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:l(function(o,i){switch(i){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(i in asmLibraryArg)return asmLibraryArg[i];var u;return i in o||(o[i]=function(){return u||(u=resolveSymbol(i)),u.apply(null,arguments)}),o[i]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(l(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(l(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(o){return postInstantiation(o.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return l(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(o,i){return o.then(function(){return loadDynamicLibrary(i,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(o){loadDynamicLibrary(o,flags)}),loadModule())}l(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(o,i,u){i=i||{global:!0,nodelete:!0};var c=LDSO.loadedLibsByName[o];if(c)return i.global&&!c.global&&(c.global=!0,c.module!=="loading"&&mergeLibSymbols(c.module,o)),i.nodelete&&c.refcount!==1/0&&(c.refcount=1/0),c.refcount++,u&&(LDSO.loadedLibsByHandle[u]=c),!i.loadAsync||Promise.resolve(!0);function d(f){if(i.fs&&i.fs.findObject(f)){var p=i.fs.readFile(f,{encoding:"binary"});return p instanceof Uint8Array||(p=new Uint8Array(p)),i.loadAsync?Promise.resolve(p):p}if(f=locateFile(f),i.loadAsync)return new Promise(function(h,g){readAsync(f,b=>h(new Uint8Array(b)),g)});if(!readBinary)throw new Error(f+": file not found, and synchronous loading of external files is not available");return readBinary(f)}l(d,"n");function _(){if(typeof preloadedWasm<"u"&&preloadedWasm[o]){var f=preloadedWasm[o];return i.loadAsync?Promise.resolve(f):f}return i.loadAsync?d(o).then(function(p){return loadWebAssemblyModule(p,i,u)}):loadWebAssemblyModule(d(o),i,u)}l(_,"s");function m(f){c.global&&mergeLibSymbols(f,o),c.module=f}return l(m,"a"),c={refcount:i.nodelete?1/0:1,name:o,module:"loading",global:i.global},LDSO.loadedLibsByName[o]=c,u&&(LDSO.loadedLibsByHandle[u]=c),i.loadAsync?_().then(function(f){return m(f),!0}):(m(_()),!0)}l(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var o in GOT)if(GOT[o].value==0){var i=resolveGlobalSymbol(o,!0);if(!i&&!GOT[o].required)continue;if(typeof i=="function")GOT[o].value=addFunction(i,i.sig);else{if(typeof i!="number")throw new Error("bad export type for `"+o+"`: "+typeof i);GOT[o].value=i}}}l(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(o,i){return o.then(function(){return loadDynamicLibrary(i,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}l(preloadDylibs,"preloadDylibs");function setValue(o,i,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":case"i8":HEAP8[o>>0]=i;break;case"i16":HEAP16[o>>1]=i;break;case"i32":HEAP32[o>>2]=i;break;case"i64":tempI64=[i>>>0,(tempDouble=i,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1];break;case"float":HEAPF32[o>>2]=i;break;case"double":HEAPF64[o>>3]=i;break;case"*":HEAPU32[o>>2]=i;break;default:abort("invalid type for setValue: "+u)}}l(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}l(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}l(_abort,"_abort");function _emscripten_date_now(){return Date.now()}l(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(o,i,u){HEAPU8.copyWithin(o,i,i+u)}l(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}l(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(o){try{return wasmMemory.grow(o-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}l(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(o){var i=HEAPU8.length;o>>>=0;var u=getHeapMax();if(o>u)return!1;for(var c=1;c<=4;c*=2){var d=i*(1+.2/c);if(d=Math.min(d,o+100663296),emscripten_realloc_buffer(Math.min(u,(_=Math.max(o,d))+((m=65536)-_%m)%m)))return!0}var _,m;return!1}l(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var o=process.hrtime();return 1e3*o[0]+o[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:l(function(o,i,u){if(PATH.isAbs(i))return i;var c;if(o===-100?c=FS.cwd():c=SYSCALLS.getStreamFromFD(o).path,i.length==0){if(!u)throw new FS.ErrnoError(44);return c}return PATH.join2(c,i)},"calculateAt"),doStat:l(function(o,i,u){try{var c=o(i)}catch(f){if(f&&f.node&&PATH.normalize(i)!==PATH.normalize(FS.getPath(f.node)))return-54;throw f}HEAP32[u>>2]=c.dev,HEAP32[u+8>>2]=c.ino,HEAP32[u+12>>2]=c.mode,HEAPU32[u+16>>2]=c.nlink,HEAP32[u+20>>2]=c.uid,HEAP32[u+24>>2]=c.gid,HEAP32[u+28>>2]=c.rdev,tempI64=[c.size>>>0,(tempDouble=c.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[u+40>>2]=tempI64[0],HEAP32[u+44>>2]=tempI64[1],HEAP32[u+48>>2]=4096,HEAP32[u+52>>2]=c.blocks;var d=c.atime.getTime(),_=c.mtime.getTime(),m=c.ctime.getTime();return tempI64=[Math.floor(d/1e3)>>>0,(tempDouble=Math.floor(d/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[u+56>>2]=tempI64[0],HEAP32[u+60>>2]=tempI64[1],HEAPU32[u+64>>2]=d%1e3*1e3,tempI64=[Math.floor(_/1e3)>>>0,(tempDouble=Math.floor(_/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[u+72>>2]=tempI64[0],HEAP32[u+76>>2]=tempI64[1],HEAPU32[u+80>>2]=_%1e3*1e3,tempI64=[Math.floor(m/1e3)>>>0,(tempDouble=Math.floor(m/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[u+88>>2]=tempI64[0],HEAP32[u+92>>2]=tempI64[1],HEAPU32[u+96>>2]=m%1e3*1e3,tempI64=[c.ino>>>0,(tempDouble=c.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[u+104>>2]=tempI64[0],HEAP32[u+108>>2]=tempI64[1],0},"doStat"),doMsync:l(function(o,i,u,c,d){if(!FS.isFile(i.node.mode))throw new FS.ErrnoError(43);if(2&c)return 0;var _=HEAPU8.slice(o,o+u);FS.msync(i,_,d,u,c)},"doMsync"),varargs:void 0,get:l(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:l(function(o){return UTF8ToString(o)},"getStr"),getStreamFromFD:l(function(o){var i=FS.getStream(o);if(!i)throw new FS.ErrnoError(8);return i},"getStreamFromFD")};function _proc_exit(o){EXITSTATUS=o,keepRuntimeAlive()||(Module.onExit&&Module.onExit(o),ABORT=!0),quit_(o,new ExitStatus(o))}l(_proc_exit,"_proc_exit");function exitJS(o,i){EXITSTATUS=o,_proc_exit(o)}l(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(o){try{var i=SYSCALLS.getStreamFromFD(o);return FS.close(i),0}catch(u){if(typeof FS>"u"||!(u instanceof FS.ErrnoError))throw u;return u.errno}}l(_fd_close,"_fd_close");function convertI32PairToI53Checked(o,i){return i+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*i:NaN}l(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(o,i,u,c,d){try{var _=convertI32PairToI53Checked(i,u);if(isNaN(_))return 61;var m=SYSCALLS.getStreamFromFD(o);return FS.llseek(m,_,c),tempI64=[m.position>>>0,(tempDouble=m.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[d>>2]=tempI64[0],HEAP32[d+4>>2]=tempI64[1],m.getdents&&_===0&&c===0&&(m.getdents=null),0}catch(f){if(typeof FS>"u"||!(f instanceof FS.ErrnoError))throw f;return f.errno}}l(_fd_seek,"_fd_seek");function doWritev(o,i,u,c){for(var d=0,_=0;_<u;_++){var m=HEAPU32[i>>2],f=HEAPU32[i+4>>2];i+=8;var p=FS.write(o,HEAP8,m,f,c);if(p<0)return-1;d+=p,c!==void 0&&(c+=p)}return d}l(doWritev,"doWritev");function _fd_write(o,i,u,c){try{var d=doWritev(SYSCALLS.getStreamFromFD(o),i,u);return HEAPU32[c>>2]=d,0}catch(_){if(typeof FS>"u"||!(_ instanceof FS.ErrnoError))throw _;return _.errno}}l(_fd_write,"_fd_write");function _tree_sitter_log_callback(o,i){if(currentLogCallback){let u=UTF8ToString(i);currentLogCallback(u,o!==0)}}l(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(o,i,u,c,d){var _=currentParseCallback(i,{row:u,column:c});typeof _=="string"?(setValue(d,_.length,"i32"),stringToUTF16(_,o,10240)):setValue(d,0,"i32")}l(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(o){if(o instanceof ExitStatus||o=="unwind")return EXITSTATUS;quit_(1,o)}l(handleException,"handleException");function allocateUTF8OnStack(o){var i=lengthBytesUTF8(o)+1,u=stackAlloc(i);return stringToUTF8Array(o,HEAP8,u,i),u}l(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(o,i,u){if(u===void 0&&(u=2147483647),u<2)return 0;for(var c=i,d=(u-=2)<2*o.length?u/2:o.length,_=0;_<d;++_){var m=o.charCodeAt(_);HEAP16[i>>1]=m,i+=2}return HEAP16[i>>1]=0,i-c}l(stringToUTF16,"stringToUTF16");function AsciiToString(o){for(var i="";;){var u=HEAPU8[o++>>0];if(!u)return i;i+=String.fromCharCode(u)}}l(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(o){var i=Module._main;if(i){(o=o||[]).unshift(thisProgram);var u=o.length,c=stackAlloc(4*(u+1)),d=c>>2;o.forEach(m=>{HEAP32[d++]=allocateUTF8OnStack(m)}),HEAP32[d]=0;try{var _=i(u,c);return exitJS(_,!0),_}catch(m){return handleException(m)}}}l(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=l(function o(){calledRun||run(),calledRun||(dependenciesFulfilled=o)},"e");var dylibsLoaded=!1;function run(o){function i(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(o),postRun()))}l(i,"t"),o=o||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),i()},1)):i()))}if(l(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;let n=class n{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(i){let u;if(i){if(i.constructor!==Language)throw new Error("Argument must be a Language");{u=i[0];let c=C._ts_language_version(u);if(c<MIN_COMPATIBLE_VERSION||VERSION<c)throw new Error(`Incompatible language version ${c}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else u=0,i=null;return this.language=i,C._ts_parser_set_language(this[0],u),this}getLanguage(){return this.language}parse(i,u,c){if(typeof i=="string")currentParseCallback=l((p,h,g)=>i.slice(p,g),"currentParseCallback");else{if(typeof i!="function")throw new Error("Argument must be a string or a function");currentParseCallback=i}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let d=0,_=0;if(c&&c.includedRanges){d=c.includedRanges.length,_=C._calloc(d,SIZE_OF_RANGE);let p=_;for(let h=0;h<d;h++)marshalRange(p,c.includedRanges[h]),p+=SIZE_OF_RANGE}let m=C._ts_parser_parse_wasm(this[0],this[1],u?u[0]:0,_,d);if(!m)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let f=new Tree(INTERNAL,m,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,f}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(i){C._ts_parser_set_timeout_micros(this[0],i)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(i){if(i){if(typeof i!="function")throw new Error("Logger callback must be a function")}else i=null;return this.logCallback=i,this}getLogger(){return this.logCallback}};l(n,"ParserImpl");let ParserImpl=n,e=class e{constructor(i,u,c,d){assertInternal(i),this[0]=u,this.language=c,this.textCallback=d}copy(){let i=C._ts_tree_copy(this[0]);return new e(INTERNAL,i,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(i){marshalEdit(i),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(i){if(i.constructor!==e)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],i[0]);let u=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=new Array(u);if(u>0){let _=c;for(let m=0;m<u;m++)d[m]=unmarshalRange(_),_+=SIZE_OF_RANGE;C._free(c)}return d}};l(e,"Tree");let Tree=e,t=class t{constructor(i,u){assertInternal(i),this.tree=u}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(i){return this.id===i.id}child(i){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],i),unmarshalNode(this.tree)}namedChild(i){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],i),unmarshalNode(this.tree)}childForFieldId(i){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],i),unmarshalNode(this.tree)}childForFieldName(i){let u=this.tree.language.fields.indexOf(i);if(u!==-1)return this.childForFieldId(u)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let i=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(i),i>0){let c=u;for(let d=0;d<i;d++)this._children[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(u)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let i=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(i),i>0){let c=u;for(let d=0;d<i;d++)this._namedChildren[d]=unmarshalNode(this.tree,c),c+=SIZE_OF_NODE;C._free(u)}}return this._namedChildren}descendantsOfType(i,u,c){Array.isArray(i)||(i=[i]),u||(u=ZERO_POINT),c||(c=ZERO_POINT);let d=[],_=this.tree.language.types;for(let g=0,b=_.length;g<b;g++)i.includes(_[g])&&d.push(g);let m=C._malloc(SIZE_OF_INT*d.length);for(let g=0,b=d.length;g<b;g++)setValue(m+g*SIZE_OF_INT,d[g],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],m,d.length,u.row,u.column,c.row,c.column);let f=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),h=new Array(f);if(f>0){let g=p;for(let b=0;b<f;b++)h[b]=unmarshalNode(this.tree,g),g+=SIZE_OF_NODE}return C._free(p),C._free(m),h}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(i,u=i){if(typeof i!="number"||typeof u!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,i,"i32"),setValue(c+SIZE_OF_INT,u,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(i,u=i){if(typeof i!="number"||typeof u!="number")throw new Error("Arguments must be numbers");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(c,i,"i32"),setValue(c+SIZE_OF_INT,u,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(i,u=i){if(!isPoint(i)||!isPoint(u))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,i),marshalPoint(c+SIZE_OF_POINT,u),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(i,u=i){if(!isPoint(i)||!isPoint(u))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let c=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(c,i),marshalPoint(c+SIZE_OF_POINT,u),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let i=C._ts_node_to_string_wasm(this.tree[0]),u=AsciiToString(i);return C._free(i),u}};l(t,"Node");let Node=t,r=class r{constructor(i,u){assertInternal(i),this.tree=u,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(i){marshalNode(i),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let i=C._ts_tree_cursor_start_index_wasm(this.tree[0]),u=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,i,u)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}gotoNextSibling(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}gotoParent(){marshalTreeCursor(this);let i=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),i===1}};l(r,"TreeCursor");let TreeCursor=r,s=class s{constructor(i,u){assertInternal(i),this[0]=u,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let c=0,d=this.types.length;c<d;c++)C._ts_language_symbol_type(this[0],c)<2&&(this.types[c]=UTF8ToString(C._ts_language_symbol_name(this[0],c)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let c=0,d=this.fields.length;c<d;c++){let _=C._ts_language_field_name_for_id(this[0],c);this.fields[c]=_!==0?UTF8ToString(_):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(i){let u=this.fields.indexOf(i);return u!==-1?u:null}fieldNameForId(i){return this.fields[i]||null}idForNodeType(i,u){let c=lengthBytesUTF8(i),d=C._malloc(c+1);stringToUTF8(i,d,c+1);let _=C._ts_language_symbol_for_name(this[0],d,c,u);return C._free(d),_||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(i){let u=C._ts_language_symbol_name(this[0],i);return u?UTF8ToString(u):null}nodeTypeIsNamed(i){return!!C._ts_language_type_is_named_wasm(this[0],i)}nodeTypeIsVisible(i){return!!C._ts_language_type_is_visible_wasm(this[0],i)}query(i){let u=lengthBytesUTF8(i),c=C._malloc(u+1);stringToUTF8(i,c,u+1);let d=C._ts_query_new(this[0],c,u,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!d){let S=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),M=UTF8ToString(c,getValue(TRANSFER_BUFFER,"i32")).length,k=i.substr(M,100).split(`
`)[0],y,x=k.match(QUERY_WORD_REGEX)[0];switch(S){case 2:y=new RangeError(`Bad node name '${x}'`);break;case 3:y=new RangeError(`Bad field name '${x}'`);break;case 4:y=new RangeError(`Bad capture name @${x}`);break;case 5:y=new TypeError(`Bad pattern structure at offset ${M}: '${k}'...`),x="";break;default:y=new SyntaxError(`Bad syntax at offset ${M}: '${k}'...`),x=""}throw y.index=M,y.length=x.length,C._free(c),y}let _=C._ts_query_string_count(d),m=C._ts_query_capture_count(d),f=C._ts_query_pattern_count(d),p=new Array(m),h=new Array(_);for(let S=0;S<m;S++){let M=C._ts_query_capture_name_for_id(d,S,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");p[S]=UTF8ToString(M,k)}for(let S=0;S<_;S++){let M=C._ts_query_string_value_for_id(d,S,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");h[S]=UTF8ToString(M,k)}let g=new Array(f),b=new Array(f),T=new Array(f),E=new Array(f),w=new Array(f);for(let S=0;S<f;S++){let M=C._ts_query_predicates_for_pattern(d,S,TRANSFER_BUFFER),k=getValue(TRANSFER_BUFFER,"i32");E[S]=[],w[S]=[];let y=[],x=M;for(let D=0;D<k;D++){let Me=getValue(x,"i32");x+=SIZE_OF_INT;let me=getValue(x,"i32");if(x+=SIZE_OF_INT,Me===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:p[me]});else if(Me===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:h[me]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let Q=y[0].value,$=!0;switch(Q){case"not-eq?":$=!1;case"eq?":if(y.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(y.length-1));if(y[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${y[1].value}"`);if(y[2].type==="capture"){let ae=y[1].name,Fe=y[2].name;w[S].push(function(Nn){let Oe,Cn;for(let Tt of Nn)Tt.name===ae&&(Oe=Tt.node),Tt.name===Fe&&(Cn=Tt.node);return Oe===void 0||Cn===void 0||Oe.text===Cn.text===$})}else{let ae=y[1].name,Fe=y[2].value;w[S].push(function(Nn){for(let Oe of Nn)if(Oe.name===ae)return Oe.node.text===Fe===$;return!0})}break;case"not-match?":$=!1;case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${y[2].value}.`);let z=y[1].name,fe=new RegExp(y[2].value);w[S].push(function(ae){for(let Fe of ae)if(Fe.name===z)return fe.test(Fe.node.text)===$;return!0});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ae=>ae.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');g[S]||(g[S]={}),g[S][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${Q}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(ae=>ae.type!=="string"))throw new Error(`Arguments to \`#${Q}\` predicate must be a strings.".`);let Ye=Q==="is?"?b:T;Ye[S]||(Ye[S]={}),Ye[S][y[1].value]=y[2]?y[2].value:null;break;default:E[S].push({operator:Q,operands:y.slice(1)})}y.length=0}}Object.freeze(g[S]),Object.freeze(b[S]),Object.freeze(T[S])}return C._free(c),new Query(INTERNAL,d,p,w,E,Object.freeze(g),Object.freeze(b),Object.freeze(T))}static load(i){let u;if(i instanceof Uint8Array)u=Promise.resolve(i);else{let d=i;if(typeof process<"u"&&process.versions&&process.versions.node){let _=require("fs");u=Promise.resolve(_.readFileSync(d))}else u=fetch(d).then(_=>_.arrayBuffer().then(m=>{if(_.ok)return new Uint8Array(m);{let f=new TextDecoder("utf-8").decode(m);throw new Error(`Language.load failed with status ${_.status}.

${f}`)}}))}let c=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return u.then(d=>c(d,{loadAsync:!0})).then(d=>{let _=Object.keys(d),m=_.find(p=>LANGUAGE_FUNCTION_REGEX.test(p)&&!p.includes("external_scanner_"));m||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(_,null,2)}`);let f=d[m]();return new s(INTERNAL,f)})}};l(s,"Language");let Language=s,a=class a{constructor(i,u,c,d,_,m,f,p){assertInternal(i),this[0]=u,this.captureNames=c,this.textPredicates=d,this.predicates=_,this.setProperties=m,this.assertedProperties=f,this.refutedProperties=p,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(i,u,c,d){u||(u=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(i),C._ts_query_matches_wasm(this[0],i.tree[0],u.row,u.column,c.row,c.column,_);let m=getValue(TRANSFER_BUFFER,"i32"),f=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=new Array(m);this.exceededMatchLimit=!!p;let g=0,b=f;for(let T=0;T<m;T++){let E=getValue(b,"i32");b+=SIZE_OF_INT;let w=getValue(b,"i32");b+=SIZE_OF_INT;let S=new Array(w);if(b=unmarshalCaptures(this,i.tree,b,S),this.textPredicates[E].every(M=>M(S))){h[g++]={pattern:E,captures:S};let M=this.setProperties[E];M&&(h[T].setProperties=M);let k=this.assertedProperties[E];k&&(h[T].assertedProperties=k);let y=this.refutedProperties[E];y&&(h[T].refutedProperties=y)}}return h.length=g,C._free(f),h}captures(i,u,c,d){u||(u=ZERO_POINT),c||(c=ZERO_POINT),d||(d={});let _=d.matchLimit;if(_===void 0)_=0;else if(typeof _!="number")throw new Error("Arguments must be numbers");marshalNode(i),C._ts_query_captures_wasm(this[0],i.tree[0],u.row,u.column,c.row,c.column,_);let m=getValue(TRANSFER_BUFFER,"i32"),f=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),h=[];this.exceededMatchLimit=!!p;let g=[],b=f;for(let T=0;T<m;T++){let E=getValue(b,"i32");b+=SIZE_OF_INT;let w=getValue(b,"i32");b+=SIZE_OF_INT;let S=getValue(b,"i32");if(b+=SIZE_OF_INT,g.length=w,b=unmarshalCaptures(this,i.tree,b,g),this.textPredicates[E].every(M=>M(g))){let M=g[S],k=this.setProperties[E];k&&(M.setProperties=k);let y=this.assertedProperties[E];y&&(M.assertedProperties=y);let x=this.refutedProperties[E];x&&(M.refutedProperties=x),h.push(M)}}return C._free(f),h}predicatesForPattern(i){return this.predicates[i]}didExceedMatchLimit(){return this.exceededMatchLimit}};l(a,"Query");let Query=a;function getText(o,i,u){let c=u-i,d=o.textCallback(i,null,u);for(i+=d.length;i<u;){let _=o.textCallback(i,null,u);if(!(_&&_.length>0))break;i+=_.length,d+=_}return i>u&&(d=d.slice(0,c)),d}l(getText,"getText");function unmarshalCaptures(o,i,u,c){for(let d=0,_=c.length;d<_;d++){let m=getValue(u,"i32"),f=unmarshalNode(i,u+=SIZE_OF_INT);u+=SIZE_OF_NODE,c[d]={name:o.captureNames[m],node:f}}return u}l(unmarshalCaptures,"unmarshalCaptures");function assertInternal(o){if(o!==INTERNAL)throw new Error("Illegal constructor")}l(assertInternal,"assertInternal");function isPoint(o){return o&&typeof o.row=="number"&&typeof o.column=="number"}l(isPoint,"isPoint");function marshalNode(o){let i=TRANSFER_BUFFER;setValue(i,o.id,"i32"),i+=SIZE_OF_INT,setValue(i,o.startIndex,"i32"),i+=SIZE_OF_INT,setValue(i,o.startPosition.row,"i32"),i+=SIZE_OF_INT,setValue(i,o.startPosition.column,"i32"),i+=SIZE_OF_INT,setValue(i,o[0],"i32")}l(marshalNode,"marshalNode");function unmarshalNode(o,i=TRANSFER_BUFFER){let u=getValue(i,"i32");if(u===0)return null;let c=getValue(i+=SIZE_OF_INT,"i32"),d=getValue(i+=SIZE_OF_INT,"i32"),_=getValue(i+=SIZE_OF_INT,"i32"),m=getValue(i+=SIZE_OF_INT,"i32"),f=new Node(INTERNAL,o);return f.id=u,f.startIndex=c,f.startPosition={row:d,column:_},f[0]=m,f}l(unmarshalNode,"unmarshalNode");function marshalTreeCursor(o,i=TRANSFER_BUFFER){setValue(i+0*SIZE_OF_INT,o[0],"i32"),setValue(i+1*SIZE_OF_INT,o[1],"i32"),setValue(i+2*SIZE_OF_INT,o[2],"i32")}l(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(o){o[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),o[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),o[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}l(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(o,i){setValue(o,i.row,"i32"),setValue(o+SIZE_OF_INT,i.column,"i32")}l(marshalPoint,"marshalPoint");function unmarshalPoint(o){return{row:getValue(o,"i32"),column:getValue(o+SIZE_OF_INT,"i32")}}l(unmarshalPoint,"unmarshalPoint");function marshalRange(o,i){marshalPoint(o,i.startPosition),marshalPoint(o+=SIZE_OF_POINT,i.endPosition),setValue(o+=SIZE_OF_POINT,i.startIndex,"i32"),setValue(o+=SIZE_OF_INT,i.endIndex,"i32"),o+=SIZE_OF_INT}l(marshalRange,"marshalRange");function unmarshalRange(o){let i={};return i.startPosition=unmarshalPoint(o),o+=SIZE_OF_POINT,i.endPosition=unmarshalPoint(o),o+=SIZE_OF_POINT,i.startIndex=getValue(o,"i32"),o+=SIZE_OF_INT,i.endIndex=getValue(o,"i32"),i}l(unmarshalRange,"unmarshalRange");function marshalEdit(o){let i=TRANSFER_BUFFER;marshalPoint(i,o.startPosition),i+=SIZE_OF_POINT,marshalPoint(i,o.oldEndPosition),i+=SIZE_OF_POINT,marshalPoint(i,o.newEndPosition),i+=SIZE_OF_POINT,setValue(i,o.startIndex,"i32"),i+=SIZE_OF_INT,setValue(i,o.oldEndIndex,"i32"),i+=SIZE_OF_INT,setValue(i,o.newEndIndex,"i32"),i+=SIZE_OF_INT}l(marshalEdit,"marshalEdit");for(let o of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(_Parser.prototype,o,{value:ParserImpl.prototype[o],enumerable:!1,writable:!1});_Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}};l(_Parser,"Parser");let Parser=_Parser;return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});function Je(n){return n in jr&&n!=="csharp"&&n!=="java"}function wt(n){if(!(n in jr))throw new Error(`Unrecognized language: ${n}`);return jr[n]}async function Ol(n){let e,t=tn.default.resolve(tn.default.extname(__filename)!==".ts"?__dirname:tn.default.resolve(__dirname,"../../dist"),`tree-sitter-${n}.wasm`);try{e=await ts.promises.readFile(t)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new ye(`Could not load tree-sitter-${n}.wasm`,r):r}return nn.default.Language.load(e)}function rs(n){let e=wt(n);if(!zr.has(e)){let t=Ol(e);zr.set(e,t)}return zr.get(e)}async function Xe(n,e){await nn.default.init();let t;try{t=new nn.default}catch(a){throw a&&typeof a=="object"&&"message"in a&&typeof a.message=="string"&&a.message.includes("table index is out of bounds")?new Hr(`Could not init Parse for language <${n}>`,a):a}let r=await rs(n);t.setLanguage(r);let s=t.parse(e);return t.delete(),s}function Rl(n){switch(wt(n)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":return"}";case"ruby":return"end"}}function Dl(n,e){let t=[];for(let r of n){if(!r[1]){let s=e.tree.getLanguage();r[1]=s.query(r[0])}t.push(...r[1].matches(e))}return t}function Vr(n){return Dl([Bl],n).length==1}var ts,tn,nn,ns,jr,zr,qr,Hr,Bl,rn=I(()=>{"use strict";Rt();ts=require("fs"),tn=et(require("path")),nn=et(es()),ns=(u=>(u.Python="python",u.JavaScript="javascript",u.TypeScript="typescript",u.TSX="tsx",u.Go="go",u.Ruby="ruby",u.CSharp="c_sharp",u.Java="java",u))(ns||{}),jr={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java"};l(Je,"isSupportedLanguageId");l(wt,"languageIdToWasmLanguage");zr=new Map;l(Ol,"loadWasmLanguage");l(rs,"getLanguage");qr=class qr extends Error{constructor(t,r){super(t);this.cause=r}};l(qr,"WrappedError");Hr=qr;l(Xe,"parseTreeSitter");l(Rl,"getBlockCloseToken");l(Dl,"innerQuery");Bl=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];l(Vr,"queryPythonIsDocstring")});function Ul(n,e){let t=new Set;return e.forEach(r=>{n.has(r)&&t.add(r)}),t.size}var Ee,on,os=I(()=>{"use strict";rn();Xt();Yt();Wr();Ee=class Ee extends Ke{constructor(e,t){super(e),this.windowLength=t}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return Qt(this.windowLength,e)}_getCursorContextInfo(e){return Ce(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=Ee.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){var s;let e=(s=await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))==null?void 0:s.startIndex,t=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,t):Ce(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,t){return Ul(e,t)}async getEnclosingMemberStart(e,t){var s;let r;try{r=await Xe(this.referenceDoc.languageId,e);let a=r.rootNode.namedDescendantForIndex(t);for(;a&&!(Ee.isMember(a)||Ee.isBlock(a));)a=(s=a.parent)!=null?s:void 0;return a}finally{r==null||r.delete()}}static isMember(e){switch(e==null?void 0:e.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e==null?void 0:e.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};l(Ee,"BlockTokenSubsetMatcher"),Ee.FACTORY=l(e=>({to:l(t=>new Ee(t,e),"to")}),"FACTORY");on=Ee;l(Ul,"computeScore")});function Zl(n,e){return(e.useSubsetMatching?on.FACTORY(e.snippetLength):en.FACTORY(e.snippetLength)).to(n)}async function ss(n,e,t){let r=Zl(n,t);return t.maxTopSnippets===0?[]:(await e.filter(a=>a.source.length<t.maxCharPerFile&&a.source.length>0).slice(0,t.maxNumberOfFiles).reduce(async(a,o)=>(await a).concat((await r.findMatches(o,t.maxSnippetsPerFile)).map(i=>({relativePath:o.relativePath,...i}))),Promise.resolve([]))).filter(a=>a.score&&a.snippet&&a.score>t.threshold).sort((a,o)=>a.score-o.score).slice(-t.maxTopSnippets)}var Wl,zl,jl,Hl,Vl,ql,is,Zr,sn=I(()=>{"use strict";Qi();os();Wl=0,zl=60,jl=4,Hl=1,Vl=20,ql=1e4,is={snippetLength:zl,threshold:Wl,maxTopSnippets:jl,maxCharPerFile:ql,maxNumberOfFiles:Vl,maxSnippetsPerFile:Hl,useSubsetMatching:!1},Zr={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};l(Zl,"getMatcher");l(ss,"getSimilarSnippets")});function as(n,e,t){if(!t)throw new Error("targetTokenBudget must be specified for the truncateFirstLinesFirst summarizer");let r=e.text.split(`
`);for(let g=0;g<r.length-1;g++)r[g]+=`
`;let s=[];r.forEach((g,b)=>{g===`
`&&s.length>0&&!s[s.length-1].endsWith(`

`)?s[s.length-1]+=`
`:s.push(g)});let a=s.map(g=>n.tokenLength(g)),o=1,i=0;for(;o<=a.length;o++){let g=a.at(-o);if(g){if(g+i>t){o--;break}i+=g}}let c=s.slice(-o).join(""),d=n.tokenLength(c),m=s.slice(0,-o).join(""),f=n.tokenLength(m),p={id:e.id,kind:e.kind,text:c,tokens:d,score:e.score},h={id:e.id,kind:e.kind,text:m,tokens:f,score:e.score};return{summarizedElement:p,removedMaterial:h}}var ls=I(()=>{"use strict";l(as,"truncateFirstLinesFirst")});var $r,an,us=I(()=>{"use strict";ls();ln();$r=class $r{constructor(e="default"){switch(e){case"default":default:this.kindToFunctionMap=new Map([["BeforeCursor",as]])}}isSummarizationAvailable(e){return this.kindToFunctionMap.has(e)}summarize(e,t,r){return this.kindToFunctionMap.get(t.kind)(e,t,r)}};l($r,"SnippetTextProcessor");an=$r});function cs(n,e){let t=`Use ${n}`;return ve(t,e)}function ds(n){let e=n.source.substring(0,n.offset);return Gl.test(e)}function _s(n,e){let t=n.lastIndexOf(`
`)+1,r=n.substring(0,t),s=n.substring(t);return e.snippet=e.snippet+s,[r,e]}var Gl,Gr=I(()=>{"use strict";ue();Gl=/(\.|->|::)\w+$/;l(cs,"announceTooltipSignatureSnippet");l(ds,"endsWithAttributesOrMethod");l(_s,"transferLastLineToTooltipSignature")});function Kl(){Kr={text:"",tokens:[]}}function ie(n){var e;return n=n.toLowerCase(),(e=Xl[n])!=null?e:n}async function Yl(n,e={},t=[]){let r=new un(e,n.languageId),s=J(r.tokenizerName),a=new an(r.snippetTextProcessingPreset),o=new vt(r.promptOrderListPreset),i=new cn(r.promptPriorityPreset),{source:u,offset:c}=n;if(c<0||c>u.length)throw new Error(`Offset ${c} is out of range.`);n.languageId=ie(n.languageId);let d=new _n(s,r.lineEnding,o,a,i),_=t.find(w=>w.provider==="path"),m=t.find(w=>w.provider==="language"),f=t.find(w=>w.provider==="trait"),p=t.find(w=>w.provider==="tooltip-signature");_!==void 0&&_.snippet.length>0?(d.append(_.snippet,"PathMarker"),m&&d.extMarkUnused({text:m.snippet,kind:"LanguageMarker",tokens:s.tokenLength(m.snippet),id:NaN,score:NaN})):m&&d.append(m.snippet,"LanguageMarker"),f!=null&&d.append(f.snippet,"Traits"),t=t.filter(w=>w.provider!=="language"&&w.provider!=="path"&&w.provider!=="tooltip-signature"&&w.provider!=="trait");function h(){vs(t,n.languageId,s,i,r.numberOfSnippets).forEach(S=>{let M=dn(S.provider);d.append(S.announcedSnippet,M,S.tokens,S.score)})}l(h,"addSnippetsNow"),h();let g=u.substring(0,c);p!==void 0&&s.tokenLength(p.snippet)<=gs?([g,p]=_s(g,p),d.append(p.snippet,"TooltipSignature")):p!==void 0&&d.extMarkUnused({text:p.snippet,kind:"TooltipSignature",tokens:s.tokenLength(p.snippet),id:NaN,score:NaN}),d.append(g,"BeforeCursor");let b=u.slice(c),{promptInfo:T,newCachedSuffix:E}=d.fulfill(b,r,Kr);return Kr=E,T}var Kr,ms,ps,hs,gs,bs,Jl,Jr,ys,ws,Xr,un,Xl,Ae=I(()=>{"use strict";sn();de();us();$e();Gr();ln();Kr={text:"",tokens:[]};l(Kl,"resetSuffixCache");ms=500,ps=8192-ms,hs=4,gs=150,bs=10,Jl=15,Jr=(t=>(t.ConvertToUnix="unix",t.KeepOriginal="keep",t))(Jr||{}),ys=(t=>(t.None="none",t.FifteenPercent="fifteenPercent",t))(ys||{}),ws=(t=>(t.Equal="equal",t.Levenshtein="levenshteineditdistance",t))(ws||{}),Xr=class Xr{constructor(e,t){this.maxPromptLength=ps;this.lineEnding="unix";this.tokenizerName="cl100k_base";this.suffixPercent=15;this.suffixMatchThreshold=bs;this.promptOrderListPreset="default";this.promptPriorityPreset="default";this.snippetTextProcessingPreset="default";var r,s,a,o;if(Object.assign(this,e),this.suffixPercent<0||this.suffixPercent>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${this.suffixPercent}`);if(this.suffixMatchThreshold<0||this.suffixMatchThreshold>100)throw new Error(`suffixMatchThreshold must be at between 0 and 100, but was ${this.suffixMatchThreshold}`);t==="cpp"?((r=this.similarFilesOptions)!=null||(this.similarFilesOptions=Zr),(s=this.numberOfSnippets)!=null||(this.numberOfSnippets=Zr.maxTopSnippets)):((a=this.similarFilesOptions)!=null||(this.similarFilesOptions=is),(o=this.numberOfSnippets)!=null||(this.numberOfSnippets=hs))}};l(Xr,"PromptOptions");un=Xr,Xl={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};l(ie,"normalizeLanguageId");l(Yl,"getPrompt")});function Es(n,e){if(n.length===0||e.length===0)return{score:n.length+e.length};let t=Array.from({length:n.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<n.length;r++)t[r][0]=r;for(let r=0;r<e.length;r++)t[0][r]=r;for(let r=0;r<e.length;r++)for(let s=0;s<n.length;s++)t[s][r]=Math.min((s==0?r:t[s-1][r])+1,(r==0?s:t[s][r-1])+1,(s==0||r==0?Math.max(s,r):t[s-1][r-1])+(n[s]==e[r]?0:1));return{score:t[n.length-1][e.length-1]}}var Ss=I(()=>{"use strict";l(Es,"findEditDistanceScore")});function dn(n){switch(n){case"similar-files":return"SimilarFile";case"path":return"PathMarker";case"language":return"LanguageMarker";case"tooltip-signature":return"TooltipSignature";case"trait":return"Traits";case"code":return"CodeSnippet";default:throw new Error(`Unknown snippet provider type ${n}`)}}var Et,Ql,Yr,mn,Qr,fn,eo,vt,to,cn,no,pn,ro,_n,ln=I(()=>{"use strict";hn();Ae();Ss();Et=50,Ql=5,Yr=class Yr{constructor(){this.used=new Map;this.unused=new Map}add(e){for(let[t,r]of e.used)this.used.set(t,r);for(let[t,r]of e.unused)this.unused.set(t,r)}markUsed(e){this.IsSnippet(e)&&this.used.set(e.id,this.convert(e))}undoMarkUsed(e){this.IsSnippet(e)&&this.used.delete(e.id)}markUnused(e){this.IsSnippet(e)&&this.unused.set(e.id,this.convert(e))}convert(e){return{score:e.score.toFixed(4),length:e.text.length}}IsSnippet(e){return e.kind=="SimilarFile"||e.kind=="TooltipSignature"}};l(Yr,"PromptBackground");mn=Yr,Qr=class Qr{constructor(){this.used=new Map;this.unused=new Map;this.usedCounts=new Map;this.unusedCounts=new Map}toJSON(){return{used:Object.fromEntries(this.used),unused:Object.fromEntries(this.unused),usedCounts:Object.fromEntries(this.usedCounts),unusedCounts:Object.fromEntries(this.unusedCounts)}}add(e){for(let[t,r]of e.used)this.used.set(t,(this.used.get(t)||0)+r);for(let[t,r]of e.unused)this.unused.set(t,(this.unused.get(t)||0)+r);for(let[t,r]of e.usedCounts)this.usedCounts.set(t,(this.usedCounts.get(t)||0)+r);for(let[t,r]of e.unusedCounts)this.unusedCounts.set(t,(this.unusedCounts.get(t)||0)+r)}markUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)+e.tokens),e.kind=="BeforeCursor"?this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)+e.text.split(`
`).length):this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)+1)}undoMarkUsed(e){this.used.set(e.kind,(this.used.get(e.kind)||0)-e.tokens),e.kind=="BeforeCursor"?this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)-e.text.split(`
`).length):this.usedCounts.set(e.kind,(this.usedCounts.get(e.kind)||0)-1)}markUnused(e){this.unused.set(e.kind,(this.unused.get(e.kind)||0)+e.tokens),e.kind=="BeforeCursor"?this.unusedCounts.set(e.kind,(this.unusedCounts.get(e.kind)||0)+e.text.split(`
`).length):this.unusedCounts.set(e.kind,(this.unusedCounts.get(e.kind)||0)+1)}};l(Qr,"PromptChoices");fn=Qr,eo=class eo{constructor(e="default"){this._rankedList=["LanguageMarker","PathMarker","Traits","CodeSnippet","SimilarFile","BeforeCursor","TooltipSignature"]}get rankedList(){return this._rankedList}sortElements(e){return e.sort((t,r)=>{let s=this._rankedList.indexOf(t.kind),a=this._rankedList.indexOf(r.kind);if(s===-1||a===-1)throw new Error(`Invalid element kind: ${t.kind} or ${r.kind}, not found in prompt element ordering list`);return s===a?t.id-r.id:s-a})}};l(eo,"PromptOrderList");vt=eo,to=class to extends vt{constructor(e="default"){switch(super(),e){case"office-exp":this._rankedList=["PathMarker","TooltipSignature","BeforeCursor","CodeSnippet","SimilarFile","LanguageMarker","Traits"];break;default:this._rankedList=["TooltipSignature","BeforeCursor","CodeSnippet","SimilarFile","PathMarker","LanguageMarker","Traits"]}}sortElements(e){return e.sort((t,r)=>{let s=this._rankedList.indexOf(t.kind),a=this._rankedList.indexOf(r.kind);if(s===-1||a===-1)throw new Error(`Invalid element kind: ${t.kind} or ${r.kind}, not found in snippet provider priority list`);return s===a?r.id-t.id:s-a})}};l(to,"PromptPriorityList");cn=to;l(dn,"kindForSnippetProviderType");no=class no{constructor(e){this.ranges=new Array;let t=0,r;for(let s of e)s.text.length!==0&&(r==="BeforeCursor"&&s.kind==="BeforeCursor"?this.ranges[this.ranges.length-1].end+=s.text.length:this.ranges.push({kind:s.kind,start:t,end:t+s.text.length}),r=s.kind,t+=s.text.length)}};l(no,"PromptElementRanges");pn=no,ro=class ro{constructor(e,t,r,s,a){this.tokenizer=e;this.lineEndingOption=t;this.orderingList=r;this.snippetTextProcessor=s;this.priorityList=a;this.content=[];this.basePromptBackground=new mn;this.baseTallyOfChoices=new fn}extMarkUnused(e){this.basePromptBackground.markUnused(e),this.baseTallyOfChoices.markUnused(e)}getContent(){return[...this.content]}convertLineEndings(e){return this.lineEndingOption==="unix"&&(e=e.replace(/\r\n?/g,`
`)),e}maxPrefixTokenLength(){return this.content.reduce((e,t)=>e+=t.tokens,0)}append(e,t,r=this.tokenizer.tokenLength(e),s=NaN){e=this.convertLineEndings(e);let a=this.content.length;return this.content.push({id:a,text:e,kind:t,tokens:r,score:s}),a}fulfillPrefix(e){let t=new mn;t.add(this.basePromptBackground);let r=new fn;r.add(this.baseTallyOfChoices);function s(p){t.markUsed(p),r.markUsed(p)}l(s,"markUsed");function a(p){t.undoMarkUsed(p),r.undoMarkUsed(p)}l(a,"undoMarkUsed");function o(p){t.markUnused(p),r.markUnused(p)}l(o,"markUnused"),this.priorityList.sortElements(this.content);let i,u=[],c=e;this.content.forEach(p=>{if(c>0||i===void 0){let h=p.tokens;if(c>=h)c-=h,s(p),u.push(p);else if(p.kind==="BeforeCursor"&&c>0){let{summarizedElement:g,removedMaterial:b}=this.snippetTextProcessor.summarize(this.tokenizer,p,c);p=g,h=p.tokens,c-=h,p.text.length>0&&s(p),b.text.length>0&&o(b),u.push(p)}else i===void 0?i=p:o(p)}else o(p)}),this.orderingList.sortElements(u);let d=u.reduce((p,h)=>p+h.text,""),_=this.tokenizer.tokenLength(d);for(;_>e;){this.priorityList.sortElements(u);let p=u.pop();p&&(a(p),o(p),i!==void 0&&o(i),i=void 0),this.orderingList.sortElements(u),d=u.reduce((h,g)=>h+g.text,""),_=this.tokenizer.tokenLength(d)}let m=[...u];if(i!==void 0){m.push(i),this.orderingList.sortElements(m);let p=m.reduce((g,b)=>g+b.text,""),h=this.tokenizer.tokenLength(p);if(h<=e){s(i);let g=new pn(m);return{prefix:p,suffix:"",prefixLength:h,suffixLength:0,promptChoices:r,promptBackground:t,promptElementRanges:g}}else o(i)}let f=new pn(u);return{prefix:d,suffix:"",prefixLength:_,suffixLength:0,promptChoices:r,promptBackground:t,promptElementRanges:f}}fulfill(e,t,r){var m;if(t.suffixPercent===0||e.length===0)return{promptInfo:this.fulfillPrefix(t.maxPromptLength),newCachedSuffix:r};let s=t.maxPromptLength-Ql,a=Math.floor(s*(100-t.suffixPercent)/100),o=s-a,i=e.replace(/^.*/,"").trimStart();if(s>Et&&o<Et)throw new Error(`Suffix budget is smaller than MAX_EDIT_DISTANCE_LENGTH: ${o} < ${Et}
`);let u=this.tokenizer.takeFirstTokens(i,Et),c=!1;u.tokens.length>0&&t.suffixMatchThreshold>0&&100*((m=Es(u.tokens,r.tokens.slice(0,Et)))==null?void 0:m.score)<t.suffixMatchThreshold*u.tokens.length&&(c=!0);let d;if(c)a=s-r.tokens.length,d=r;else{let f=this.maxPrefixTokenLength(),p=this.tokenizer.tokenLength(i);f<a?(a=f,o=s-a):p<o&&(a=s-p,o=p),d=this.tokenizer.takeFirstTokens(i,o)}let _=this.fulfillPrefix(a);return _.suffix=d.text,_.suffixLength=d.tokens.length,{promptInfo:_,newCachedSuffix:d}}};l(ro,"PromptWishlist");_n=ro});function tu(n,e){let t=eu[n.semantics],r=["snippets"].includes(n.semantics)?"these":"this",a=(n.relativePath?`Compare ${r} ${t} from ${n.relativePath}:`:`Compare ${r} ${t}:`)+`
`+n.snippet;return a.endsWith(`
`)||(a+=`
`),ve(a,e)}function Ts(n){n.sort((e,t)=>t.score-e.score)}function nu(n,e,t){if(e==0)return[];let r=n.map(a=>({...a,kind:dn(a.provider)})),s=[];return t.rankedList.forEach(a=>{let o=r.filter(({kind:i})=>i===a);Ts(o),s.push(...o)}),s.slice(0,e)}function vs(n,e,t,r,s){let o=nu(n,s,r).map(i=>{let u=tu(i,e),c=t.tokenLength(u);return{announcedSnippet:u,provider:i.provider,score:i.score,tokens:c,relativePath:i.relativePath}}).filter(i=>i.tokens>0);return Ts(o),o.reverse(),o}var Z,ce,eu,de=I(()=>{"use strict";ue();ln();Z=(o=>(o.SimilarFiles="similar-files",o.Language="language",o.Path="path",o.TooltipSignature="tooltip-signature",o.Trait="trait",o.CodeSnippet="code",o))(Z||{}),ce=(_=>(_.Function="function",_.Snippet="snippet",_.Snippets="snippets",_.Variable="variable",_.Parameter="parameter",_.Method="method",_.Class="class",_.Module="module",_.Alias="alias",_.Enum="enum member",_.Interface="interface",_))(ce||{}),eu={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};l(tu,"announceSnippet");l(Ts,"sortSnippetsDescending");l(nu,"selectSnippets");l(vs,"processSnippetsForWishlist")});var oo,Te,io,j,_e=I(()=>{"use strict";ao();oo=class oo extends Error{constructor(e){super(e),this.name="ProviderTimeoutError"}};l(oo,"ProviderTimeoutError");Te=oo,io=class io{constructor(e){this.api=e}getSnippets(e,t){return new Promise((r,s)=>{t.aborted&&s(new Se(this.type,new Te("provider aborted"))),t.addEventListener("abort",()=>{s(new Se(this.type,new Te(`max runtime exceeded: ${so} ms`)))},{once:!0});let a=performance.now();this.buildSnippets(e).then(o=>{let i=performance.now();r({snippets:o,providerType:this.type,runtime:i-a})}).catch(o=>{s(new Se(this.type,o))})})}};l(io,"SnippetProvider");j=io});var lo,gn,xs=I(()=>{"use strict";ue();de();_e();lo=class lo extends j{constructor(){super(...arguments);this.type="code"}async buildSnippets(t){var o;if(t.codeSnippets===void 0||t.codeSnippets.length===0)return[];let{codeSnippets:r}=t,s=new Map;for(let i of r){let u=(o=i.relativePath)!=null?o:i.uri,c=s.get(u);c===void 0&&(c=[],s.set(u,c)),c.push(i)}let a=[];return s.forEach((i,u)=>{let c=i.map(d=>d.value).join(`
---
`);a.push({provider:this.type,semantics:i.length>1?"snippets":"snippet",snippet:Y(c),relativePath:u,startLine:0,endLine:0,score:Math.max(...i.map(d=>{var _;return(_=d.importance)!=null?_:0}))})}),a}};l(lo,"CodeSnippetProvider");gn=lo});var uo,bn,Ms=I(()=>{"use strict";ue();Ae();de();_e();uo=class uo extends j{constructor(){super(...arguments);this.type="language"}async buildSnippets(t){let{currentFile:r}=t;return r.languageId=ie(r.languageId),[{provider:this.type,semantics:"snippet",snippet:Y(Ji(r)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}};l(uo,"LanguageSnippetProvider");bn=uo});var co,yn,Is=I(()=>{"use strict";ue();Ae();de();_e();co=class co extends j{constructor(){super(...arguments);this.type="path"}async buildSnippets(t){let{currentFile:r}=t;return r.languageId=ie(r.languageId),[{provider:this.type,semantics:"snippet",snippet:Y(Xi(r)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}};l(co,"PathSnippetProvider");yn=co});var _o,wn,ks=I(()=>{"use strict";hn();_e();_o=class _o extends j{constructor(){super(...arguments);this.type="similar-files"}async buildSnippets(t){let{currentFile:r,similarFiles:s,options:a}=t;return a&&s&&s.length?await this.api.getSimilarSnippets(r,s,a.similarFilesOptions):[]}};l(_o,"SimilarFilesProvider");wn=_o});var mo,vn,Ls=I(()=>{"use strict";ue();Ae();de();_e();Gr();mo=class mo extends j{constructor(){super(...arguments);this.type="tooltip-signature"}async buildSnippets(t){let{currentFile:r,tooltipSignature:s}=t,a=[];return r.languageId=ie(r.languageId),s&&ds(r)&&a.push({provider:this.type,semantics:"snippet",snippet:Y(cs(s,r.languageId)),relativePath:r.relativePath,startLine:0,endLine:0,score:0}),a}};l(mo,"TooltipSignatureSnippetProvider");vn=mo});var fo,En,Ps=I(()=>{"use strict";ue();Ae();de();_e();fo=class fo extends j{constructor(){super(...arguments);this.type="trait"}async buildSnippets(t){if(t.traits.length===0)return[];let{currentFile:r}=t;return r.languageId=ie(r.languageId),[{provider:this.type,semantics:"snippet",snippet:ve(`Consider this related information:
`+t.traits.map(s=>s.kind==="string"?Y(s.value):Y(`${s.name}: ${s.value}`)).join(""),r.languageId),relativePath:r.relativePath,startLine:0,endLine:0,score:0}]}};l(fo,"TraitProvider");En=fo});function ru(n){return new Promise(e=>{setTimeout(()=>e(`delay: ${n}`),n)})}var Sn,se,Ns,ho,po,Tn,Cs=I(()=>{"use strict";Rt();sn();Sn=et(require("path")),se=require("worker_threads");l(ru,"sleep");Ns=["getSimilarSnippets","sleep"],ho=class ho{constructor(){this.nextHandlerId=0;this.handlers=new Map;this.fns=new Map;this.getSimilarSnippets=ss;this.sleep=ru;var e;!se.isMainThread&&((e=se.workerData)!=null&&e.port)&&(tr(),process.cwd=()=>se.workerData.cwd,this.configureWorkerResponse(se.workerData.port))}initWorker(){let{port1:e,port2:t}=new se.MessageChannel;this.port=e,this.worker=new se.Worker(Sn.default.resolve(Sn.default.extname(__filename)!==".ts"?__dirname:Sn.default.resolve(__dirname,"../../dist"),"workerProxy.js"),{workerData:{port:t,cwd:process.cwd()},transferList:[t]}),this.port.on("message",r=>this.handleMessage(r)),this.port.on("error",r=>this.handleError(r))}startThreading(){if(this.worker)throw new Error("Worker thread already initialized.");this.proxyFunctions(),this.initWorker()}stopThreading(){this.worker&&(this.worker.terminate(),this.worker.removeAllListeners(),this.worker=void 0,this.unproxyFunctions(),this.handlers.clear())}proxyFunctions(){for(let e of Ns)this.fns.set(e,this[e]),this.proxy(e)}unproxyFunctions(){for(let e of Ns){let t=this.fns.get(e);if(t)this[e]=t;else throw new Error(`Unproxy function not found: ${e}`)}}configureWorkerResponse(e){this.port=e,this.port.on("message",t=>void this.onMessage(t))}async onMessage({id:e,fn:t,args:r}){let s=this[t];if(!s)throw new Error(`Function not found: ${t}`);try{let a=await s.apply(this,r);this.port.postMessage({id:e,res:a})}catch(a){if(!(a instanceof Error))throw a;typeof a.code=="string"?this.port.postMessage({id:e,err:a,code:a.code}):this.port.postMessage({id:e,err:a})}}handleMessage({id:e,err:t,code:r,res:s}){let a=this.handlers.get(e);a&&(this.handlers.delete(e),t?(t.code=r,a.reject(t)):a.resolve(s))}handleError(e){var r;let t;if(e instanceof Error){t=e,t.code==="MODULE_NOT_FOUND"&&((r=t.message)!=null&&r.endsWith("workerProxy.js'"))&&(t=new ye("Failed to load workerProxy.js"));let s=new Error().stack;t.stack&&(s!=null&&s.match(/^Error\n/))&&(t.stack+=s.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&e.name==="ExitStatus"&&"status"in e&&typeof e.status=="number"?(t=new Error(`workerProxy.js exited with status ${e.status}`),t.code=`CopilotPromptWorkerExit${e.status}`):t=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let s of this.handlers.values())s.reject(t);throw t}proxy(e){this[e]=function(...t){let r=this.nextHandlerId++;return new Promise((s,a)=>{var o;this.handlers.set(r,{resolve:s,reject:a}),(o=this.port)==null||o.postMessage({id:r,fn:e,args:t})})}}};l(ho,"WorkerProxy");po=ho,Tn=new po});function As(n){return n.status==="fulfilled"}function iu(n){return n.status==="rejected"}function Fs(n){return n.filter(As).flatMap(e=>e.value.snippets)}function Os(n){return n.filter(iu).flatMap(e=>e.reason)}function Rs(n){let e={},t={};return n.forEach(r=>{As(r)?(e[r.value.providerType]=Math.round(r.value.runtime),t[r.value.providerType]=!1):su(r.reason)&&(t[r.reason.providerType]=!0,e[r.reason.providerType]=0)}),{runtimes:e,timeouts:t}}function su(n){return n!==null&&typeof n=="object"&&"error"in n&&n.error instanceof Te}function au(n){return Promise.all(n.map(e=>e.then(lu,uu)))}function lu(n){return{status:"fulfilled",value:n}}function uu(n){return{status:"rejected",reason:n}}var so,ou,go,Se,bo,xn,ao=I(()=>{"use strict";xs();Ms();Is();ks();_e();Ls();Ps();Cs();so=300,ou=[bn,yn,wn,vn,En,gn],go=class go extends Error{constructor(t,r){super();this.providerType=t;this.error=r}};l(go,"ProviderError");Se=go;l(As,"isFulfilledResult");l(iu,"isRejectedResult");l(Fs,"providersSnippets");l(Os,"providersErrors");l(Rs,"providersPerformance");l(su,"isProviderTimeout");bo=class bo{constructor(e=ou){this.startThreading=l(()=>Tn.startThreading(),"startThreading");this.stopThreading=l(()=>Tn.stopThreading(),"stopThreading");this.providers=e.map(t=>new t(Tn))}async getSnippets(e){let t=AbortSignal.timeout(so),r=this.providers.map(s=>s.getSnippets(e,t));return Promise.allSettled?Promise.allSettled(r):au(r)}};l(bo,"SnippetOrchestrator");xn=bo;l(au,"allSettledBackup");l(lu,"createPromiseFulfilledResult");l(uu,"createPromiseRejectedResult")});function cu(n,e){let t=n.lastIndexOf(`
`,e-1),r=n.indexOf(`
`,e);return r<0&&(r=n.length),n.slice(t+1,r)}function Bs(n,e){let t=e;for(;t>0&&/\s/.test(n.charAt(t-1));)t--;return t}function Ds(n,e){let t=n.startIndex,r=n.startIndex-n.startPosition.column,s=e.substring(r,t);if(/^\s*$/.test(s))return s}function du(n,e,t){if(e.startPosition.row<=n.startPosition.row)return!1;let r=Ds(n,t),s=Ds(e,t);return r!==void 0&&s!==void 0&&r.startsWith(s)}function kn(n){if(!Je(n))throw new Error(`Language ${n} is not supported`);return _u[wt(n)]}async function mu(n,e,t){return Je(n)?kn(n).isEmptyBlockStart(e,t):!1}async function fu(n,e,t,r){if(Je(n))return kn(n).isBlockBodyFinished(e,t,r)}async function pu(n,e,t){if(Je(n))return kn(n).getNodeStart(e,t)}var yo,Mn,wo,In,vo,xe,_u,Us=I(()=>{"use strict";rn();yo=class yo{constructor(e,t,r){this.languageId=e;this.nodeMatch=t;this.nodeTypesWithBlockOrStmtChild=r}async getNodeMatchAtPosition(e,t,r){let s=await Xe(this.languageId,e);try{let o=s.rootNode.descendantForIndex(t);for(;o;){let i=this.nodeMatch[o.type];if(i){if(!this.nodeTypesWithBlockOrStmtChild.has(o.type))break;let u=this.nodeTypesWithBlockOrStmtChild.get(o.type),c=u==""?o.namedChildren[0]:o.childForFieldName(u);if((c==null?void 0:c.type)==i)break}o=o.parent}return o?r(o):void 0}finally{s.delete()}}getNextBlockAtPosition(e,t,r){return this.getNodeMatchAtPosition(e,t,s=>{let a=s.children.reverse().find(o=>o.type==this.nodeMatch[s.type]);if(a){if(this.languageId=="python"&&a.parent){let o=a.parent.type==":"?a.parent.parent:a.parent,i=o==null?void 0:o.nextSibling;for(;i&&i.type=="comment";){let u=i.startPosition.row==a.endPosition.row&&i.startPosition.column>=a.endPosition.column,c=i.startPosition.row>o.endPosition.row&&i.startPosition.column>o.startPosition.column;if(u||c)a=i,i=i.nextSibling;else break}}if(!(a.endIndex>=a.tree.rootNode.endIndex-1&&(a.hasError()||a.parent.hasError())))return r(a)}})}async isBlockBodyFinished(e,t,r){let s=(e+t).trimEnd(),a=await this.getNextBlockAtPosition(s,r,o=>o.endIndex);if(a!==void 0&&a<s.length){let o=a-e.length;return o>0?o:void 0}}getNodeStart(e,t){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,t,s=>s.startIndex)}};l(yo,"BaseBlockParser");Mn=yo,wo=class wo extends Mn{constructor(t,r,s,a,o){super(t,a,o);this.blockEmptyMatch=r;this.lineMatch=s}isBlockStart(t){return this.lineMatch.test(t.trimStart())}async isBlockBodyEmpty(t,r){let s=await this.getNextBlockAtPosition(t,r,a=>{a.startIndex<r&&(r=a.startIndex);let o=t.substring(r,a.endIndex).trim();return o==""||o.replace(/\s/g,"")==this.blockEmptyMatch});return s===void 0||s}async isEmptyBlockStart(t,r){return r=Bs(t,r),this.isBlockStart(cu(t,r))&&this.isBlockBodyEmpty(t,r)}};l(wo,"RegexBasedBlockParser");In=wo;l(cu,"getLineAtOffset");l(Bs,"rewindToNearestNonWs");l(Ds,"indent");l(du,"outdented");vo=class vo extends Mn{constructor(t,r,s,a,o,i,u){super(t,r,s);this.startKeywords=a;this.blockNodeType=o;this.emptyStatementType=i;this.curlyBraceLanguage=u}isBlockEmpty(t,r){var a,o;let s=t.text.trim();return this.curlyBraceLanguage&&(s.startsWith("{")&&(s=s.slice(1)),s.endsWith("}")&&(s=s.slice(0,-1)),s=s.trim()),!!(s.length==0||this.languageId=="python"&&(((a=t.parent)==null?void 0:a.type)=="class_definition"||((o=t.parent)==null?void 0:o.type)=="function_definition")&&t.children.length==1&&Vr(t.parent))}async isEmptyBlockStart(t,r){var a,o,i,u;if(r>t.length)throw new RangeError("Invalid offset");for(let c=r;c<t.length&&t.charAt(c)!=`
`;c++)if(/\S/.test(t.charAt(c)))return!1;r=Bs(t,r);let s=await Xe(this.languageId,t);try{let c=s.rootNode.descendantForIndex(r-1);if(c==null||this.curlyBraceLanguage&&c.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&c.parent&&c.parent.type=="object"&&c.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let p=c;for(;p.parent;){if(p.type=="function_signature"||p.type=="method_signature"){let h=c.nextSibling;return h&&p.hasError()&&du(p,h,t)?!0:!p.children.find(b=>b.type==";")&&p.endIndex<=r}p=p.parent}}let d=null,_=null,m=null,f=c;for(;f!=null;){if(f.type==this.blockNodeType){_=f;break}if(this.nodeMatch[f.type]){m=f;break}if(f.type=="ERROR"){d=f;break}f=f.parent}if(_!=null){if(!_.parent||!this.nodeMatch[_.parent.type])return!1;if(this.languageId=="python"){let p=_.previousSibling;if(p!=null&&p.hasError()&&(p.text.startsWith('"""')||p.text.startsWith("'''")))return!0}return this.isBlockEmpty(_,r)}if(d!=null){if(((a=d.previousSibling)==null?void 0:a.type)=="module"||((o=d.previousSibling)==null?void 0:o.type)=="internal_module"||((i=d.previousSibling)==null?void 0:i.type)=="def")return!0;let p=[...d.children].reverse(),h=p.find(b=>this.startKeywords.includes(b.type)),g=p.find(b=>b.type==this.blockNodeType);if(h){switch(this.languageId){case"python":{h.type=="try"&&c.type=="identifier"&&c.text.length>4&&(g=(u=p.find(E=>E.hasError()))==null?void 0:u.children.find(E=>E.type=="block"));let b,T=0;for(let E of d.children){if(E.type==":"&&T==0){b=E;break}E.type=="("&&(T+=1),E.type==")"&&(T-=1)}if(b&&h.endIndex<=b.startIndex&&b.nextSibling){if(h.type=="def"){let E=b.nextSibling;if(E.type=='"'||E.type=="'"||E.type=="ERROR"&&(E.text=='"""'||E.text=="'''"))return!0}return!1}break}case"javascript":{let b=p.find(w=>w.type=="formal_parameters");if(h.type=="class"&&b)return!0;let T=p.find(w=>w.type=="{");if(T&&T.startIndex>h.endIndex&&T.nextSibling!=null||p.find(w=>w.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}case"typescript":{let b=p.find(E=>E.type=="{");if(b&&b.startIndex>h.endIndex&&b.nextSibling!=null||p.find(E=>E.type=="do")&&h.type=="while"||h.type=="=>"&&h.nextSibling&&h.nextSibling.type!="{")return!1;break}}return g&&g.startIndex>h.endIndex?this.isBlockEmpty(g,r):!0}}if(m!=null){let p=this.nodeMatch[m.type],h=m.children.slice().reverse().find(g=>g.type==p);if(h)return this.isBlockEmpty(h,r);if(this.nodeTypesWithBlockOrStmtChild.has(m.type)){let g=this.nodeTypesWithBlockOrStmtChild.get(m.type),b=g==""?m.children[0]:m.childForFieldName(g);if(b&&b.type!=this.blockNodeType&&b.type!=this.emptyStatementType)return!1}return!0}return!1}finally{s.delete()}}};l(vo,"TreeSitterBasedBlockParser");xe=vo,_u={python:new xe("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new xe("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new xe("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new xe("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new In("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new In("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new xe("csharp",{},new Map([]),[],"block",null,!0),java:new xe("java",{},new Map([]),[],"block",null,!0)};l(kn,"getBlockParser");l(mu,"isEmptyBlockStart");l(fu,"isBlockBodyFinished");l(pu,"getNodeStart")});var zs={};Gs(zs,{DEFAULT_MAX_COMPLETION_LENGTH:()=>ms,DEFAULT_MAX_PROMPT_LENGTH:()=>ps,DEFAULT_NUM_SNIPPETS:()=>hs,DEFAULT_SUFFIX_MATCH_THRESHOLD:()=>bs,DEFAULT_SUFFIX_PERCENT:()=>Jl,DEFAULT_TREE_TRAVERSAL_CONFIG:()=>hi,ElidableText:()=>_t,LineEndingOptions:()=>Jr,LineWithValueAndCost:()=>Ge,MAX_TOOLTIP_SIGNATURE_TOKENS:()=>gs,PromptOptions:()=>un,ProviderError:()=>Se,ProviderTimeoutError:()=>Te,SnippetOrchestrator:()=>xn,SnippetProviderType:()=>Z,SnippetSemantics:()=>ce,SuffixMatchOption:()=>ws,SuffixOption:()=>ys,TTokenizer:()=>Ht,TokenizerName:()=>Vt,WASMLanguage:()=>ns,blankNode:()=>Ct,buildLabelRules:()=>He,clearLabels:()=>ri,clearLabelsIf:()=>rr,combineClosersAndOpeners:()=>At,comment:()=>bt,commentBlockAsSingles:()=>ve,createWorker:()=>hu,cutTreeAfterLine:()=>Fa,deparseAndCutTree:()=>Va,deparseLine:()=>ct,deparseTree:()=>ci,describeTree:()=>di,duplicateTree:()=>Oa,elidableTextForDiff:()=>Tl,elidableTextForSourceCode:()=>sr,encodeTree:()=>_i,firstLineOf:()=>mi,flattenVirtual:()=>ne,foldTree:()=>at,fromTreeWithFocussedLines:()=>qe,fromTreeWithValuedLines:()=>gi,getBlockCloseToken:()=>Rl,getBlockParser:()=>kn,getCursorContext:()=>Ce,getLanguage:()=>rs,getNodeStart:()=>pu,getPrompt:()=>Yl,getTokenizer:()=>J,groupBlocks:()=>or,isBlank:()=>P,isBlockBodyFinished:()=>fu,isEmptyBlockStart:()=>mu,isLine:()=>K,isSupportedLanguageId:()=>Je,isTop:()=>ge,isVirtual:()=>V,labelLines:()=>je,labelVirtualInherited:()=>ut,languageIdToWasmLanguage:()=>wt,languageMarkers:()=>gt,lastLineOf:()=>fi,lineNode:()=>nr,mapLabels:()=>te,normalizeLanguageId:()=>ie,parseRaw:()=>oi,parseTree:()=>be,parseTreeSitter:()=>Xe,providersErrors:()=>Os,providersPerformance:()=>Rs,providersSnippets:()=>Fs,queryPythonIsDocstring:()=>Vr,rebuildTree:()=>lt,registerLanguageSpecificParser:()=>Ft,resetLineNumbers:()=>Ra,resetSuffixCache:()=>Kl,topNode:()=>st,virtualNode:()=>Nt,visitTree:()=>A,visitTreeConditionally:()=>Da});function hu(n,e){return new Ws.Worker(Ln.default.resolve(Ln.default.extname(__filename)!==".ts"?__dirname:Ln.default.resolve(__dirname,"../../dist"),n),{workerData:e})}var Ln,Ws,hn=I(()=>{"use strict";Ln=et(require("path")),Ws=require("worker_threads");$i();dt();ue();ao();rn();Us();Ae();Xt();Yt();sn();de();_e();$e();l(hu,"createWorker")});tr();var js=(hn(),Ks(zs)),{parentPort:St,workerData:Pn}=require("worker_threads");Pn!=null&&Pn.cwd&&(process.cwd=()=>Pn.cwd);St.on("message",async({id:n,fn:e,args:t})=>{try{if(e==="getPrompt"){let r=await js.getPrompt(...t);St.postMessage({id:n,res:r})}else{let r=await js[e](...t);St.postMessage({id:n,res:r})}}catch(r){if(!(r instanceof Error))throw r;typeof r.code=="string"?St.postMessage({id:n,err:r,code:r.code}):St.postMessage({id:n,err:r})}});
//# sourceMappingURL=worker.js.map
