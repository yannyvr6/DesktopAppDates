"use strict";var Nt=Object.create;var fe=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var Mt=Object.getOwnPropertyNames;var Lt=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var M=(a,e)=>()=>(a&&(e=a(a=0)),e);var _t=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Bt=(a,e)=>{for(var n in e)fe(a,n,{get:e[n],enumerable:!0})},yt=(a,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Mt(e))!Rt.call(a,r)&&r!==n&&fe(a,r,{get:()=>e[r],enumerable:!(i=Et(e,r))||i.enumerable});return a};var Q=(a,e,n)=>(n=a!=null?Nt(Lt(a)):{},yt(e||!a||!a.__esModule?fe(n,"default",{value:a,enumerable:!0}):n,a)),Vt=a=>yt(fe({},"__esModule",{value:!0}),a);function qe(){if(Ve===void 0)throw new Error("tsserverlibrary not loaded yet");return Ve}var Ve,F,j=M(()=>{"use strict";(e=>{function a(n){Ve=n}e.install=a})(qe||={});F=qe});var Je,je,me,se,qt,O=M(()=>{"use strict";(e=>{function a(n,i){return{kind:"metaData",completionContext:n,path:i}}e.create=a})(Je||={});(e=>{function a(n,i){return{kind:"errorData",code:n,message:i}}e.create=a})(je||={});(n=>{function a(i,r,o,d){return{kind:"trait",traitKind:d,priority:i,name:r,value:o}}n.create=a;function e(i){return i.name.length+i.value.length}n.sizeInChars=e})(me||={});(n=>{function a(i,r,o,d,l){return{kind:"snippet",snippetKind:d,uri:i,additionalUris:r,value:o,priority:l??0}}n.create=a;function e(i){let r=i.value.length;if(r+=i.uri.length+3,i.additionalUris!==void 0)for(let o of i.additionalUris)r+=o.length+3;return r}n.sizeInChars=e})(se||={});(i=>{function a(r){return r.type==="cancelled"}i.isCancelled=a;function e(r){return r.type==="response"&&r.body.items!==void 0}i.isOk=e;function n(r){return r.type==="response"&&r.body.error!==void 0}i.isError=n})(qt||={})});var W=_t((tn,mt)=>{"use strict";j();var t=F(),ft;(N=>{let a=t;N.getTokenAtPosition=a.getTokenAtPosition,N.getNameTable=a.getNameTable,N.findReferencedSymbols=a.findReferencedSymbols,N.getSymbolId=a.getSymbolId;class o{cancellationToken;end;constructor(s,c,f=!1){this.cancellationToken=f?void 0:s,this.end=f?Number.MAX_VALUE:Date.now()+c}isCancellationRequested(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()?!0:Date.now()>this.end}isTimedOut(){return Date.now()>this.end}throwIfCancellationRequested(){if(this.isCancellationRequested())throw new t.OperationCanceledException}}N.CancellationTokenWithTimer=o;class d{isCancellationRequested(){return!1}throwIfCancellationRequested(){}}N.NullCancellationToken=d;let l;(c=>{function w(f){return f.symbol}c.getSymbol=w;function s(f){if(t.isTypeReferenceNode(f))return f.typeName.getText()}c.getTypeName=s})(l=N.Node||={});let p;(s=>{function w(c){return(t.getCombinedModifierFlags(c)&t.ModifierFlags.Private)!==0}s.isPrivate=w})(p=N.Declarations||={});let u;(f=>{function w(m){let b=m.heritageClauses;if(b!==void 0)return b.find(S=>S.token===t.SyntaxKind.ExtendsKeyword)}f.getExtendsClause=w;function s(m){return c(m.statements)}f.entries=s;function*c(m){for(let b of m)t.isClassDeclaration(b)?yield b:t.isModuleDeclaration(b)&&b.body!==void 0&&t.isModuleBlock(b.body)&&(yield*c(b.body.statements))}})(u=N.ClassDeclarations||={});let h;(c=>{function w(f){return f.getBaseTypes()}c.getBaseTypes=w;function s(f,m){let b=m.getSymbol();if(b===void 0)return;let S=b.getDeclarations();if(S===void 0)return;let y=[];for(let g of S)if(t.isClassDeclaration(g)){let K=g.heritageClauses;if(K!==void 0)for(let _ of K)for(let B of _.types)y.push(f.getTypeAtLocation(B.expression))}return y}c.getExtendsTypes=s})(h=N.Types||={});let x;(c=>(c.depthFirst="depthFirst",c.breadthFirst="breadthFirst"))(x=N.Traversal||={});let I;(s=>s.breadthFirstOnly="breadthFirstOnly")(I||={});class C{program;typeChecker;constructor(s){this.program=s,this.typeChecker=s.getTypeChecker()}static Unknown="unknown";static Undefined="undefined";static None="none";static getParent(s){return s.parent}static isConstructor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Constructor)!==0}static isGetAccessor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.GetAccessor)!==0}static isSetAccessor(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.SetAccessor)!==0}static isMethod(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Method)!==0}static isProperty(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Property)!==0}static isClass(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Class)!==0}static isInterface(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Interface)!==0}static isTypeAlias(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.TypeAlias)!==0}static isTypeLiteral(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.TypeLiteral)!==0}static isAlias(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Alias)!==0}static isFunction(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Function)!==0}static isValueModule(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.ValueModule)!==0}static isEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Enum)!==0}static isRegularEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.RegularEnum)!==0}static isConstEnum(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.ConstEnum)!==0}static isBase(s){return s!==void 0&&(s.getFlags()&t.SymbolFlags.Class)!==0}static isPrivate(s){let c=s.declarations;if(c!==void 0){for(let f of c)if(!(t.getCombinedModifierFlags(f)&t.ModifierFlags.Private))return!1}return!0}static isAbstract(s){let c=s.declarations;if(c!==void 0){for(let f of c)if(!(t.getCombinedModifierFlags(f)&t.ModifierFlags.Abstract))return!1}return!0}static isStatic(s){let c=s.declarations;if(c!==void 0){for(let f of c)if(!(t.getCombinedModifierFlags(f)&t.ModifierFlags.Static))return!1}return!0}static fillSources(s,c){if(c.declarations!==void 0)for(let f of c.declarations){let m=f.getSourceFile();m!==void 0&&s.add(m.fileName)}}static getPrimarySource(s){let c=s.declarations;if(!(c===void 0||c.length===0))return c[0].getSourceFile()}static createKey(s,c){let f=s.getDeclarations();if(f===void 0)return;let m=[];for(let S of f){let y=S.getSourceFile();m.push({f:y.fileName,s:S.getStart(),e:S.getEnd(),k:S.kind})}m.length>1&&m.sort((S,y)=>{let g=S.f<y.f?-1:S.f>y.f?1:0;return g!==0||(g=S.s-y.s,g!==0)||(g=S.e-y.e,g!==0)?g:S.k-y.k});let b=c.createHash("md5");return s.flags&t.SymbolFlags.Transient&&b.update(JSON.stringify({trans:!0},void 0,0)),b.update(JSON.stringify(m,void 0,0)),b.digest("base64")}static createVersionedKey(s,c,f){let m=s.getDeclarations();if(m===void 0)return;let b=[];for(let y of m){let g=y.getSourceFile(),K=c.getScriptVersion(g);if(K===void 0)return;b.push({f:g.fileName,v:K,s:y.getStart(),e:y.getEnd(),k:y.kind})}b.length>1&&b.sort((y,g)=>{let K=y.f<g.f?-1:y.f>g.f?1:0;return K!==0||(K=y.v<g.v?-1:y.v>g.v?1:0,K!==0)||(K=y.s-g.s,K!==0)||(K=y.e-g.e,K!==0)?K:y.k-g.k});let S=f.createHash("md5");return s.flags&t.SymbolFlags.Transient&&S.update(JSON.stringify({trans:!0},void 0,0)),S.update(JSON.stringify(b,void 0,0)),S.digest("base64")}getProgram(){return this.program}getTypeChecker(){return this.typeChecker}getSymbolAtLocation(s){let c=this.typeChecker.getSymbolAtLocation(s);return c===void 0&&(c=l.getSymbol(s)),c}getExtendsSymbol(s){let c=s.declarations;if(c===void 0)return[void 0,void 0];for(let f of c)if(t.isClassDeclaration(f)){let m=f.heritageClauses;if(m!==void 0){for(let b of m)if(b.token===t.SyntaxKind.ExtendsKeyword){let S=b.types[0]?.expression,y=this.typeChecker.getSymbolAtLocation(S);if(C.isAlias(y)&&(y=this.typeChecker.getAliasedSymbol(y)),C.isClass(y))return[y,S.getText()]}}}return[void 0,void 0]}getLeafSymbolAtLocation(s){let c=this.getSymbolAtLocation(s);if(c!==void 0)return C.isAlias(c)?this.typeChecker.getAliasedSymbol(c):c}getSymbolAtTypeNodeLocation(s){return t.isTypeReferenceNode(s)?this.getLeafSymbolAtLocation(s.typeName):t.isTypeLiteralNode(s)?this.getLeafSymbolAtLocation(s):this.getLeafSymbolAtLocation(s)}getAliasedSymbol(s){return this.typeChecker.getAliasedSymbol(s)}getAllSuperTypes(s){return this._getAllSuperTypes(s,new Set,!1)}getAllSuperTypesWithPath(s){return this._getAllSuperTypes(s,new Set,!0)}*_getAllSuperTypes(s,c,f){if(C.isAlias(s)&&(c.add(s),s=this.typeChecker.getAliasedSymbol(s)),C.isClass(s)||C.isInterface(s)){let m=s.declarations;if(m===void 0)return;for(let b of m){let S;if((t.isClassDeclaration(b)||t.isInterfaceDeclaration(b))&&(S=b.heritageClauses),S!==void 0)for(let y of S)for(let g of y.types){let K=this.getLeafSymbolAtLocation(g.expression);K!==void 0&&!c.has(K)&&(yield f?[s,K]:K,c.add(K),yield*this._getAllSuperTypes(K,c,f))}}}else if(C.isTypeAlias(s)){let m=s.declarations;if(m===void 0)return;for(let b of m)if(t.isTypeAliasDeclaration(b)){let S=b.type;if(t.isTypeLiteralNode(S)){let y=this.getSymbolAtLocation(S);y!==void 0&&!c.has(y)&&(yield f?[s,y]:y,c.add(y))}else if(t.isTypeReferenceNode(S)){let y=this.getLeafSymbolAtLocation(S.typeName);y!==void 0&&!c.has(y)&&(yield f?[s,y]:y,c.add(y),yield*this._getAllSuperTypes(y,c,f))}else if(t.isIntersectionTypeNode(S))for(let y of S.types){let g=this.getSymbolAtTypeNodeLocation(y);g!==void 0&&!c.has(g)&&(C.isTypeLiteral(g)?(yield f?[s,g]:g,c.add(g)):C.isTypeAlias(g)?(c.add(g),yield*this._getAllSuperTypes(g,c,f)):(yield f?[s,g]:g,c.add(g),yield*this._getAllSuperTypes(g,c,f)))}}}}getAllSuperClasses(s){return this._getAllSuperClasses(s,new Set)}*_getAllSuperClasses(s,c){if(!C.isClass(s))return;let f=[s];for(;f.length>0;){let b=f.pop().declarations;if(b!==void 0)for(let S of b){if(!t.isClassDeclaration(S))continue;let y=S.heritageClauses;if(y!==void 0)for(let g of y){if(g.token!==t.SyntaxKind.ExtendsKeyword||g.types.length<1)continue;let K=g.types[0],_=this.getLeafSymbolAtLocation(K.expression);_!==void 0&&!c.has(_)&&(yield _,c.add(_),f.push(_))}}}}getDirectSubTypes(s,c,f=new J){return this._getAllSubTypes(s,"breadthFirstOnly",c,f,new Set)}getAllSubTypes(s,c="depthFirst",f,m=new J){return this._getAllSubTypes(s,c,f,m,new Set)}*_getAllSubTypes(s,c,f,m=new J,b){if(!C.isClass(s))return;let S=[s];for(;S.length>0;){let y=S.pop(),g=y.declarations;if(g===void 0||g.length===0)return;for(let K of g){if(!t.isClassDeclaration(K))continue;let _=new R(this.program,K.getSourceFile(),f,m);for(let B of _)for(let E of u.entries(B)){let X=u.getExtendsClause(E);if(X===void 0||X.types.length===0)continue;if(this.getLeafSymbolAtLocation(X.types[0].expression)===y){let Z=this.getSymbolAtLocation(E.name?E.name:E);Z!==void 0&&!b.has(Z)&&C.isClass(Z)&&(yield Z,b.add(Z),c==="depthFirst"?yield*this._getAllSubTypes(Z,c,f,m,b):c==="breadthFirst"&&S.push(Z))}}}}}getMemberStatistic(s){let c=new Set,f=new Set;C._getMemberStatistic(c,f,s);for(let m of this.getAllSuperTypes(s))C._getMemberStatistic(c,f,m);return{abstract:c,concrete:f}}static _getMemberStatistic(s,c,f){if(C.isClass(f)){let m=f.declarations;if(m===void 0)return;for(let b of m)if(t.isClassDeclaration(b))for(let S of b.members)if(t.isMethodDeclaration(S)||t.isGetAccessorDeclaration(S)||t.isSetAccessorDeclaration(S)||t.isPropertyDeclaration(S)){let y=S.name.getText();C.includesAbstract(S.modifiers)&&!c.has(y)?s.add(y):c.add(y)}else t.isIndexSignatureDeclaration(S)&&(C.includesAbstract(S.modifiers)&&!c.has("[]")?s.add("[]"):c.add("[]"))}else if((C.isInterface(f)||C.isTypeLiteral(f))&&f.members!==void 0)for(let m of f.members.values())c.has(m.name)||s.add(m.name)}static includesAbstract(s){return s===void 0?!1:s.some(c=>c.kind===t.SyntaxKind.AbstractKeyword)}}N.Symbols=C;let A;(f=>{function w(m){return m.projectService}f.getProjectService=w;function s(m,b){let S=m;if(typeof S.getFileAndProject=="function")return S.getFileAndProject(b)}f.getFileAndProject=s;function c(m,b,S){let y=m;if(typeof y.getPositionInFile=="function")return y.getPositionInFile(b,S)}f.getPositionInFile=c})(A=N.Sessions||={});function oe(w){return w.moduleReference.kind===t.SyntaxKind.ExternalModuleReference&&w.moduleReference.expression.kind===t.SyntaxKind.StringLiteral}class J{visited;_cache;constructor(s=!1){this.visited=new Map,s&&(this._cache=new Map)}get cache(){return this._cache}ensureCache(){this._cache===void 0&&(this._cache=new Map)}}N.ReferencedByContext=J;class R{program;sourceFile;preferredSourceFiles;context;visited;constructor(s,c,f,m){this.program=s,this.sourceFile=c,this.preferredSourceFiles=f,this.context=m,this.visited=R.getVisited(m.visited,c)}static getVisited(s,c){let f=s.get(c.fileName);return f===void 0&&(f=new Set,s.set(c.fileName,f)),f}getSourceFile(s){return this.program.getSourceFile(s)}[Symbol.iterator](){return this.entries()}*entries(){if(this.context.cache!==void 0&&this.context.cache.has(this.sourceFile.fileName)){for(let y of this.context.cache.get(this.sourceFile.fileName)){let g=this.program.getSourceFile(y);g!==void 0&&(yield g)}return}function s(y){return y.kind===t.SyntaxKind.ModuleDeclaration&&y.name.kind===t.SyntaxKind.StringLiteral}let c=this.context.cache?.get(this.sourceFile.fileName),f=this.program,m=f.getTypeChecker(),b=m.getSymbolAtLocation(this.sourceFile),S=this.visited;for(let y of this.allSourceFiles()){if(this.sourceFile===y){yield y,S.add(y.fileName);continue}if(!(S.has(y.fileName)||this.skipSourceFile(f,y)))if(y.externalModuleIndicator&&y.imports!==void 0){for(let g of y.imports)if(m.getSymbolAtLocation(g)===b){yield y,S.add(y.fileName),c&&c.add(y.fileName);break}}else{let g=y,K=g.kind===t.SyntaxKind.SourceFile?g.statements:g.body.statements,_=B=>{switch(B.kind){case t.SyntaxKind.ExportDeclaration:case t.SyntaxKind.ImportDeclaration:{let E=B;if(E.moduleSpecifier&&t.isStringLiteral(E.moduleSpecifier)&&m.getSymbolAtLocation(E.moduleSpecifier)===b)return!0;break}case t.SyntaxKind.ImportEqualsDeclaration:{let E=B;if(oe(E)&&m.getSymbolAtLocation(E.moduleReference.expression)===b)return!0;break}}return!1};e:for(let B of K)if(!S.has(y.fileName)&&_(B)){yield y,S.add(y.fileName),c&&c.add(y.fileName);break e}else if(s(B)){let E=B.body&&B.body.statements;if(E!==void 0){for(let X of E)if(!S.has(y.fileName)&&_(X)){yield y,S.add(y.fileName),c&&c.add(y.fileName);break e}}}}}}skipSourceFile(s,c){return s.isSourceFileDefaultLibrary(c)||s.isSourceFileFromExternalLibrary(c)||c.isDeclarationFile}*allSourceFiles(){this.preferredSourceFiles!==void 0&&(yield*this.preferredSourceFiles),yield*this.program.getSourceFiles()}}N.ReferencedByVisitor=R;let ne;(f=>{let w=new Map([[t.SyntaxKind.Unknown,0],[t.SyntaxKind.EndOfFileToken,1],[t.SyntaxKind.SingleLineCommentTrivia,2],[t.SyntaxKind.MultiLineCommentTrivia,3],[t.SyntaxKind.NewLineTrivia,4],[t.SyntaxKind.WhitespaceTrivia,5],[t.SyntaxKind.ShebangTrivia,6],[t.SyntaxKind.ConflictMarkerTrivia,7],[t.SyntaxKind.NonTextFileMarkerTrivia,8],[t.SyntaxKind.NumericLiteral,9],[t.SyntaxKind.BigIntLiteral,10],[t.SyntaxKind.StringLiteral,11],[t.SyntaxKind.JsxText,12],[t.SyntaxKind.JsxTextAllWhiteSpaces,13],[t.SyntaxKind.RegularExpressionLiteral,14],[t.SyntaxKind.NoSubstitutionTemplateLiteral,15],[t.SyntaxKind.TemplateHead,16],[t.SyntaxKind.TemplateMiddle,17],[t.SyntaxKind.TemplateTail,18],[t.SyntaxKind.OpenBraceToken,19],[t.SyntaxKind.CloseBraceToken,20],[t.SyntaxKind.OpenParenToken,21],[t.SyntaxKind.CloseParenToken,22],[t.SyntaxKind.OpenBracketToken,23],[t.SyntaxKind.CloseBracketToken,24],[t.SyntaxKind.DotToken,25],[t.SyntaxKind.DotDotDotToken,26],[t.SyntaxKind.SemicolonToken,27],[t.SyntaxKind.CommaToken,28],[t.SyntaxKind.QuestionDotToken,29],[t.SyntaxKind.LessThanToken,30],[t.SyntaxKind.LessThanSlashToken,31],[t.SyntaxKind.GreaterThanToken,32],[t.SyntaxKind.LessThanEqualsToken,33],[t.SyntaxKind.GreaterThanEqualsToken,34],[t.SyntaxKind.EqualsEqualsToken,35],[t.SyntaxKind.ExclamationEqualsToken,36],[t.SyntaxKind.EqualsEqualsEqualsToken,37],[t.SyntaxKind.ExclamationEqualsEqualsToken,38],[t.SyntaxKind.EqualsGreaterThanToken,39],[t.SyntaxKind.PlusToken,40],[t.SyntaxKind.MinusToken,41],[t.SyntaxKind.AsteriskToken,42],[t.SyntaxKind.AsteriskAsteriskToken,43],[t.SyntaxKind.SlashToken,44],[t.SyntaxKind.PercentToken,45],[t.SyntaxKind.PlusPlusToken,46],[t.SyntaxKind.MinusMinusToken,47],[t.SyntaxKind.LessThanLessThanToken,48],[t.SyntaxKind.GreaterThanGreaterThanToken,49],[t.SyntaxKind.GreaterThanGreaterThanGreaterThanToken,50],[t.SyntaxKind.AmpersandToken,51],[t.SyntaxKind.BarToken,52],[t.SyntaxKind.CaretToken,53],[t.SyntaxKind.ExclamationToken,54],[t.SyntaxKind.TildeToken,55],[t.SyntaxKind.AmpersandAmpersandToken,56],[t.SyntaxKind.BarBarToken,57],[t.SyntaxKind.QuestionToken,58],[t.SyntaxKind.ColonToken,59],[t.SyntaxKind.AtToken,60],[t.SyntaxKind.QuestionQuestionToken,61],[t.SyntaxKind.BacktickToken,62],[t.SyntaxKind.HashToken,63],[t.SyntaxKind.EqualsToken,64],[t.SyntaxKind.PlusEqualsToken,65],[t.SyntaxKind.MinusEqualsToken,66],[t.SyntaxKind.AsteriskEqualsToken,67],[t.SyntaxKind.AsteriskAsteriskEqualsToken,68],[t.SyntaxKind.SlashEqualsToken,69],[t.SyntaxKind.PercentEqualsToken,70],[t.SyntaxKind.LessThanLessThanEqualsToken,71],[t.SyntaxKind.GreaterThanGreaterThanEqualsToken,72],[t.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,73],[t.SyntaxKind.AmpersandEqualsToken,74],[t.SyntaxKind.BarEqualsToken,75],[t.SyntaxKind.BarBarEqualsToken,76],[t.SyntaxKind.AmpersandAmpersandEqualsToken,77],[t.SyntaxKind.QuestionQuestionEqualsToken,78],[t.SyntaxKind.CaretEqualsToken,79],[t.SyntaxKind.Identifier,80],[t.SyntaxKind.PrivateIdentifier,81],[t.SyntaxKind.BreakKeyword,83],[t.SyntaxKind.CaseKeyword,84],[t.SyntaxKind.CatchKeyword,85],[t.SyntaxKind.ClassKeyword,86],[t.SyntaxKind.ConstKeyword,87],[t.SyntaxKind.ContinueKeyword,88],[t.SyntaxKind.DebuggerKeyword,89],[t.SyntaxKind.DefaultKeyword,90],[t.SyntaxKind.DeleteKeyword,91],[t.SyntaxKind.DoKeyword,92],[t.SyntaxKind.ElseKeyword,93],[t.SyntaxKind.EnumKeyword,94],[t.SyntaxKind.ExportKeyword,95],[t.SyntaxKind.ExtendsKeyword,96],[t.SyntaxKind.FalseKeyword,97],[t.SyntaxKind.FinallyKeyword,98],[t.SyntaxKind.ForKeyword,99],[t.SyntaxKind.FunctionKeyword,100],[t.SyntaxKind.IfKeyword,101],[t.SyntaxKind.ImportKeyword,102],[t.SyntaxKind.InKeyword,103],[t.SyntaxKind.InstanceOfKeyword,104],[t.SyntaxKind.NewKeyword,105],[t.SyntaxKind.NullKeyword,106],[t.SyntaxKind.ReturnKeyword,107],[t.SyntaxKind.SuperKeyword,108],[t.SyntaxKind.SwitchKeyword,109],[t.SyntaxKind.ThisKeyword,110],[t.SyntaxKind.ThrowKeyword,111],[t.SyntaxKind.TrueKeyword,112],[t.SyntaxKind.TryKeyword,113],[t.SyntaxKind.TypeOfKeyword,114],[t.SyntaxKind.VarKeyword,115],[t.SyntaxKind.VoidKeyword,116],[t.SyntaxKind.WhileKeyword,117],[t.SyntaxKind.WithKeyword,118],[t.SyntaxKind.ImplementsKeyword,119],[t.SyntaxKind.InterfaceKeyword,120],[t.SyntaxKind.LetKeyword,121],[t.SyntaxKind.PackageKeyword,122],[t.SyntaxKind.PrivateKeyword,123],[t.SyntaxKind.ProtectedKeyword,124],[t.SyntaxKind.PublicKeyword,125],[t.SyntaxKind.StaticKeyword,126],[t.SyntaxKind.YieldKeyword,127],[t.SyntaxKind.AbstractKeyword,128],[t.SyntaxKind.AccessorKeyword,129],[t.SyntaxKind.AsKeyword,130],[t.SyntaxKind.AssertsKeyword,131],[t.SyntaxKind.AssertKeyword,132],[t.SyntaxKind.AnyKeyword,133],[t.SyntaxKind.AsyncKeyword,134],[t.SyntaxKind.AwaitKeyword,135],[t.SyntaxKind.BooleanKeyword,136],[t.SyntaxKind.ConstructorKeyword,137],[t.SyntaxKind.DeclareKeyword,138],[t.SyntaxKind.GetKeyword,139],[t.SyntaxKind.InferKeyword,140],[t.SyntaxKind.IntrinsicKeyword,141],[t.SyntaxKind.IsKeyword,142],[t.SyntaxKind.KeyOfKeyword,143],[t.SyntaxKind.ModuleKeyword,144],[t.SyntaxKind.NamespaceKeyword,145],[t.SyntaxKind.NeverKeyword,146],[t.SyntaxKind.OutKeyword,147],[t.SyntaxKind.ReadonlyKeyword,148],[t.SyntaxKind.RequireKeyword,149],[t.SyntaxKind.NumberKeyword,150],[t.SyntaxKind.ObjectKeyword,151],[t.SyntaxKind.SatisfiesKeyword,152],[t.SyntaxKind.SetKeyword,153],[t.SyntaxKind.StringKeyword,154],[t.SyntaxKind.SymbolKeyword,155],[t.SyntaxKind.TypeKeyword,156],[t.SyntaxKind.UndefinedKeyword,157],[t.SyntaxKind.UniqueKeyword,158],[t.SyntaxKind.UnknownKeyword,159],[t.SyntaxKind.UsingKeyword,160],[t.SyntaxKind.FromKeyword,161],[t.SyntaxKind.GlobalKeyword,162],[t.SyntaxKind.BigIntKeyword,163],[t.SyntaxKind.OverrideKeyword,164],[t.SyntaxKind.OfKeyword,165],[t.SyntaxKind.QualifiedName,166],[t.SyntaxKind.ComputedPropertyName,167],[t.SyntaxKind.TypeParameter,168],[t.SyntaxKind.Parameter,169],[t.SyntaxKind.Decorator,170],[t.SyntaxKind.PropertySignature,171],[t.SyntaxKind.PropertyDeclaration,172],[t.SyntaxKind.MethodSignature,173],[t.SyntaxKind.MethodDeclaration,174],[t.SyntaxKind.ClassStaticBlockDeclaration,175],[t.SyntaxKind.Constructor,176],[t.SyntaxKind.GetAccessor,177],[t.SyntaxKind.SetAccessor,178],[t.SyntaxKind.CallSignature,179],[t.SyntaxKind.ConstructSignature,180],[t.SyntaxKind.IndexSignature,181],[t.SyntaxKind.TypePredicate,182],[t.SyntaxKind.TypeReference,183],[t.SyntaxKind.FunctionType,184],[t.SyntaxKind.ConstructorType,185],[t.SyntaxKind.TypeQuery,186],[t.SyntaxKind.TypeLiteral,187],[t.SyntaxKind.ArrayType,188],[t.SyntaxKind.TupleType,189],[t.SyntaxKind.OptionalType,190],[t.SyntaxKind.RestType,191],[t.SyntaxKind.UnionType,192],[t.SyntaxKind.IntersectionType,193],[t.SyntaxKind.ConditionalType,194],[t.SyntaxKind.InferType,195],[t.SyntaxKind.ParenthesizedType,196],[t.SyntaxKind.ThisType,197],[t.SyntaxKind.TypeOperator,198],[t.SyntaxKind.IndexedAccessType,199],[t.SyntaxKind.MappedType,200],[t.SyntaxKind.LiteralType,201],[t.SyntaxKind.NamedTupleMember,202],[t.SyntaxKind.TemplateLiteralType,203],[t.SyntaxKind.TemplateLiteralTypeSpan,204],[t.SyntaxKind.ImportType,205],[t.SyntaxKind.ObjectBindingPattern,206],[t.SyntaxKind.ArrayBindingPattern,207],[t.SyntaxKind.BindingElement,208],[t.SyntaxKind.ArrayLiteralExpression,209],[t.SyntaxKind.ObjectLiteralExpression,210],[t.SyntaxKind.PropertyAccessExpression,211],[t.SyntaxKind.ElementAccessExpression,212],[t.SyntaxKind.CallExpression,213],[t.SyntaxKind.NewExpression,214],[t.SyntaxKind.TaggedTemplateExpression,215],[t.SyntaxKind.TypeAssertionExpression,216],[t.SyntaxKind.ParenthesizedExpression,217],[t.SyntaxKind.FunctionExpression,218],[t.SyntaxKind.ArrowFunction,219],[t.SyntaxKind.DeleteExpression,220],[t.SyntaxKind.TypeOfExpression,221],[t.SyntaxKind.VoidExpression,222],[t.SyntaxKind.AwaitExpression,223],[t.SyntaxKind.PrefixUnaryExpression,224],[t.SyntaxKind.PostfixUnaryExpression,225],[t.SyntaxKind.BinaryExpression,226],[t.SyntaxKind.ConditionalExpression,227],[t.SyntaxKind.TemplateExpression,228],[t.SyntaxKind.YieldExpression,229],[t.SyntaxKind.SpreadElement,230],[t.SyntaxKind.ClassExpression,231],[t.SyntaxKind.OmittedExpression,232],[t.SyntaxKind.ExpressionWithTypeArguments,233],[t.SyntaxKind.AsExpression,234],[t.SyntaxKind.NonNullExpression,235],[t.SyntaxKind.MetaProperty,236],[t.SyntaxKind.SyntheticExpression,237],[t.SyntaxKind.SatisfiesExpression,238],[t.SyntaxKind.TemplateSpan,239],[t.SyntaxKind.SemicolonClassElement,240],[t.SyntaxKind.Block,241],[t.SyntaxKind.EmptyStatement,242],[t.SyntaxKind.VariableStatement,243],[t.SyntaxKind.ExpressionStatement,244],[t.SyntaxKind.IfStatement,245],[t.SyntaxKind.DoStatement,246],[t.SyntaxKind.WhileStatement,247],[t.SyntaxKind.ForStatement,248],[t.SyntaxKind.ForInStatement,249],[t.SyntaxKind.ForOfStatement,250],[t.SyntaxKind.ContinueStatement,251],[t.SyntaxKind.BreakStatement,252],[t.SyntaxKind.ReturnStatement,253],[t.SyntaxKind.WithStatement,254],[t.SyntaxKind.SwitchStatement,255],[t.SyntaxKind.LabeledStatement,256],[t.SyntaxKind.ThrowStatement,257],[t.SyntaxKind.TryStatement,258],[t.SyntaxKind.DebuggerStatement,259],[t.SyntaxKind.VariableDeclaration,260],[t.SyntaxKind.VariableDeclarationList,261],[t.SyntaxKind.FunctionDeclaration,262],[t.SyntaxKind.ClassDeclaration,263],[t.SyntaxKind.InterfaceDeclaration,264],[t.SyntaxKind.TypeAliasDeclaration,265],[t.SyntaxKind.EnumDeclaration,266],[t.SyntaxKind.ModuleDeclaration,267],[t.SyntaxKind.ModuleBlock,268],[t.SyntaxKind.CaseBlock,269],[t.SyntaxKind.NamespaceExportDeclaration,270],[t.SyntaxKind.ImportEqualsDeclaration,271],[t.SyntaxKind.ImportDeclaration,272],[t.SyntaxKind.ImportClause,273],[t.SyntaxKind.NamespaceImport,274],[t.SyntaxKind.NamedImports,275],[t.SyntaxKind.ImportSpecifier,276],[t.SyntaxKind.ExportAssignment,277],[t.SyntaxKind.ExportDeclaration,278],[t.SyntaxKind.NamedExports,279],[t.SyntaxKind.NamespaceExport,280],[t.SyntaxKind.ExportSpecifier,281],[t.SyntaxKind.MissingDeclaration,282],[t.SyntaxKind.ExternalModuleReference,283],[t.SyntaxKind.JsxElement,284],[t.SyntaxKind.JsxSelfClosingElement,285],[t.SyntaxKind.JsxOpeningElement,286],[t.SyntaxKind.JsxClosingElement,287],[t.SyntaxKind.JsxFragment,288],[t.SyntaxKind.JsxOpeningFragment,289],[t.SyntaxKind.JsxClosingFragment,290],[t.SyntaxKind.JsxAttribute,291],[t.SyntaxKind.JsxAttributes,292],[t.SyntaxKind.JsxSpreadAttribute,293],[t.SyntaxKind.JsxExpression,294],[t.SyntaxKind.JsxNamespacedName,295],[t.SyntaxKind.CaseClause,296],[t.SyntaxKind.DefaultClause,297],[t.SyntaxKind.HeritageClause,298],[t.SyntaxKind.CatchClause,299],[t.SyntaxKind.ImportAttributes,300],[t.SyntaxKind.ImportAttribute,301],[t.SyntaxKind.PropertyAssignment,303],[t.SyntaxKind.ShorthandPropertyAssignment,304],[t.SyntaxKind.SpreadAssignment,305],[t.SyntaxKind.EnumMember,306],[t.SyntaxKind.SourceFile,307],[t.SyntaxKind.Bundle,308],[t.SyntaxKind.JSDocTypeExpression,309],[t.SyntaxKind.JSDocNameReference,310],[t.SyntaxKind.JSDocMemberName,311],[t.SyntaxKind.JSDocAllType,312],[t.SyntaxKind.JSDocUnknownType,313],[t.SyntaxKind.JSDocNullableType,314],[t.SyntaxKind.JSDocNonNullableType,315],[t.SyntaxKind.JSDocOptionalType,316],[t.SyntaxKind.JSDocFunctionType,317],[t.SyntaxKind.JSDocVariadicType,318],[t.SyntaxKind.JSDocNamepathType,319],[t.SyntaxKind.JSDoc,320],[t.SyntaxKind.JSDocText,321],[t.SyntaxKind.JSDocTypeLiteral,322],[t.SyntaxKind.JSDocSignature,323],[t.SyntaxKind.JSDocLink,324],[t.SyntaxKind.JSDocLinkCode,325],[t.SyntaxKind.JSDocLinkPlain,326],[t.SyntaxKind.JSDocTag,327],[t.SyntaxKind.JSDocAugmentsTag,328],[t.SyntaxKind.JSDocImplementsTag,329],[t.SyntaxKind.JSDocAuthorTag,330],[t.SyntaxKind.JSDocDeprecatedTag,331],[t.SyntaxKind.JSDocClassTag,332],[t.SyntaxKind.JSDocPublicTag,333],[t.SyntaxKind.JSDocPrivateTag,334],[t.SyntaxKind.JSDocProtectedTag,335],[t.SyntaxKind.JSDocReadonlyTag,336],[t.SyntaxKind.JSDocOverrideTag,337],[t.SyntaxKind.JSDocCallbackTag,338],[t.SyntaxKind.JSDocOverloadTag,339],[t.SyntaxKind.JSDocEnumTag,340],[t.SyntaxKind.JSDocParameterTag,341],[t.SyntaxKind.JSDocReturnTag,342],[t.SyntaxKind.JSDocThisTag,343],[t.SyntaxKind.JSDocTypeTag,344],[t.SyntaxKind.JSDocTemplateTag,345],[t.SyntaxKind.JSDocTypedefTag,346],[t.SyntaxKind.JSDocSeeTag,347],[t.SyntaxKind.JSDocPropertyTag,348],[t.SyntaxKind.JSDocThrowsTag,349],[t.SyntaxKind.JSDocSatisfiesTag,350],[t.SyntaxKind.JSDocImportTag,351],[t.SyntaxKind.SyntaxList,352],[t.SyntaxKind.NotEmittedStatement,353],[t.SyntaxKind.PartiallyEmittedExpression,354],[t.SyntaxKind.CommaListExpression,355],[t.SyntaxKind.SyntheticReferenceExpression,356]]),s=9999;function c(m){let b=[];for(;m!==void 0;)b.push(w.get(m.kind)??s),m=m.parent;return b}f.getPath=c})(ne=N.StableSyntaxKinds||={})})(ft||={});mt.exports=ft});var Oe,He,Se,St=M(()=>{"use strict";Oe=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let i=this._map.get(e);if(i)return n!==0&&this.touch(i,n),i.value}set(e,n,i=0){let r=this._map.get(e);if(r)r.value=n,i!==0&&this.touch(r,i);else{switch(r={key:e,value:n,next:void 0,previous:void 0},i){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let i=this._state,r=this._head;for(;r;){if(n?e.bind(n)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}values(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}entries(){let e=this,n=this._state,i=this._head,r={[Symbol.iterator](){return r},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.previous,i--;this._tail=n,this._size=i,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,i=e.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,i)=>{e.push([i,n])}),e}fromJSON(e){this.clear();for(let[n,i]of e)this.set(n,i)}},He=class extends Oe{_limit;_ratio;constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},Se=class extends He{constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}}});var k,he,z,ae,ge,H,Ge,ze,be,xe,Ue,G,L,de,Ce,U=M(()=>{"use strict";j();O();k=Q(W());St();he=F(),z=class extends Error{static SourceFileNotFound=1;static NodeNotFound=2;static NodeKindMismatch=3;code;constructor(e,n){super(e),this.code=n}},ae=class{getSymbolInfo(e,n=!1){let i=e.declarations;if(i===void 0||i.length===0)return{skip:!0};let r,o=0,d=this.getProgram();for(let l of i){let p=l.getSourceFile();r===void 0&&(r=p),(d.isSourceFileDefaultLibrary(p)||n&&d.isSourceFileFromExternalLibrary(p))&&o++}return o===i.length?{skip:!0}:{skip:!1,primary:r}}skipDeclaration(e,n=e.getSourceFile()){let i=this.getProgram();return i.isSourceFileDefaultLibrary(n)||i.isSourceFileFromExternalLibrary(n)||n.isDeclarationFile}},ge=class{referencedByContext;seenSymbols;neighborFiles;constructor(e){this.referencedByContext=void 0,this.seenSymbols=new Map,this.neighborFiles=e}getReferencedByContext(e=!1){return this.referencedByContext===void 0?this.referencedByContext=new k.ReferencedByContext(e):e&&this.referencedByContext.ensureCache(),this.referencedByContext}getSeenSymbols(e,n){let i=this.seenSymbols.get(n);return i===void 0&&(i=new Ue(e),this.seenSymbols.set(n,i)),i}getPreferredNeighborFiles(e){let n=[];for(let i of this.neighborFiles){let r=e.getSourceFile(i);r!==void 0&&n.push(r)}return n}},H=class extends ae{program;symbols;constructor(e,n=new k.Symbols(e)){if(super(),e!==n.getProgram())throw new Error("Program and symbols program must match");this.program=e,this.symbols=n}getSymbols(){return this.symbols}getProgram(){return this.program}getHeritageSymbol(e){let n=this.symbols.getSymbolAtLocation(e);if(n===void 0)return;k.Symbols.isAlias(n)&&(n=this.symbols.getAliasedSymbol(n));let i=0;for(;k.Symbols.isTypeAlias(n)&&i<10;){let r=n.declarations;if(r!==void 0){let o=n;for(let d of r)if(he.isTypeAliasDeclaration(d)){let l=d.type;he.isTypeReferenceNode(l)&&(n=this.symbols.getLeafSymbolAtLocation(l.typeName))}if(o===n)break}i++}return n}static getNodeInProgram(e,n){function i(p,u){if(p===void 0||u===void 0)return p===u;for(;p!==void 0&&u!==void 0;){if(p.kind!==u.kind||p.pos!==u.pos||p.end!==u.end)return!1;p=p.parent,u=u.parent}return p===void 0&&u===void 0}let r=n.getSourceFile().fileName,o=e.getSourceFile(r);if(o===void 0)throw new z(`No source file found for ${r}`,z.SourceFileNotFound);let d=k.default.getTokenAtPosition(o,n.pos),l=d;if(l===void 0)throw new z(`No node found for ${r}:${n.pos}`,z.NodeNotFound);for(;l!==void 0;){if(n.pos===l.pos&&n.end===l.end&&n.kind===l.kind&&i(n.parent,l.parent))return l;l=l.parent}throw new z(`Found node ${d.kind} for node ${n.kind} in file ${r}:${n.pos}`,z.NodeKindMismatch)}},Ge=class{info(){}msg(){}startGroup(){}endGroup(){}},ze=class{host;codeCache;supportsCaching;symbols;constructor(e,n){this.host=e,this.codeCache=new Se(100),this.supportsCaching=n,this.symbols=new Map}reconcile(){this.symbols.clear()}getSymbols(e){let n=this.symbols.get(e);return n===void 0&&(n=new k.Symbols(e),this.symbols.set(e,n)),n}run(e,n,i){let r=this.getPossiblePrograms(e,n);for(let o of r){let l=e.with(o).run(n,i);if(l!==void 0)return[o,l]}return[void 0,void 0]}getPossiblePrograms(e,n){let i=[];for(let r of this.getLanguageServices()){let o=r.getProgram();if(o===void 0)continue;let d=e.score(o,n);d>0&&i.push([d,o])}return i.sort((r,o)=>o[0]-r[0]).map(r=>r[1])}getCachedCode(e,n){if(this.supportsCaching){if(typeof e=="string")return this.codeCache.get(e);{let i=k.Symbols.createVersionedKey(n,this,this.host);return i===void 0?void 0:this.codeCache.get(i)}}}cacheCode(e,n){if(this.supportsCaching)if(typeof e=="string")this.codeCache.set(e,n);else{let i=k.Symbols.createVersionedKey(e,this,this.host);i!==void 0&&this.codeCache.set(i,n)}}},be=class extends ze{session;logger;constructor(e,n){super(n,!0),this.session=e;let i=k.Sessions.getProjectService(this.session);this.logger=i?.logger??new Ge}logError(e,n){this.session.logError(e,n)}getFileAndProject(e){return k.Sessions.getFileAndProject(this.session,e)}getPositionInFile(e,n){return k.Sessions.getPositionInFile(this.session,e,n)}*getLanguageServices(e){let n=k.Sessions.getProjectService(this.session);if(n!==void 0)if(e===void 0){for(let i of n.configuredProjects.values())yield i.getLanguageService();for(let i of n.inferredProjects)yield i.getLanguageService();for(let i of n.externalProjects)yield i.getLanguageService()}else{let i=he.server.toNormalizedPath(e.fileName),r=n.getScriptInfoForNormalizedPath(i);yield*r?r.containingProjects.map(o=>o.getLanguageService()):[]}}getScriptVersion(e){let n=he.server.toNormalizedPath(e.fileName),i=k.Sessions.getProjectService(this.session);return i===void 0?void 0:i.getScriptInfoForNormalizedPath(n)?.getLatestVersion()}},xe=class{tokenBudget;_metaItems=[];_items;constructor(e){this.tokenBudget=e,this._metaItems=[],this._items=[]}get items(){let e=this._metaItems.slice();this._items.sort((n,i)=>i.priority-n.priority);for(let n of this._items){let i=0;switch(n.kind){case"trait":i=me.sizeInChars(n);break;case"snippet":i=se.sizeInChars(n);break;case"relatedFile":break}e.push(n),this.tokenBudget.spent(i)}return e}addMetaData(e,n){this._metaItems.push(Je.create(e,n))}addErrorData(e){this._metaItems.push(je.create(e.code,e.message))}addTrait(e,n,i,r){this._items.push(me.create(e,n,i,r))}addSnippet(e,n,i){if(e.isEmpty())return;let r=e.snippet(n,i);this._items.push(r)}},Ue=class{session;symbols=new Set;keys=new Set;constructor(e,n){this.session=e,this.symbols=new Set,this.keys=n?.keys??new Set}add(e){this.symbols.add(e);let n=k.Symbols.createKey(e,this.session.host);n!==void 0&&this.keys.add(n)}has(e){if(this.symbols.has(e))return!0;let n=k.Symbols.createKey(e,this.session.host);return n===void 0?!1:this.keys.has(n)?(this.symbols.add(e),!0):!1}manages(e){return this.has(e)?!0:(this.add(e),!1)}},G=class{languageService;session;symbols;cost;constructor(e,n,i){this.languageService=n,this.session=e,this.symbols=e.getSymbols(this.getProgram()),this.cost=i}getProgram(){let e=this.languageService.getProgram();if(e===void 0)throw new Error("No program available");return e}},L=class{_next;contextKind;constructor(e){this._next=void 0,this.contextKind=e}get next(){return this._next}set next(e){if(this._next!==void 0)throw new Error("Next provider already set");this._next=e}getSymbolsInScopeToQuery(){let e=this.doGetSymbolsInScopeToQuery();if(this.next!==void 0){let n=this.next.getSymbolsInScopeToQuery();n!==void 0&&(e===void 0?e=n:e=e|n)}return e}doGetSymbolsInScopeToQuery(){}getSpecificCompletionContextKind(){return this.next!==void 0?this.next.getSpecificCompletionContextKind():this.contextKind}provide(e,n,i,r){this.doProvide(e,n,i,r),this.next!==void 0&&this.next.provide(e,n,i,r)}},de=class extends Error{constructor(){super("Budget exhausted")}},Ce=class{charBudget;constructor(e){this.charBudget=e*4}spent(e){this.charBudget-=e}isExhausted(){return this.charBudget<=0}throwIfExhausted(){if(this.charBudget<=0)throw new de}spentAndThrowIfExhausted(e){this.spent(e),this.throwIfExhausted()}}});var T,D,ie,re,le,Ke,Te,Qe,We,$e,Ye,P,ce=M(()=>{"use strict";j();U();O();T=Q(W()),D=F();(r=>{function a(o,d){d??=o.getSourceFile();let l=o.getStart(d,!0),p=d.getLineAndCharacterOfPosition(l),h=d.text.substring(l,o.getEnd()).split(/\r?\n/g);if(p.character>0){let x=d.getPositionOfLineAndCharacter(p.line,0),I=d.text.substring(x,l);n(h,I)}return i(h),h}r.getLines=a;function e(o){let d=o.getFullText(),l=D.getLeadingCommentRanges(d,0);if(l!==void 0&&l.length>0){let p=l.at(-1).pos,u=l.at(-1).end,x=d.substring(p,u).trim().split(/\r?\n/);if(i(x),x.length>1){let C=x[1].match(/^\s+/);C!==null&&n(x,C[0])}return x}}r.getDocumentation=e;function n(o,d,l=1){let p=!0;for(let u=l;u<o.length;u++)if(!o[u].startsWith(d)){p=!1;break}if(p)for(let u=l;u<o.length;u++)o[u]=o[u].substring(d.length)}function i(o){for(;o.length>0&&o[0].trim()==="";)o.shift();for(;o.length>0&&o.at(-1).trim()==="";)o.pop()}})(ie||={});re=class{session;indent;lines;source;additionalSources;constructor(e,n,i=0){this.session=e,this.indent=i,this.source=n.fileName,this.lines=[],this.additionalSources=new Set}makeKey(e){if(Array.isArray(e)){let n=[];for(let i of e){let r=T.Symbols.createVersionedKey(i,this.session,this.session.host);if(r!==void 0)n.push(r);else{n=void 0;break}}return n===void 0?void 0:n.join(";")}else return T.Symbols.createVersionedKey(e,this.session,this.session.host)}getAdditionalSources(){return this.additionalSources.delete(this.source),this.additionalSources}increaseIndent(){this.indent++}decreaseIndent(){this.indent--}addPropertyDeclaration(e){this.lines.push(...ie.getLines(e))}addMethodDeclaration(e){let n=ie.getDocumentation(e);n!==void 0&&this.lines.push(...n);let i=[];i.push("	".repeat(this.indent)),e.modifiers!==void 0&&(i.push(e.modifiers.map(r=>r.getText()).join(" ")),i.push(" ")),i.push(e.name.getText()),e.typeParameters!==void 0&&(i.push("<"),i.push(e.typeParameters.map(r=>r.getText()).join(", ")),i.push(">")),i.push("("),e.parameters!==void 0&&i.push(e.parameters.map(r=>r.getText()).join(", ")),i.push(")"),e.type!==void 0&&(i.push(": "),i.push(e.type.getText())),i.push(";"),this.lines.push(i.join(""))}addFunctionDeclaration(e,n,i){n??=e.name?.getText()??"";let r=ie.getDocumentation(e);r!==void 0&&this.lines.push(...r);let o=[];o.push("	".repeat(this.indent)),o.push(this.getModifiers(e.modifiers,i)),o.push(" function "),o.push(n),o.push(this.getTypeParameters(e.typeParameters)),o.push("("),o.push(this.getParameters(e.parameters)),o.push(")"),o.push(this.getReturnTypes(e)),o.push(";"),this.lines.push(o.join(""))}getModifiers(e,n){if(e===void 0)return"";let i=[];n!==void 0&&i.push(n);for(let r of e)r.kind===D.SyntaxKind.AsyncKeyword||r.kind===D.SyntaxKind.DeclareKeyword||r.kind===D.SyntaxKind.ExportKeyword||i.push(r.getText());return i.join(" ")}getTypeParameters(e){if(e===void 0)return"";let n=[];return n.push("<"),n.push(e.map(i=>i.getText()).join(", ")),n.push(">"),n.join("")}getParameters(e){return e===void 0?"":e.map(n=>n.getText()).join(", ")}getReturnTypes(e){return e.type===void 0?"":`: ${e.type.getText()}`}},le=class extends re{type;name;constructor(e,n,i,r){super(e,n),this.type=i,this.name=r}processMembers(e){for(let[n,i]of e)this.processMember(i)}processMember(e){let n=e.declarations;if(n!==void 0){if(T.Symbols.isProperty(e)){let i=n[0];(D.isPropertyDeclaration(i)||D.isPropertySignature(i))&&this.addPropertyDeclaration(i)}else if(T.Symbols.isMethod(e))for(let i of n)(D.isMethodDeclaration(i)||D.isMethodSignature(i))&&this.addMethodDeclaration(i)}}},Ke=class extends le{superClasses;includePrivates;key;constructor(e,n,i,r,o,d,l){super(e,i,r,o),this.includePrivates=l,this.key=void 0,d?(this.superClasses=new Array(...n.getAllSuperClasses(r)),this.key=this.makeKey(this.superClasses)):(this.key=this.makeKey(r),this.superClasses=void 0)}emit(){if(this.lines.push(`declare class${this.getTypeParameters()} ${this.name} {`),this.increaseIndent(),this.superClasses!==void 0)for(let e=this.superClasses.length-1;e>=0;e--){let n=this.superClasses[e];n.members!==void 0&&(T.Symbols.fillSources(this.additionalSources,n),this.processMembers(n.members))}this.type.members!==void 0&&(T.Symbols.fillSources(this.additionalSources,this.type),this.processMembers(this.type.members)),this.decreaseIndent(),this.lines.push("}")}processMember(e){!this.includePrivates&&T.Symbols.isPrivate(e)||super.processMember(e)}getTypeParameters(){let e=this.type.declarations;if(e===void 0||e.length===0)return"";let n=e[0];return D.isClassDeclaration(n)&&n.typeParameters!==void 0?super.getTypeParameters(n.typeParameters):""}},Te=class extends le{superTypes;key;constructor(e,n,i,r,o){super(e,i,r,o),this.superTypes=new Array(...n.getAllSuperTypes(r)).filter(d=>T.Symbols.isInterface(d)),this.key=this.makeKey(this.superTypes)}emit(){this.lines.push(`interface ${this.name} {`),this.increaseIndent();for(let e=this.superTypes.length-1;e>=0;e--){let n=this.superTypes[e];n.members!==void 0&&(T.Symbols.fillSources(this.additionalSources,n),this.processMembers(n.members))}this.type.members!==void 0&&(T.Symbols.fillSources(this.additionalSources,this.type),this.processMembers(this.type.members)),this.decreaseIndent(),this.lines.push("}")}},Qe=class extends re{type;name;key;constructor(e,n,i,r){super(e,n),this.type=i,this.name=r,this.key=this.makeKey(i)}emit(){if(this.lines.push(`${T.Symbols.isConstEnum(this.type)?"const ":""}enum ${this.name} {`),this.increaseIndent(),this.type.exports!==void 0){let e=0,n=this.type.exports.size-1;for(let[i,r]of this.type.exports){let o=r.declarations;if(o===void 0)continue;let d=o[0];if(D.isEnumMember(d)){let l=ie.getLines(d);e<n&&(l[l.length-1]+=","),this.lines.push(...l)}e++}}this.decreaseIndent(),this.lines.push("}")}},We=class extends le{key;constructor(e,n,i,r){super(e,n,i,r)}emit(){this.lines.push(`type ${this.name} = {`),this.increaseIndent(),this.type.members!==void 0&&this.processMembers(this.type.members),this.decreaseIndent(),this.lines.push("}")}},$e=class extends re{func;name;constructor(e,n,i,r){super(e,n),this.func=i,this.name=r??i.getName()}get key(){}emit(e){let n=this.func.declarations;if(n!==void 0)for(let i of n){let r=i.getSourceFile().fileName;r!==e.fileName&&D.isFunctionDeclaration(i)&&(this.addFunctionDeclaration(i,this.name,"declare"),this.additionalSources.add(r))}}},Ye=class extends re{module;name;constructor(e,n,i,r){super(e,n),this.module=i,this.name=r??i.getName()}get key(){}emit(e){this.lines.push(`declare namespace ${this.name} {`),this.increaseIndent();let n=this.module.exports;n!==void 0&&this.addExports(n,e),this.decreaseIndent(),this.lines.push("}")}addExports(e,n){for(let[i,r]of e){let o=r.declarations;if(o!==void 0&&T.Symbols.isFunction(r))for(let d of o){let l=d.getSourceFile().fileName;l!==n.fileName&&D.isFunctionDeclaration(d)&&(this.addFunctionDeclaration(d,this.name,"declare"),this.additionalSources.add(l))}}}},P=class extends ae{lines;source;additionalSources;indent=0;session;symbols;currentSourceFile;seen;constructor(e,n,i,r){super(),this.lines=[],this.source=void 0,this.additionalSources=new Set,this.session=e,this.symbols=n,this.currentSourceFile=i,this.seen=r}increaseIndent(){this.indent++}decreaseIndent(){this.indent--}getProgram(){return this.symbols.getProgram()}addSource(e){this.source===void 0?this.source=e:this.additionalSources.add(e)}addAdditionalSource(e){if(e!==void 0)for(let n of e)this.additionalSources.add(n)}isEmpty(){return this.lines.length===0||this.source===void 0}snippet(e,n){if(this.source===void 0)throw new Error("No source");return this.additionalSources.delete(this.source),se.create(this.source,this.additionalSources.size===0?void 0:[...this.additionalSources],this.lines.join(`
`),e,n)}addDeclaration(e){let n=e.getSourceFile();if(n.fileName===this.currentSourceFile.fileName||this.skipDeclaration(e,n))return;let i=ie.getLines(e,n);this.indent===0?this.lines.push(...i):this.lines.push(...i.map(r=>`${"	".repeat(this.indent)}${r})`)),this.addSource(n.fileName)}addClassSymbol(e,n,i,r){if(!T.Symbols.isClass(e)||this.seen.manages(e))return;let o=this.getSymbolInfo(e);o.skip||this.addEmitter(new Ke(this.session,this.symbols,o.primary,e,n,i,r))}addInterfaceSymbol(e,n){if(!T.Symbols.isInterface(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Te(this.session,this.symbols,i.primary,e,n))}addTypeAliasSymbol(e,n){if(!T.Symbols.isTypeAlias(e)||this.seen.manages(e))return;let i=this.getTypeToEmit(e);if(i===void 0)return;let r=this.getSymbolInfo(i);if(r.skip)return;let o=r.primary;T.Symbols.isClass(i)?this.addEmitter(new Ke(this.session,this.symbols,o,i,n,!0,!1)):T.Symbols.isInterface(i)?this.addEmitter(new Te(this.session,this.symbols,o,i,n)):T.Symbols.isTypeLiteral(i)&&this.addEmitter(new We(this.session,o,i,n))}addEnumSymbol(e,n){if(!T.Symbols.isEnum(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Qe(this.session,i.primary,e,n))}addFunctionSymbol(e,n){if(!T.Symbols.isFunction(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new $e(this.session,i.primary,e,n))}addModuleSymbol(e,n){if(!T.Symbols.isValueModule(e)||this.seen.manages(e))return;let i=this.getSymbolInfo(e);i.skip||this.addEmitter(new Ye(this.session,i.primary,e,n))}addEmitter(e){let n,i,r;if(e.key!==void 0){let o=this.session.getCachedCode(e.key);o!==void 0&&(n=o.value,i=o.uri,r=o.additionalUris)}(n===void 0||i===void 0)&&(e.emit(this.currentSourceFile),n=e.lines,i=e.source,r=e.getAdditionalSources(),e.key!==void 0&&this.session.cacheCode(e.key,{value:n,uri:i,additionalUris:r})),this.indent===0?this.lines.push(...n):this.lines.push(...n.map(o=>`${"	".repeat(this.indent)}${o}`)),this.addSource(i),this.addAdditionalSource(r)}getTypeToEmit(e){if(!T.Symbols.isTypeAlias(e))return;let n=e.declarations;if(n!==void 0){for(let i of n)if(D.isTypeAliasDeclaration(i)){let r=i.type;if(D.isTypeLiteralNode(r)){let o=this.symbols.getSymbolAtLocation(r);if(T.Symbols.isTypeLiteral(o))return o}else if(D.isTypeReferenceNode(r)){let o=this.symbols.getLeafSymbolAtLocation(r.typeName);if(T.Symbols.isInterface(o)||T.Symbols.isTypeLiteral(o)||T.Symbols.isTypeLiteral(o))return o}}}}}});var $,ee,Xe,ve,Ze,Fe,et,ht=M(()=>{"use strict";j();ce();U();O();$=Q(W()),ee=F(),Xe=class a extends H{classDeclaration;abstractMembers;extends;implements;constructor(e,n,i){if(super(e,n),i instanceof a){let r=i;this.classDeclaration=H.getNodeInProgram(e,r.classDeclaration),this.abstractMembers=r.abstractMembers;let o=d=>{let l=d.type,p=e.getSourceFile(l.getSourceFile().fileName);if(p!==void 0){let u=$.default.getTokenAtPosition(p,l.pos);if(ee.isExpressionWithTypeArguments(u)){let h=n.getSymbolAtLocation(u.expression);if(h!==void 0&&!this.getSymbolInfo(h).skip)return{symbol:h,type:u,abstractMembers:d.abstractMembers}}}};if(r.extends!==void 0&&(this.extends=o(r.extends)),r.implements!==void 0){let d;for(let l of r.implements){let p=o(l);p!==void 0&&(d=d??[],d.push(p))}this.implements=d}}else{let r=i;this.classDeclaration=r;let o=r.heritageClauses;if(o===void 0){this.abstractMembers=0,this.extends=void 0,this.implements=void 0;return}let d=0,l,p;for(let u of o)if(u.token===ee.SyntaxKind.ExtendsKeyword){if(u.types.length===1){let h=u.types[0],x=this.getHeritageSymbol(h.expression);if(x!==void 0&&!this.getSymbolInfo(x).skip){let I=this.getNumberOfAbstractMembers(x);d+=I,l={symbol:x,type:h,abstractMembers:I}}}}else if(u.token===ee.SyntaxKind.ImplementsKeyword)for(let h of u.types){let x=this.getHeritageSymbol(h.expression);if(x!==void 0&&!this.getSymbolInfo(x).skip){p=p??[];let I=this.getNumberOfAbstractMembers(x);d+=I,p.push({symbol:x,type:h,abstractMembers:I})}}p!==void 0&&p.sort((u,h)=>h.abstractMembers-u.abstractMembers),this.abstractMembers=d,this.extends=l,this.implements=p}}with(e){return e===this.program?this:new a(e,new $.Symbols(e),this)}*all(){this.extends!==void 0&&(yield this.extends),this.implements!==void 0&&(yield*this.implements)}isSame(e){return this.classDeclaration===e||this.classDeclaration.getSourceFile().fileName===e.getSourceFile().fileName&&this.classDeclaration.pos===e.pos}score(e,n){if(this.abstractMembers===0){if(this.extends===void 0)return-1;let l=this.extends.symbol.declarations;if(l===void 0)return-1;for(let p of l)if(e.getSourceFile(p.getSourceFile().fileName)===void 0)return-1;return 1}let i;for(let l of this.all())if(l.symbol.declarations!==void 0)for(let p of l.symbol.declarations){let u=p.getSourceFile();if(e.getSourceFile(u.fileName)!==void 0){i??=0,i+=l.abstractMembers;break}}if(i===void 0)return-1;let r=i/this.abstractMembers,o=n.neighborFiles;if(o.length===0)return r;let d=Math.pow(10,o.length.toString().length);r*=d;for(let l of o)e.getSourceFile(l)!==void 0&&(r+=1);return r}run(e,n){if(this.extends===void 0&&this.implements===void 0)return;let i,r=new Map([...this.all()].map(o=>[o.symbol,o]));for(let o of this.all()){let l=o.symbol.declarations;if(l===void 0)continue;let p=new Set;for(let u of l){if(!ee.isClassDeclaration(u)&&!ee.isInterfaceDeclaration(u)&&!ee.isTypeAliasDeclaration(u)||u.name===void 0)continue;let h=u.getSourceFile();if(p.has(h.fileName))continue;let x=new $.ReferencedByVisitor(this.program,h,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext());for(let I of x.entries()){n.throwIfCancellationRequested();for(let C of $.ClassDeclarations.entries(I)){if(C.heritageClauses===void 0||this.isSame(C))continue;let A;for(let oe of C.heritageClauses)for(let J of oe.types){let R=this.getHeritageSymbol(J.expression);if(R===void 0)continue;let ne=r.get(R);ne!==void 0&&(A??=0,A+=ne.abstractMembers)}if(A!==void 0&&(i===void 0?i={declaration:C,matchesAbstractMembers:A}:A>i.matchesAbstractMembers&&(i={declaration:C,matchesAbstractMembers:A})),i!==void 0&&i.matchesAbstractMembers===this.abstractMembers)return i}}}}}getNumberOfAbstractMembers(e){return this.symbols.getMemberStatistic(e).abstract.size}},ve=class extends G{classDeclaration;constructor(e,n,i){super(e,n,2),this.classDeclaration=i}compute(e,n,i){i.throwIfCancellationRequested();let r=this.symbols,o=r.getSymbolAtLocation(this.classDeclaration.name??this.classDeclaration);if(o===void 0||!$.Symbols.isClass(o)||o.declarations===void 0)return;let d=n.getSeenSymbols(this.session,this.getProgram()),l=this.classDeclaration.getSourceFile(),[p,u]=r.getExtendsSymbol(o);if(p!==void 0&&u!==void 0){let h=new P(this.session,r,l,d);h.addClassSymbol(p,u,!0,!1),e.addSnippet(h,"superClass",.9),d.add(p)}}},Ze=class extends G{classDeclaration;constructor(e,n,i){super(e,n,3),this.classDeclaration=i}compute(e,n,i){i.throwIfCancellationRequested();let r=this.getProgram(),o=this.classDeclaration,d=new Xe(r,this.symbols,o);if(d.extends===void 0&&d.implements===void 0)return;let[l,p]=this.session.run(d,n,i);if(l===void 0||p===void 0)return;let u=new P(this.session,this.session.getSymbols(l),o.getSourceFile(),n.getSeenSymbols(this.session,l));u.addDeclaration(p.declaration),e.addSnippet(u,"blueprint",1)}},Fe=class a extends L{static create(e){return e.members===void 0||e.members.length===0?new et(e):new a(e)}classDeclaration;constructor(e){super("class"),this.classDeclaration=e}doProvide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new ve(n,i,this.classDeclaration))}},et=class extends L{classDeclaration;constructor(e){super("wholeClass"),this.classDeclaration=e}doGetSymbolsInScopeToQuery(){return ee.SymbolFlags.Function}doProvide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new ve(n,i,this.classDeclaration),new Ze(n,i,this.classDeclaration))}}});var Y,te,it=M(()=>{"use strict";ce();U();O();Y=Q(W()),te=class extends G{declaration;sourceFile;priority;constructor(e,n,i,r){super(e,n,1),this.declaration=i,this.sourceFile=i.getSourceFile(),this.priority=r}compute(e,n,i){let r=this.symbols,o=n.getSeenSymbols(this.session,this.getProgram());for(let l of this.declaration.parameters){i.throwIfCancellationRequested();let p=l.type;if(p===void 0)continue;let u=r.getSymbolAtTypeNodeLocation(p);u===void 0||o.has(u)||this.processSymbol(e,u,Y.default.Node.getTypeName(p)??u.getName(),this.priority,o)}let d=this.declaration.type;if(d!==void 0){i.throwIfCancellationRequested();let l=r.getSymbolAtTypeNodeLocation(d);l!==void 0&&!o.has(l)&&this.processSymbol(e,l,Y.default.Node.getTypeName(d)??l.getName(),this.priority,o)}}processSymbol(e,n,i,r,o){let d=this.symbols;if(Y.Symbols.isClass(n)){let l=new P(this.session,d,this.sourceFile,o);l.addClassSymbol(n,i,!0,!1),e.addSnippet(l,"signature",r)}else if(Y.Symbols.isInterface(n)){let l=new P(this.session,d,this.sourceFile,o);l.addInterfaceSymbol(n,i),e.addSnippet(l,"signature",r)}else if(Y.Symbols.isTypeAlias(n)){let l=new P(this.session,d,this.sourceFile,o);l.addTypeAliasSymbol(n,i),e.addSnippet(l,"signature",r)}else if(Y.Symbols.isEnum(n)){let l=new P(this.session,d,this.sourceFile,o);l.addEnumSymbol(n,i),e.addSnippet(l,"signature",r)}}}});var gt,we,bt=M(()=>{"use strict";j();U();it();O();gt=F(),we=class extends L{functionDeclaration;constructor(e){super("function"),this.functionDeclaration=e}doGetSymbolsInScopeToQuery(){return gt.SymbolFlags.Function|gt.SymbolFlags.ValueModule}doProvide(e,n,i,r){e.push(new te(n,i,this.functionDeclaration,1))}}});var v,V,Ie,De,Pe,rt,ot,Ae,st,Ne,at,dt,Ee,xt=M(()=>{"use strict";j();ce();U();it();O();v=Q(W()),V=F(),Ie=class extends H{declaration;constructor(e,n,i){super(e,n),this.declaration=i}isSame(e){return this.declaration===e||this.declaration.getSourceFile().fileName===e.getSourceFile().fileName&&this.declaration.pos===e.pos}score(e,n){if(e.getSourceFile(this.declaration.getSourceFile().fileName)===void 0)return 0;let i=n.neighborFiles;if(i.length===0)return 1;let r=Math.pow(10,i.length.toString().length);for(let o of i)e.getSourceFile(o)!==void 0&&(r+=1);return r}},De=class extends Ie{constructor(e,n,i){super(e,n,i)}static create(e,n,i){let r=i.parent;if(!V.isClassDeclaration(r))return;let o=v.Declarations.isPrivate(i),d=[],l;if(!o){let p=n.getSymbolAtLocation(r.name!==void 0?r.name:r);if(p===void 0||!v.Symbols.isClass(p))return;let u=V.escapeLeadingUnderscores(i.name.getText()),h,x=!1;for(let[I,C]of n.getAllSuperTypesWithPath(p)){if(p===I&&(x=!1,h=[]),x)continue;h.push(C);let A=C.members?.get(u);if(A!==void 0){if(v.Symbols.isInterface(C)||v.Symbols.isTypeLiteral(C))d.push(...h),x=!0;else if(v.Symbols.isClass(C))if(v.Symbols.isAbstract(A))d.push(...h),x=!0;else{l=C;break}}}}if(o){let p=v.ClassDeclarations.getExtendsClause(r);if(p===void 0||p.types.length===0)return;{let u=n.getLeafSymbolAtLocation(p.types[0].expression);return u===void 0||!v.Symbols.isClass(u)?void 0:new rt(e,n,r,u,i)}}else return l===void 0&&d.length>0&&v.Symbols.isClass(d[0])&&(l=d[0]),l!==void 0?new ot(e,n,r,i,l):void 0}},Pe=class a extends Ie{classDeclaration;extendsSymbol;constructor(e,n,i,r,o){if(i instanceof a){let d=i,l=H.getNodeInProgram(e,d.declaration);super(e,n,l),this.classDeclaration=H.getNodeInProgram(e,d.classDeclaration);let p=d.extendsSymbol.declarations;if(p===void 0||p.length===0)throw new Error("No declarations found for extends symbol");let u;for(let h of p)if(V.isClassDeclaration(h)){let x=v.ClassDeclarations.getExtendsClause(h);if(x===void 0||x.types.length===0)throw new Error("No extends clause found");if(u=this.symbols.getSymbolAtLocation(x.types[0].expression),u===void 0||!v.Symbols.isClass(u))throw new Error("No extends symbol found");break}if(u===void 0)throw new Error("No extends symbol found");this.extendsSymbol=u}else super(e,n,o),this.classDeclaration=i,this.extendsSymbol=r}run(e,n){let i=this.getMemberName();for(let r of this.symbols.getDirectSubTypes(this.extendsSymbol,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),r.members!==void 0){let o=r.members.get(i);if(o===void 0)continue;let d=o.declarations;if(d===void 0||d.length===0)continue;for(let l of d){if(l.kind!==this.declaration.kind)continue;let p=l.parent;if(!(!V.isClassDeclaration(p)||p===this.classDeclaration))return p}}}},rt=class a extends Pe{constructor(e,n,i,r,o){i instanceof a?super(e,n,i):super(e,n,i,r,o)}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}getMemberName(){return V.escapeLeadingUnderscores(this.declaration.name.getText())}},ot=class a extends De{classDeclaration;startClass;constructor(e,n,i,r,o){if(i instanceof a){let d=i,l=H.getNodeInProgram(e,d.declaration);super(e,n,l),this.classDeclaration=H.getNodeInProgram(e,d.classDeclaration);let u=d.startClass.declarations;if(u===void 0||u.length===0)throw new Error("No declarations found for start class");let h;for(let x of u)if(V.isClassDeclaration(x)&&(h=this.symbols.getSymbolAtLocation(x.name?x.name:x),h!==void 0))break;if(h===void 0)throw new Error("No symbol found for start class");this.startClass=h}else super(e,n,r),this.classDeclaration=i,this.startClass=o}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}run(e,n){let i=V.escapeLeadingUnderscores(this.declaration.name.getText());for(let r of this.symbols.getAllSubTypes(this.startClass,v.Traversal.breadthFirst,e.getPreferredNeighborFiles(this.program),e.getReferencedByContext(!0)))if(n.throwIfCancellationRequested(),r.members!==void 0){let o=r.members.get(i);if(o===void 0)continue;let d=o.declarations;if(d===void 0||d.length===0)continue;for(let l of d){if(!V.isMethodDeclaration(l))continue;let p=l.parent;if(!(!V.isClassDeclaration(p)||p===this.classDeclaration))return p}}}},Ae=class extends G{declaration;constructor(e,n,i){super(e,n,3),this.declaration=i}compute(e,n,i){if(i.throwIfCancellationRequested(),this.getSymbol()===void 0)return;let o=this.createSearch();if(o!==void 0){let[d,l]=this.session.run(o,n,i);if(d!==void 0&&l!==void 0){let p=this.declaration.getSourceFile(),u=new P(this.session,this.session.getSymbols(d),p,n.getSeenSymbols(this.session,d));u.addDeclaration(l),e.addSnippet(u,"blueprint",1)}}}},st=class extends Ae{constructor(e,n,i){super(e,n,i)}createSearch(){return De.create(this.getProgram(),this.symbols,this.declaration)}getSymbol(){let e=this.symbols.getSymbolAtLocation(this.declaration.name);return v.Symbols.isMethod(e)?e:void 0}},Ne=class extends L{declaration;constructor(e){super(e.body===void 0||e.body.statements.length===0?"wholeMethod":"method"),this.declaration=e}doGetSymbolsInScopeToQuery(){return V.SymbolFlags.Function}doProvide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new te(n,i,this.declaration,.9),new st(n,i,this.declaration))}},at=class a extends Pe{constructor(e,n,i,r,o){i instanceof a?super(e,n,i):super(e,n,i,r,o)}with(e){return e===this.program?this:new a(e,new v.Symbols(e),this)}getMemberName(){return"__constructor"}},dt=class extends Ae{constructor(e,n,i){super(e,n,i)}createSearch(){let e=this.declaration.parent;if(!V.isClassDeclaration(e))return;let n=v.ClassDeclarations.getExtendsClause(e);if(!(n===void 0||n.types.length===0)){let i=this.symbols.getLeafSymbolAtLocation(n.types[0].expression);return i===void 0||!v.Symbols.isClass(i)?void 0:new at(this.getProgram(),this.symbols,e,i,this.declaration)}}getSymbol(){let e=this.symbols.getSymbolAtLocation(this.declaration);return v.Symbols.isConstructor(e)?e:void 0}},Ee=class extends L{declaration;constructor(e){super(e.body===void 0||e.body.statements.length===0?"wholeConstructor":"constructor"),this.declaration=e}doGetSymbolsInScopeToQuery(){return V.SymbolFlags.Function}doProvide(e,n,i,r){r.throwIfCancellationRequested(),e.push(new te(n,i,this.declaration,.9),new dt(n,i,this.declaration))}}});var ue,Ct=M(()=>{"use strict";U();O();ue=class extends L{constructor(){super("none")}doProvide(e,n,i,r){}}});var pe,Me,lt,Le,Kt=M(()=>{"use strict";j();ce();U();O();pe=Q(W()),Me=F(),lt=class extends G{tokenAtCursor;symbolsToQuery;constructor(e,n,i,r,o=1){super(e,n,o),this.tokenAtCursor=i,this.symbolsToQuery=r}compute(e,n,i){i.throwIfCancellationRequested();let r=this.getProgram(),o=this.symbols,d=n.getSeenSymbols(this.session,r),l=this.tokenAtCursor.getSourceFile(),p=this.getModulesAndFunctionsInScope(r,o.getTypeChecker(),l);i.throwIfCancellationRequested();let u=new P(this.session,o,l,d);for(let h of p.functions.real)u.addFunctionSymbol(h);i.throwIfCancellationRequested();for(let{alias:h,real:x}of p.functions.aliased)u.addFunctionSymbol(x,h.getName());i.throwIfCancellationRequested(),u.isEmpty()||e.addSnippet(u,"generalScope",.8),u=new P(this.session,o,l,d);for(let{alias:h,real:x}of p.modules)u.addModuleSymbol(x,h.getName());i.throwIfCancellationRequested(),u.isEmpty()||e.addSnippet(u,"generalScope",.8)}getModulesAndFunctionsInScope(e,n,i){let r={functions:{real:[],aliased:[]},modules:[]},o=n.getSymbolsInScope(this.tokenAtCursor,this.symbolsToQuery|Me.SymbolFlags.Alias);for(let d of o){let l=d.declarations;if(l!==void 0)for(let p of l){let u=p.getSourceFile();if(!(e.isSourceFileDefaultLibrary(u)||e.isSourceFileFromExternalLibrary(u))){if(pe.Symbols.isFunction(d)&&this.includeFunctions()&&u!==i){r.functions.real.push(d);break}else if(pe.Symbols.isAlias(d)){let h=n.getAliasedSymbol(d);if(pe.Symbols.isFunction(h)&&this.includeFunctions()){r.functions.aliased.push({alias:d,real:h});break}else if(pe.Symbols.isValueModule(h)&&this.includeValueModules()){r.modules.push({alias:d,real:h});break}}}}}return r}includeFunctions(){return(this.symbolsToQuery&Me.SymbolFlags.Function)!==0}includeValueModules(){return(this.symbolsToQuery&Me.SymbolFlags.ValueModule)!==0}},Le=class extends L{tokenAtCursor;constructor(e){super("sourceFile"),this.tokenAtCursor=e}doProvide(e,n,i,r){r.throwIfCancellationRequested();let o=this.getSymbolsInScopeToQuery();o!==void 0&&e.push(new lt(n,i,this.tokenAtCursor,o,2))}doGetSymbolsInScopeToQuery(){return Me.SymbolFlags.Function}}});function Ot(a,e){let n=Re.default.getTokenAtPosition(a,e);for(;n.kind===q.SyntaxKind.EndOfFileToken&&e>1;)n=Re.default.getTokenAtPosition(a,--e);if(n.kind===q.SyntaxKind.EndOfFileToken)return[new ue,n];let i=[],r=n;do{let d=Jt.get(r.kind);d!==void 0&&i.push(d(r,n)),r=r.parent}while(r!==void 0);if(i.length===0)return[new ue,n];let o=i[i.length-1];for(let d=i.length-2;d>=0;d--)o.next=i[d],o=i[d];return[i[i.length-1],n]}function Ht(a,e,n,i){let r=[];return n.provide(r,a,e,i),r.sort((o,d)=>o.cost-d.cost),r}function Tt(a,e,n,i,r,o,d){let l=n.getProgram();if(l===void 0)return;let p=l.getSourceFile(i);if(p===void 0)return;e.reconcile();let[u,h]=Ot(p,r),x=u.getSpecificCompletionContextKind();a.addMetaData(x,Re.default.StableSyntaxKinds.getPath(h));let I=l.getCompilerOptions();a.addTrait(.7,"The TypeScript version used in this project is ",q.version,"version");for(let[J,R,ne,N]of jt){let w=I[N];if(w){if(typeof w=="number"){let s=Gt(ne,w);s&&(w=s)}a.addTrait(R,J,w.toString(),N)}}let C=Ht(e,n,u,d),A=[];if(o!==void 0)for(let J of o)A.push(q.server.toNormalizedPath(J));let oe=new ge(A);for(let J of C){d.throwIfCancellationRequested();try{J.compute(a,oe,d)}catch(R){if(R instanceof z)a.addErrorData(R);else throw R}}}function Gt(a,e){return Object.keys(a).find(n=>a[n]===e)}var Re,q,Jt,jt,vt=M(()=>{"use strict";j();ht();U();bt();xt();Ct();O();Kt();Re=Q(W()),q=F(),Jt=new Map([[q.SyntaxKind.SourceFile,(a,e)=>new Le(e)],[q.SyntaxKind.FunctionDeclaration,(a,e)=>new we(a)],[q.SyntaxKind.ClassDeclaration,Fe.create],[q.SyntaxKind.Constructor,(a,e)=>new Ee(a)],[q.SyntaxKind.MethodDeclaration,(a,e)=>new Ne(a)]]),jt=[["The TypeScript module system used in this project is ",.6,q.ModuleKind,"module"],["The TypeScript module resolution strategy used in this project is ",.6,q.ModuleResolutionKind,"moduleResolution"],["The target version of JavaScript for this project is ",.9,q.ScriptTarget,"target"],["Library files that should be included in TypeScript compilation are ",.9,void 0,"lib"]]});var Ft,_e,kt=M(()=>{"use strict";Ft=Q(require("crypto")),_e=class{constructor(){}createHash(e){return Ft.default.createHash(e)}isDebugging(){return process.execArgv.some(e=>/^--(?:inspect|debug)(?:-brk)?(?:=\d+)?$/i.test(e))}}});var Dt={};Bt(Dt,{create:()=>Ut});function Ut(a){if(wt)return a.languageService;if(a.session!==void 0)try{a.session.addProtocolHandler("_.copilot.ping",()=>({response:Be,responseRequired:!0}));try{let e=Qt();Be={kind:"ok",session:!0,supported:e,version:ut.version},e&&(ye=new be(a.session,new _e),ct=a.languageServiceHost,a.session.addProtocolHandler("_.copilot.context",zt))}catch(e){e instanceof Error?(Be={kind:"error",message:e.message,stack:e.stack},a.session.logError(e,"_.copilot.installHandler")):(Be={kind:"error",message:"Unknown error"},a.session.logError(new Error("Unknown error"),"_.copilot.installHandler"))}}catch(e){e instanceof Error?a.session.logError(e,"_.copilot.installPingHandler"):a.session.logError(new Error("Unknown error"),"_.copilot.installPingHandler")}finally{wt=!0}return a.languageService}function Qt(){try{let a=ut.versionMajorMinor.split(".");if(a.length<2)return!1;let e=parseInt(a[0]),n=parseInt(a[1]);return e>5||e===5&&n>=5}catch{return!1}}var It,ut,wt,ye,ct,Be,zt,Pt=M(()=>{"use strict";vt();U();O();It=Q(W());j();kt();ut=F(),wt=!1,Be={kind:"error",message:"Attempt to install context handler failed"},zt=a=>{if(a.arguments===void 0)return{response:{error:"noArguments",message:"No arguments provided"},responseRequired:!0};let e=a.arguments,n=ye?.getFileAndProject(e);if(n===void 0)return{response:{error:"noProject",message:"No project found"},responseRequired:!0};if(typeof e.line!="number"||typeof e.offset!="number")return{response:{error:"invalidArguments",message:"No project found"},responseRequired:!0};let{file:i,project:r}=n,o=ye?.getPositionInFile(e,i);if(o===void 0)return{response:{error:"invalidPosition",message:"Position not valid"},responseRequired:!0};let d=typeof e.timeBudget=="number"?e.timeBudget:75,l=new It.CancellationTokenWithTimer(ct?.getCancellationToken?ct.getCancellationToken():void 0,d,ye?.host.isDebugging()??!1),p=new Ce(typeof e.tokenBudget=="number"?e.tokenBudget:7*1024),u=new xe(p);try{Tt(u,ye,r.getLanguageService(),i,o,e.neighborFiles,l)}catch(h){if(!(h instanceof ut.OperationCanceledException)&&!(h instanceof de))return h instanceof Error?{response:{error:"exception",message:h.message,stack:h.stack},responseRequired:!0}:{response:{error:"exception",message:"Unknown error"},responseRequired:!0}}return{response:{items:u.items,timedOut:l.isTimedOut(),tokenBudgetExhausted:p.isExhausted()},responseRequired:!0}}});j();var At=!1,pt;function Wt(a){if(!At)try{F.install(a.typescript),pt=(Pt(),Vt(Dt)).create}finally{At=!0}if(pt===void 0)throw new Error("Couldn't initialize TypeScript Context Server Plugin.");return{create:pt}}module.exports=Wt;
